<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="shutterbug">
    
    <title>
        
            rust |
        
        Stay Hard!
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.svg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"raw.githubusercontent.com","root":"/","language":"en","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":false,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.svg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/4.jpg","description":"the world you see is not about how they act but how we respond."},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":false},"code_copy":{"enable":false,"style":"default"},"pjax":{"enable":true},"lazyload":{"enable":false},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                Stay Hard!
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                CATEGORIES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                TAGS
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">CATEGORIES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">TAGS</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">rust</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.svg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">shutterbug</span>
                        
                            <span class="author-label">Lv5</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2023-03-12 21:39:18</span>
        <span class="mobile">2023-03-12 21:39</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/language/">language</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/rust/">rust</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1 id="RUST"><a href="#RUST" class="headerlink" title="RUST"></a>RUST</h1><h2 id="The-Component-Of-Rust"><a href="#The-Component-Of-Rust" class="headerlink" title="The Component Of Rust"></a>The Component Of Rust</h2><p>When i first use install rust, i get a little confused, why there are some many tools in rust, why i cannot just download a rust compiler and get things down? Okay, well, actually we can do that, but all the other tools just make our life much more easier.</p>
<ul>
<li><p>rustc</p>
<p>The ture rust compiler, it can work alone yet.</p>
</li>
<li><p>rustup</p>
<p>Rust toolchain manager, cross platform supports.</p>
</li>
<li><p>cargo</p>
<p>Rust project manager, maintain all depends of rust project.</p>
</li>
</ul>
<h2 id="Install-Rust"><a href="#Install-Rust" class="headerlink" title="Install Rust"></a>Install Rust</h2><p>By default rustup will be installed in <code>~/.rustup</code>, cargo will be installed in <code>~/.cargo</code>. If we want to customize install location, we need to add those environment variables to our env configuration and export variables before installation.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">write to <span class="built_in">env</span> file, <span class="keyword">for</span> me i write to ~/.config/env</span></span><br><span class="line">export RUSTUP_HOME=~/.local/share/rust/rustup</span><br><span class="line">export CARGO_HOME=~/.local/share/rust/cargo</span><br></pre></td></tr></table></figure>

<p>Source <code>~/.config/env</code> and download rust via curl.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">source</span> ~/.config/env</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl --proto <span class="string">&#x27;=https&#x27;</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh</span></span><br></pre></td></tr></table></figure>

<p>After installation finished, <code>. /home/healer/.local/apps/rust/cargo/env</code> command will be automaticly configured to some environment files(such as .bashrc). It is used to add all rust commands in environment path. </p>
<p>Check compiler and package manager version</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rustc --version</span><br><span class="line">cargo --version</span><br></pre></td></tr></table></figure>

<h2 id="Uninstall-Rust"><a href="#Uninstall-Rust" class="headerlink" title="Uninstall Rust"></a>Uninstall Rust</h2><p>It is easy to uninstall rust with rustup.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustup self uninstall</span><br></pre></td></tr></table></figure>


<h2 id="Vscode-Extension"><a href="#Vscode-Extension" class="headerlink" title="Vscode Extension"></a>Vscode Extension</h2><p>since i cannot download extension in vscode, so i need download <a class="link"   target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust" >rust vsix<i class="fas fa-external-link-alt"></i></a> file in web site. then install it with command:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vscodium --install-extension matklad.rust-analyzer-0.2.842.vsix</span><br></pre></td></tr></table></figure>

<p>then we need to install <a class="link"   target="_blank" rel="noopener" href="https://github.com/rust-lang/rls" >rust language server(RSL)<i class="fas fa-external-link-alt"></i></a> with command:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustup component add rls rust-analysis rust-src</span><br></pre></td></tr></table></figure>

<p>however i cannot download it since China cannot, so we need to <a class="link"   target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/27782375" >config mirror<i class="fas fa-external-link-alt"></i></a> with exporting this variables:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RUSTUP_DIST_SERVER=http://mirrors.ustc.edu.cn/rust-static</span><br><span class="line">RUSTUP_UPDATE_ROOT=http://mirrors.ustc.edu.cn/rust-static/rustup</span><br></pre></td></tr></table></figure>


<p><strong>cargo mirror</strong></p>
<p>the same problem comes with cargo, so we need to config cargo mirror, add this to <code>$CARGO_HOME/config</code>:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[source.crates-io]</span><br><span class="line">registry = &quot;https://github.com/rust-lang/crates.io-index&quot;</span><br><span class="line">replace-with = &#x27;ustc&#x27;</span><br><span class="line">[source.ustc]</span><br><span class="line">registry = &quot;https://mirrors.ustc.edu.cn/crates.io-index&quot;</span><br></pre></td></tr></table></figure>

<h2 id="Finally-Let’s-Begin-Syntax"><a href="#Finally-Let’s-Begin-Syntax" class="headerlink" title="Finally Let’s Begin Syntax"></a>Finally Let’s Begin Syntax</h2><h3 id="Basic-Rule"><a href="#Basic-Rule" class="headerlink" title="Basic Rule"></a>Basic Rule</h3><ul>
<li>every expression end with <code>;</code>.</li>
<li>write variables in snake style(all lower case with underscore).</li>
<li>comments begin with <code>//</code> or <code>/* */</code> with multi lines.</li>
</ul>
<h3 id="Variables-And-Mutability"><a href="#Variables-And-Mutability" class="headerlink" title="Variables And Mutability"></a>Variables And Mutability</h3><ul>
<li>use <code>let</code> to define variable.</li>
<li>variable by default is immutable.</li>
<li>use <code>mut</code> to define mutable variable.</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the standard way to define variable.</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">variable_name</span>: variable_type = value;</span><br><span class="line"></span><br><span class="line"><span class="comment">// yet we can ignore the variable type in most cases.</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">variable_name</span> = value;</span><br><span class="line"></span><br><span class="line"><span class="comment">// variable is immutable by default.</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span>: <span class="type">u8</span> = <span class="number">10</span>;</span><br><span class="line"><span class="comment">// we cannot resign value to x now.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// define a mutable variable.</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span>: <span class="type">u8</span> = <span class="number">10</span>;</span><br><span class="line"><span class="comment">// now we are free to resign value to it.</span></span><br><span class="line"><span class="keyword">mut</span> = <span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<h4 id="Constants"><a href="#Constants" class="headerlink" title="Constants"></a>Constants</h4><p>Variable is immutable by default, and it’s good, but what if we want some varaible is immutable forever? Okay, there comes constants. We cannot use mut to define constants.</p>
<ul>
<li>constants defined with <code>const</code> keyword.</li>
<li>constants are all upper case.</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// let&#x27;s define Pi with constants.</span></span><br><span class="line"><span class="keyword">const</span> PI: <span class="type">f32</span> = <span class="number">3.14</span></span><br></pre></td></tr></table></figure>


<h4 id="Shadowing"><a href="#Shadowing" class="headerlink" title="Shadowing"></a>Shadowing</h4><p>What if we want use the same variable name with previous one and the same time we don’t want it mutable? Shadowing can help us to reach that.</p>
<ul>
<li>use <code>let</code> keyword and the same name as previous one to define shadowing.</li>
<li>the previous is shadowed until the second one itself is shadowed or the scope ends.</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// let&#x27;s create a variable.</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span>: <span class="type">u8</span> = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;x is &#123;&#125; now&quot;</span>, x);</span><br><span class="line"></span><br><span class="line"><span class="comment">// let&#x27;s shadow the previous one.</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span>: <span class="type">u8</span> = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;x is &#123;&#125; now&quot;</span>, x);</span><br><span class="line"></span><br><span class="line"><span class="comment">// let&#x27;s shadow the second one.</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span>: &amp;<span class="type">str</span> = <span class="string">&quot;aha!&quot;</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;x is &#123;&#125; now&quot;</span>, x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// when the scope ends, the shadow ends.</span></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;x is &#123;&#125; now&quot;</span>, x);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Note:</p>
<p>The benefit of shadowing we can see is that we can change its type(cause we use <code>let</code> keyword), kind amazing!</p>
</blockquote>
<h3 id="Data-Type"><a href="#Data-Type" class="headerlink" title="Data Type"></a>Data Type</h3><h4 id="Scalar"><a href="#Scalar" class="headerlink" title="Scalar"></a>Scalar</h4><ul>
<li><p>Integer Types</p>
<p>Length  | Signed | Unsigned<br>|——-|——–|——–|<br>8-bit   | i8     | u8<br>16-bit  | i16    | u16<br>32-bit  | i32    | u32<br>64-bit  | i64    | u64<br>128-bit | i128   | u128<br>arch    | isize  | usize</p>
<ul>
<li><code>u</code> means all integer are positive.</li>
<li><code>i</code> means both negative and positive.</li>
<li><code>isize</code> <code>usize</code> depends on cpu architecture, 64bits cpu use 64bit, 32bits cpu use 32bit.</li>
<li>integer can be separated by underscore <code>_</code> for easy reading, such as 1_024 means 1024.</li>
</ul>
</li>
<li><p>Floating-Point Type</p>
<table>
<thead>
<tr>
<th>Length</th>
<th>form</th>
</tr>
</thead>
<tbody><tr>
<td>32-bit</td>
<td>f32</td>
</tr>
<tr>
<td>64-bit</td>
<td>f64</td>
</tr>
</tbody></table>
<ul>
<li>All floating-point are signed.</li>
<li>Default type is f64, since modern cpu is 64bits, so the speed is the same as f32 but more capability.</li>
</ul>
</li>
<li><p>Boolean Type</p>
<ul>
<li>true</li>
<li>false</li>
</ul>
</li>
<li><p>Character Type</p>
<ul>
<li>char: with signal quotes.</li>
</ul>
</li>
</ul>
<h4 id="Compound"><a href="#Compound" class="headerlink" title="Compound"></a>Compound</h4><ul>
<li><p>Tuple Type</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tuple is defined with ()</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">dot</span>: (<span class="type">u8</span>, <span class="type">u8</span>) = (<span class="number">2</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// access value with .index </span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span>: <span class="type">u8</span> = dot.<span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">y</span>: <span class="type">u8</span> = dot.<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// or descruct </span></span><br><span class="line"><span class="keyword">let</span> (x, y) = dot;</span><br></pre></td></tr></table></figure>

<ul>
<li>Tuple’s size cannot be changed.</li>
<li>Value type inside tuple can be different.</li>
</ul>
</li>
<li><p>Array Type</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// array is defined with []</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">list</span>: [<span class="type">u8</span>; <span class="number">2</span>] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// access value with .[index]</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span>: <span class="type">u8</span> = list[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">y</span>: <span class="type">u8</span> = list[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// if the value are same</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">list</span>: [<span class="type">u8</span>; <span class="number">5</span>] = [<span class="number">1</span>; <span class="number">5</span>];</span><br></pre></td></tr></table></figure>

<ul>
<li>Array’s size cannot be changed.</li>
<li>Array’s all elements should be the same, so the type define can be set like this [type; count].</li>
</ul>
</li>
</ul>
<h3 id="Expression-vs-Statement"><a href="#Expression-vs-Statement" class="headerlink" title="Expression vs Statement"></a>Expression vs Statement</h3><ul>
<li>Statements are instructions that perform some action and do not return a value. Statements end with <code>;</code>.</li>
<li>Expressions evaluate to a resultant value. Expressions don’t end with <code>;</code>.</li>
</ul>
<h3 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h3><ul>
<li>function define with <code>fn</code>.</li>
<li>function can be expression if the last line don’t end with a semicolon.</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function don&#x27;t return value</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">function_name</span>() &#123;</span><br><span class="line">    function_body;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function return value, last line don&#x27;t end with ;</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">function_name</span>(v1: type1, v2: type2) <span class="punctuation">-&gt;</span> return_value: returan_type &#123;</span><br><span class="line">    function_body;</span><br><span class="line">    return_value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="Control-Flow"><a href="#Control-Flow" class="headerlink" title="Control Flow"></a>Control Flow</h3><ul>
<li>if expression</li>
<li>repetition expression<ul>
<li>loop expression</li>
<li>while expression</li>
</ul>
</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// remember expression can return value</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">a</span>: <span class="type">u8</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">b</span>: <span class="type">u8</span> = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">max</span>: <span class="type">u8</span> = <span class="keyword">if</span> a &gt; b &#123;a&#125; <span class="keyword">else</span> &#123;b&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> a &gt; b &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;a&#125;&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;b&#125;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// loop, break will return value</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">b</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">status</span> = <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;loop!&quot;</span>);</span><br><span class="line">        b = b + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> b == a &#123;</span><br><span class="line">            <span class="keyword">break</span> <span class="string">&quot;it ends&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;status&#125;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// while loop</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">b</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> b &lt; a &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;loop!&quot;</span>);</span><br><span class="line">        b = b + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;it ends&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Ownership"><a href="#Ownership" class="headerlink" title="Ownership"></a>Ownership</h3><p>Value stores in two ways in memory with different structures:</p>
<ul>
<li><p>Stack</p>
<ul>
<li>value saves with orders, last in first out.</li>
<li>data in stack must have a known, fixed size.</li>
</ul>
</li>
<li><p>Heap</p>
<ul>
<li>less organized.</li>
<li>uncertain size.</li>
</ul>
</li>
</ul>
<p>Because store value in heap is much more slower than stack, so it is necessary to keep track of those values and release its space when the value is no needed any more. If we write with c language, we need to do it manually. But in rust, ownership just help us to do this stuff.</p>
<h4 id="Variable-vs-Reference"><a href="#Variable-vs-Reference" class="headerlink" title="Variable vs Reference"></a>Variable vs Reference</h4><p><strong>Variable</strong></p>
<p>It is very important to know the two things in rust, cause it is different from what c program language means.</p>
<p>When we create a variable and its data located in heap, the variable actually stores three parts of information.</p>
<ol>
<li>address to the data</li>
<li>length of actual data</li>
<li>capability of data</li>
</ol>
<p>When we call this variable, we follow the address and get what we need, the data. The problem of variable is that every time we pass it to others/function, its ownership has changed and it will be destroyed.</p>
<p>** Reference **</p>
<p>So there comes reference, <code>&amp;variable_name</code> means a reference, it stores the same address of data like variable does but doesn’t own it, so the data reference pointed to will not be removed when the reference stops being used.</p>
<h4 id="Ownership-Rules"><a href="#Ownership-Rules" class="headerlink" title="Ownership Rules"></a>Ownership Rules</h4><p>Although the main reason of ownership is for heap, but it works with stack either, all we need to to is following those three rules.</p>
<ol>
<li>Each value in Rust has an owner.</li>
<li>There can only be one owner at a time.</li>
<li>When the owner goes out of scope, the value will be dropped.</li>
</ol>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// data only valid in scope</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = <span class="number">1</span>;</span><br><span class="line">&#125; <span class="comment">// droped now</span></span><br></pre></td></tr></table></figure>

<h4 id="Move"><a href="#Move" class="headerlink" title="Move"></a>Move</h4><p>Data resign differs in stack and heap. The main reason is saving time and memory.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if value store in stack, both valid</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">y</span> = x;</span><br><span class="line"></span><br><span class="line"><span class="comment">// but value in heap, once resigned, the previous one will be removed, we call it move</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">s1</span> = String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s2</span> = s1;</span><br></pre></td></tr></table></figure>

<p>Actually, the variable which data in heap is a pointer, so if we resign a heap variable, we just create an new pointer and remove the previous one.</p>
<h4 id="Clone"><a href="#Clone" class="headerlink" title="Clone"></a>Clone</h4><p>But what if we really want a copy of data in heap? Method <code>clone()</code> can help us.</p>
<h4 id="Ownership-in-Function"><a href="#Ownership-in-Function" class="headerlink" title="Ownership in Function"></a>Ownership in Function</h4><p>It is the same as assign a value to a variable.</p>
<ul>
<li>Passing a stack value to function, the previous one still valid.</li>
<li>Passing a heap value to function, the previous one will be removed.</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">name</span> = String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;David&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">name_len</span> = <span class="title function_ invoke__">words</span>(name);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// we cannot use name any more, it is already removed.</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, name_len);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">words</span>(name: <span class="type">String</span>) <span class="punctuation">-&gt;</span> <span class="type">usize</span> &#123;</span><br><span class="line">    name.<span class="title function_ invoke__">len</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Reference-or-Borrowing"><a href="#Reference-or-Borrowing" class="headerlink" title="Reference or Borrowing"></a>Reference or Borrowing</h4><p>Above shows a real problem, once we pass a value to function, it will be removed, we cannot use it anymore, but we really need it. So we can use reference which also called borrowing to fix it.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// reference is the address of pointer</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">name</span> = String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;David&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">name_len</span> = <span class="title function_ invoke__">words</span>(&amp;name);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// now we can still use name</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; length is &#123;&#125;&quot;</span>, name, name_len);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">words</span>(name: &amp;<span class="type">String</span>) <span class="punctuation">-&gt;</span> <span class="type">usize</span> &#123;</span><br><span class="line">    name.<span class="title function_ invoke__">len</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Mutable-Reference"><a href="#Mutable-Reference" class="headerlink" title="Mutable Reference"></a>Mutable Reference</h4><p>Change heap value in function.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">name</span> = String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;David&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">words</span>(&amp;<span class="keyword">mut</span> name);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">words</span>(name: &amp;<span class="keyword">mut</span> <span class="type">String</span>) &#123;</span><br><span class="line">    name.<span class="title function_ invoke__">push_str</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>Mutable reference gives us the ability to modify data with reference, but there are some restrictions. Without those restrictions there is a chance we modify the same data at the same time, so there will be a problem called data race.</p>
<ol>
<li>Only one mutable reference at once.</li>
<li>Cannot have mutable reference and immutable reference at the same time.</li>
</ol>
<h4 id="Dangling-Reference"><a href="#Dangling-Reference" class="headerlink" title="Dangling Reference"></a>Dangling Reference</h4><p>It means the data has been released, but the reference still exist, so if we access data with this reference, there will be a problem. If we write code like this, rust compile will fail.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">reference_to_nothing</span> = <span class="title function_ invoke__">dangle</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">dangle</span>() <span class="punctuation">-&gt;</span> &amp;<span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s</span> = String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &amp;s</span><br><span class="line">&#125; <span class="comment">// s has been removed, but function try to return s&#x27; reference</span></span><br></pre></td></tr></table></figure>


<h4 id="Slice-Type"><a href="#Slice-Type" class="headerlink" title="Slice Type"></a>Slice Type</h4><p>Slice is a kind of reference it doesn’t have ownership. It can access part of a contiguous sequence of elements.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">path</span> = String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;/usr/share/bin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// dirname is slice, it can access part of path</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">dirname</span> = &amp;path[<span class="number">0</span>..<span class="number">11</span>];</span><br></pre></td></tr></table></figure>


<h3 id="Struct"><a href="#Struct" class="headerlink" title="Struct"></a>Struct</h3><p>Struct is a custom data type that lets you package together and name multiple related values that make up a meaningful group. Struct name show be capitalized.</p>
<p><strong>Struct vs Tuple:</strong></p>
<p>Both hold different variable type, but struct gives each data a name.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create struct</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    name: <span class="type">String</span>,</span><br><span class="line">    age: <span class="type">u8</span>,</span><br><span class="line">    class: <span class="type">String</span>,</span><br><span class="line">    active: <span class="type">bool</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// create mutable instance of struct</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">user1</span> = User &#123;</span><br><span class="line">    name: String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Jone&quot;</span>),</span><br><span class="line">    age: <span class="number">18</span>,</span><br><span class="line">    class: String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;class 6&quot;</span>),</span><br><span class="line">    active: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// change instance value</span></span><br><span class="line">user1.age = <span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<p>Use function to create user, if the parameter name is same as field, we can omit it.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add attribute to sturct help us to display struct with println!()</span></span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    name: <span class="type">String</span>,</span><br><span class="line">    age: <span class="type">u8</span>,</span><br><span class="line">    class: <span class="type">String</span>,</span><br><span class="line">    active: <span class="type">bool</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">user1</span> = <span class="title function_ invoke__">build_user</span>(String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;join&quot;</span>), <span class="number">19</span>);</span><br><span class="line">    user1.age = <span class="number">20</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, user1.age);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// use &#123;:#?&#125; to display stuct</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:#?&#125;&quot;</span>, user1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">build_user</span>(name: <span class="type">String</span>, age: <span class="type">u8</span>) <span class="punctuation">-&gt;</span> User &#123;</span><br><span class="line">    User &#123;</span><br><span class="line">        name,</span><br><span class="line">        age,</span><br><span class="line">        class: String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;class 6&quot;</span>),</span><br><span class="line">        active: <span class="literal">true</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Create a instance from already existed one, the benefit it that we can omit some filed if they are the same.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">user1</span> = User &#123;</span><br><span class="line">    name: String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;jone&quot;</span>),</span><br><span class="line">    age: <span class="number">19</span>,</span><br><span class="line">    class: String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;class 6&quot;</span>),</span><br><span class="line">    active: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">user2</span> = User &#123;</span><br><span class="line">    name: String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;jake&quot;</span>),</span><br><span class="line">    ..user1</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


<h4 id="Tuple-Structs"><a href="#Tuple-Structs" class="headerlink" title="Tuple Structs"></a>Tuple Structs</h4><p>We can use tuple to create struct, if field name is not necessary. Such as the color.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Color</span>(<span class="type">i16</span>, <span class="type">i16</span>, <span class="type">i16</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">black</span> = <span class="title function_ invoke__">Color</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Unit-like-Structs"><a href="#Unit-like-Structs" class="headerlink" title="Unit-like Structs"></a>Unit-like Structs</h4><h4 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h4><p>Methods are similar to functions, but methods don’t exist along, it defined within the context of structs/enum/trait object. The benefit of using methods is in this way, we can organize all the things we can do within the type of instance in one block.</p>
<ul>
<li>use <code>impl</code> block for struct</li>
<li>the first parameter of method is <code>self</code></li>
<li>use reference <code>&amp;self</code> instead of <code>self</code> to not take ownership</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    name: <span class="type">String</span>,</span><br><span class="line">    age: <span class="type">u8</span>,</span><br><span class="line">    class: <span class="type">String</span>,</span><br><span class="line">    active: <span class="type">bool</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">deactive</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.active = <span class="literal">false</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">user1</span> = User &#123;</span><br><span class="line">        name: String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;jone&quot;</span>),</span><br><span class="line">        age: <span class="number">19</span>,</span><br><span class="line">        class: String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;class 6&quot;</span>),</span><br><span class="line">        active: <span class="literal">true</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    user1.<span class="title function_ invoke__">deactive</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:#?&#125;&quot;</span>, user1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="Associated-Functions"><a href="#Associated-Functions" class="headerlink" title="Associated Functions"></a>Associated Functions</h4><p>If a function defined within an <code>impl</code> block, but don’t have a parameter of <code>self</code>, we call it associated function. Methods used to do some stuff with the implement type, and associated function usually used to create an new instance of the implement type. And we call associated function with <code>::</code>, for example the function we used <code>String::from()</code>.</p>
<h3 id="Enums-and-Pattern-Matching"><a href="#Enums-and-Pattern-Matching" class="headerlink" title="Enums and Pattern Matching"></a>Enums and Pattern Matching</h3><h4 id="Enums"><a href="#Enums" class="headerlink" title="Enums"></a>Enums</h4><p>Struct is the thing that combine associated data and can create some function associate with it. Enums give us possibility. If we use struct, the instance are always the same constructor, but if we use enum, it can be different.</p>
<ul>
<li>enum name and enum variant should be capitalized</li>
<li>enum variant can store data directly</li>
<li>enums can have methods</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Dot</span> &#123;</span><br><span class="line">    <span class="title function_ invoke__">TwoD</span>(<span class="type">i32</span>, <span class="type">i32</span>),</span><br><span class="line">    ThreeD &#123;</span><br><span class="line">        x: <span class="type">i32</span>,</span><br><span class="line">        y: <span class="type">i32</span>,</span><br><span class="line">        z: <span class="type">i32</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Dot</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">display</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;:#?&#125;&quot;</span>, <span class="keyword">self</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">dot1</span> = Dot::<span class="title function_ invoke__">TwoD</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">dot2</span> = Dot::ThreeD &#123; x: -<span class="number">1</span>, y: <span class="number">2</span>, z: <span class="number">4</span> &#125;;</span><br><span class="line">    dot1.<span class="title function_ invoke__">display</span>();</span><br><span class="line">    dot2.<span class="title function_ invoke__">display</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="Pattern-Match"><a href="#Pattern-Match" class="headerlink" title="Pattern Match"></a>Pattern Match</h4><p>I have to say pattern match really like the way haskell works. If we match something, we use <code>=&gt;</code> to return something, and use <code>_</code> to handle all the other cases.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">day</span> = <span class="string">&quot;monday&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">how_is_the_day</span> = <span class="keyword">match</span> day &#123;</span><br><span class="line">        <span class="string">&quot;saturday&quot;</span> =&gt; String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;free day&quot;</span>),</span><br><span class="line">        <span class="string">&quot;sunday&quot;</span> =&gt; String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;free day&quot;</span>),</span><br><span class="line">        _ =&gt; String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;working day&quot;</span>),</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, how_is_the_day);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>So it seems it can be a good partner with enums. Enums give us a list of options, and match can handle all of them, then do some actions.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Day</span> &#123;</span><br><span class="line">    Monday,</span><br><span class="line">    Tuesday,</span><br><span class="line">    Wednesday,</span><br><span class="line">    Fourthday,</span><br><span class="line">    Friday,</span><br><span class="line">    <span class="title function_ invoke__">Saturday</span>(<span class="type">String</span>),</span><br><span class="line">    <span class="title function_ invoke__">Sunday</span>(<span class="type">String</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// match can access the value from enum variant.</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">how_is_the_day</span>(day: Day) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">match</span> day &#123;</span><br><span class="line">        Day::<span class="title function_ invoke__">Saturday</span>(info) =&gt; info,</span><br><span class="line">        Day::<span class="title function_ invoke__">Sunday</span>(info) =&gt; info,</span><br><span class="line">        Day::Tuesday =&gt; String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;sunny&quot;</span>),</span><br><span class="line">        Day::Wednesday =&gt; String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;cloudy&quot;</span>),</span><br><span class="line">        _ =&gt; String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;rainly&quot;</span>),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">day</span> = Day::Friday;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="title function_ invoke__">how_is_the_day</span>(day));</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">day</span> = Day::Tuesday;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="title function_ invoke__">how_is_the_day</span>(day));</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">day</span> = Day::<span class="title function_ invoke__">Saturday</span>(String::<span class="title function_ invoke__">from</span>(<span class="string">&quot;what ever&quot;</span>));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="title function_ invoke__">how_is_the_day</span>(day));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        </div>

        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/rust/">#rust</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2023/05/03/it-is-all-about-choice/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">it-is-all-about-choice</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2023/03/12/neovim/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">neovim</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>
              -
            
            2023&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">shutterbug</a>
        </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#RUST"><span class="nav-number">1.</span> <span class="nav-text">RUST</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Component-Of-Rust"><span class="nav-number">1.1.</span> <span class="nav-text">The Component Of Rust</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Install-Rust"><span class="nav-number">1.2.</span> <span class="nav-text">Install Rust</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Uninstall-Rust"><span class="nav-number">1.3.</span> <span class="nav-text">Uninstall Rust</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vscode-Extension"><span class="nav-number">1.4.</span> <span class="nav-text">Vscode Extension</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Finally-Let%E2%80%99s-Begin-Syntax"><span class="nav-number">1.5.</span> <span class="nav-text">Finally Let’s Begin Syntax</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Basic-Rule"><span class="nav-number">1.5.1.</span> <span class="nav-text">Basic Rule</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Variables-And-Mutability"><span class="nav-number">1.5.2.</span> <span class="nav-text">Variables And Mutability</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Constants"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">Constants</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shadowing"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">Shadowing</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Data-Type"><span class="nav-number">1.5.3.</span> <span class="nav-text">Data Type</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Scalar"><span class="nav-number">1.5.3.1.</span> <span class="nav-text">Scalar</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Compound"><span class="nav-number">1.5.3.2.</span> <span class="nav-text">Compound</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Expression-vs-Statement"><span class="nav-number">1.5.4.</span> <span class="nav-text">Expression vs Statement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Function"><span class="nav-number">1.5.5.</span> <span class="nav-text">Function</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Control-Flow"><span class="nav-number">1.5.6.</span> <span class="nav-text">Control Flow</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ownership"><span class="nav-number">1.5.7.</span> <span class="nav-text">Ownership</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Variable-vs-Reference"><span class="nav-number">1.5.7.1.</span> <span class="nav-text">Variable vs Reference</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ownership-Rules"><span class="nav-number">1.5.7.2.</span> <span class="nav-text">Ownership Rules</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Move"><span class="nav-number">1.5.7.3.</span> <span class="nav-text">Move</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Clone"><span class="nav-number">1.5.7.4.</span> <span class="nav-text">Clone</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ownership-in-Function"><span class="nav-number">1.5.7.5.</span> <span class="nav-text">Ownership in Function</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Reference-or-Borrowing"><span class="nav-number">1.5.7.6.</span> <span class="nav-text">Reference or Borrowing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Mutable-Reference"><span class="nav-number">1.5.7.7.</span> <span class="nav-text">Mutable Reference</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Dangling-Reference"><span class="nav-number">1.5.7.8.</span> <span class="nav-text">Dangling Reference</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Slice-Type"><span class="nav-number">1.5.7.9.</span> <span class="nav-text">Slice Type</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Struct"><span class="nav-number">1.5.8.</span> <span class="nav-text">Struct</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Tuple-Structs"><span class="nav-number">1.5.8.1.</span> <span class="nav-text">Tuple Structs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Unit-like-Structs"><span class="nav-number">1.5.8.2.</span> <span class="nav-text">Unit-like Structs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Method"><span class="nav-number">1.5.8.3.</span> <span class="nav-text">Method</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Associated-Functions"><span class="nav-number">1.5.8.4.</span> <span class="nav-text">Associated Functions</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Enums-and-Pattern-Matching"><span class="nav-number">1.5.9.</span> <span class="nav-text">Enums and Pattern Matching</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Enums"><span class="nav-number">1.5.9.1.</span> <span class="nav-text">Enums</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Pattern-Match"><span class="nav-number">1.5.9.2.</span> <span class="nav-text">Pattern Match</span></a></li></ol></li></ol></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/local-search.js"></script>






<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
