<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>haskell | shutterbug sweet diary</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="HASKELLwhat is haskell?Haskell is a purely functional programming language. don’t tell the computer what to do as such but rather you tell it what stuff is feature unchangeable variable  no side-effec">
<meta property="og:type" content="article">
<meta property="og:title" content="haskell">
<meta property="og:url" content="https://raw.githubusercontent.com/ssfwshutterbug/ssfwshutterbug.github.io/main/2022/04/23/haskell/index.html">
<meta property="og:site_name" content="shutterbug sweet diary">
<meta property="og:description" content="HASKELLwhat is haskell?Haskell is a purely functional programming language. don’t tell the computer what to do as such but rather you tell it what stuff is feature unchangeable variable  no side-effec">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/ssfwshutterbug/ssfwshutterbug.github.io/main/2022/04/23/haskell/.images/image-20210526004245891.png">
<meta property="og:image" content="https://raw.githubusercontent.com/ssfwshutterbug/ssfwshutterbug.github.io/main/2022/04/23/haskell/.images/image-20210527200039979.png">
<meta property="article:published_time" content="2022-04-23T15:02:39.000Z">
<meta property="article:modified_time" content="2022-04-23T15:03:23.907Z">
<meta property="article:author" content="shutterbug">
<meta property="article:tag" content="haskell">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/ssfwshutterbug/ssfwshutterbug.github.io/main/2022/04/23/haskell/.images/image-20210526004245891.png">
  
    <link rel="alternate" href="/atom.xml" title="shutterbug sweet diary" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">shutterbug sweet diary</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://raw.githubusercontent.com/ssfwshutterbug/ssfwshutterbug.github.io/main"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-haskell" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/23/haskell/" class="article-date">
  <time datetime="2022-04-23T15:02:39.000Z" itemprop="datePublished">2022-04-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/learn/">learn</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      haskell
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="HASKELL"><a href="#HASKELL" class="headerlink" title="HASKELL"></a>HASKELL</h1><h2 id="what-is-haskell"><a href="#what-is-haskell" class="headerlink" title="what is haskell?"></a>what is haskell?</h2><p><strong>Haskell is a <em>purely functional programming language</em>. don’t tell the computer what to do as such but rather you tell it what stuff <em>is</em></strong></p>
<h2 id="feature"><a href="#feature" class="headerlink" title="feature"></a>feature</h2><ul>
<li>unchangeable variable </li>
<li>no side-effects</li>
<li>pure function</li>
<li>function must return value</li>
<li>type static</li>
<li>compile language</li>
<li>lazy calculate</li>
<li>elegant and concise</li>
</ul>
<h2 id="environment"><a href="#environment" class="headerlink" title="environment"></a>environment</h2><p>haskell的环境搭建包含了三个部分：</p>
<ol>
<li><p>编译器</p>
<ul>
<li>编译器使用ghc或者hugs（在使用包管理器或安装脚本时会自动安装）</li>
</ul>
</li>
<li><p>模块</p>
<p>模块安装有多种方法：</p>
<ul>
<li><p>如果是使用debian，ubuntu等操作系统，<a target="_blank" rel="noopener" href="https://www.haskell.org/platform/">包管理器提供的有完整安装包</a>，这种安装方式会自动安装后面代码提示所需要的后台服务</p>
</li>
<li><p>如果所使用的系统不在列表中，可使用官方提供的<a target="_blank" rel="noopener" href="https://www.haskell.org/ghcup/">一键安装脚本</a>，安装所有组件，包含了ghc以及包管理cabal/stack（安装完有2Gib多的空间占用）</p>
</li>
<li><p>如果觉得上面安装的文件太大，可使用系统提供的包管理器安装选择性的安装，例如archlinux可以直接使用<code>pacman</code>安装。我使用的就是这种方式，比较轻量，需要什么就安装什么。</p>
</li>
</ul>
</li>
<li><p>编辑器的代码提示</p>
<p>包含两个部分：</p>
<ul>
<li><p>后台服务：模块安装后在vscode中编辑是没有代码提示的，因为还缺少一个<code>haskell-language-server</code>，这个软件会在后台提供自动补全等功能</p>
<pre><code class="shell">pacman -S haskell-language-server
</code></pre>
</li>
<li><p>IDE插件：vscode中安装对应的扩展插件：</p>
</li>
</ul>
<p><img src=".images/image-20210526004245891.png" alt="image-20210526004245891"></p>
</li>
</ol>
<h2 id="run"><a href="#run" class="headerlink" title="run"></a>run</h2><p><strong>虽然haskell是编译型语言，但编译器提供了直接运行的方式。虽然速度比编译后的慢</strong></p>
<pre><code class="shell">runhaskell file.hs
</code></pre>
<p><strong>编译后运行</strong></p>
<p>haskell的编译器有很多，但是这里使用ghc，archlinux下安装很简单:</p>
<pre><code class="shell">pacman -S ghc
</code></pre>
<blockquote>
<p>Note: </p>
<p>由于xmonad是使用haskell语言写的，所以安装xmonad时，已经安装了ghc，所以不需要再次下载了</p>
</blockquote>
<p><strong>交互命令行</strong></p>
<p>输入<code>ghci</code>进入交互式界面，输入<code>:quit</code>进行退出</p>
<pre><code class="haskell">➜  ~  ghci
GHCi, version 8.10.4: https://www.haskell.org/ghc/  :? for help
Prelude&gt; :quit
Leaving GHCi.
Prelude&gt; :set prompt &quot;ghci &gt; &quot;
ghci &gt;
</code></pre>
<p>haskell的脚本后缀为<code>.hs</code>，ghci中加载脚本文件为：<code>:l file.hs</code>. <code>:r</code>重新加载文件</p>
<h2 id="arithmetic"><a href="#arithmetic" class="headerlink" title="arithmetic"></a>arithmetic</h2><pre><code class="haskell">+    --add
-    --subtract
*    --multiply
/    --divide
mod    --remainder
rem    --remainder
</code></pre>
<h2 id="boolean-algebra"><a href="#boolean-algebra" class="headerlink" title="boolean algebra"></a>boolean algebra</h2><p>与：<code>&amp;&amp;</code></p>
<p>或：<code>||</code></p>
<p>非：<code>not</code></p>
<p>等：<code>==</code></p>
<p>不等：<code>/=</code></p>
<pre><code class="haskell">ghci &gt;&gt; False &amp;&amp; True
False
ghci &gt;&gt; False || True
True
ghci &gt;&gt; not False
True
ghci &gt;&gt; 1 == 0
False
ghci &gt;&gt; &quot;a&quot; == &quot;b&quot;
False
ghci &gt;&gt; &quot;a&quot; == &quot;a&quot;
True
</code></pre>
<h2 id="list"><a href="#list" class="headerlink" title="list"></a>list</h2><ol>
<li>list use <code>[]</code></li>
<li>value in list must be the <code>same type</code></li>
<li><code>String</code> is a syntactic sugar of list</li>
<li>use <code>++</code> put lists together</li>
<li><code>++</code> method will work though the first list. however <code>:</code> cons will not</li>
<li>list can be compared if the stuff they contain can be compared</li>
<li>use <code>!!</code> to get element out of a list by index. the begin index is 0</li>
<li>enumerated value can use <code>..</code> to expand needed value</li>
<li>don’t use <code>..</code> operation with float value</li>
<li><code>[1..]</code> explains all the values of nature</li>
<li><code>_</code> will ignore one value (means drop)</li>
</ol>
<p><strong>some built in function:</strong></p>
<pre><code class="haskell">Prelude&gt; list = [1..10]
Prelude&gt; head list
1
Prelude&gt; tail list
[2,3,4,5,6,7,8,9,10]
Prelude&gt; init list
[1,2,3,4,5,6,7,8,9]
Prelude&gt; last list
10
Prelude&gt; list !! 4
5
Prelude&gt; length list
10
Prelude&gt; null list
False
Prelude&gt; reverse list
[10,9,8,7,6,5,4,3,2,1]
Prelude&gt; take 4 list
[1,2,3,4]
Prelude&gt; drop 4 list
[5,6,7,8,9,10]
Prelude&gt; maximum list
10
Prelude&gt; minimum list
1
Prelude&gt; sum list
55
Prelude&gt; product list
3628800
Prelude&gt; elem 5 list
True
Prelude&gt; 5 `elem` list
True
</code></pre>
<blockquote>
<p>Note:</p>
<pre><code>some function be write in the middle of two value, such as `5 elem [1..10]`
</code></pre>
</blockquote>
<pre><code class="haskell">-- expand value
Prelude&gt; [1..10]
[1,2,3,4,5,6,7,8,9,10]
Prelude&gt; [&#39;a&#39;..&#39;z&#39;]
&quot;abcdefghijklmnopqrstuvwxyz&quot;
Prelude&gt; [&#39;A&#39;..&#39;Z&#39;]
&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;

-- define steps
Prelude&gt; [1,3..20]
[1,3,5,7,9,11,13,15,17,19]
Prelude&gt; [&#39;A&#39;,&#39;D&#39;..&#39;Z&#39;]
&quot;ADGJMPSVY&quot;
</code></pre>
<blockquote>
<p>Note:</p>
<pre><code>reverse order list must define step
</code></pre>
</blockquote>
<pre><code class="haskell">Prelude&gt; [10..1]
[]
Prelude&gt; [10,9..1]
[10,9,8,7,6,5,4,3,2,1]
</code></pre>
<blockquote>
<p>Note:</p>
<pre><code>`take` function is very important, it works well with haskell&#39;s lazy feather
                                
`take 5 [1,5..]`
</code></pre>
</blockquote>
<pre><code class="haskell">Prelude&gt; take 20 $ cycle [1..5]
[1,2,3,4,5,1,2,3,4,5,1,2,3,4,5,1,2,3,4,5]
Prelude&gt; take 4 $ repeat [1..5]
[[1,2,3,4,5],[1,2,3,4,5],[1,2,3,4,5],[1,2,3,4,5]]
Prelude&gt; replicate 20 1
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
</code></pre>
<p><strong>list comprehension</strong></p>
<p>list comprehension allows us do more operations with each element or filter them and return a new list.</p>
<blockquote>
<p>Note:</p>
<pre><code>`[ return expression | variable &lt;- list, filter1, filter2]`
                                
`&lt;-` means bind each element to variable
</code></pre>
</blockquote>
<pre><code class="haskell">Prelude&gt; [ x^2 | x &lt;- [1..10]]
[1,4,9,16,25,36,49,64,81,100]
Prelude&gt; [ x^2 | x &lt;- [1..10], x `mod` 3 /= 0]
[1,4,16,25,49,64,100]
Prelude&gt; [ x^2 | x &lt;- [1..10], x `mod` 3 /= 0, x `mod` 2 == 0]
[4,16,64,100]
Prelude&gt; [ x+y | x &lt;- [1..3], y &lt;- [(-1),(-2)..(-3)]]
[0,-1,-2,1,0,-1,2,1,0]
</code></pre>
<blockquote>
<p>Note:</p>
<pre><code>we can use function to deliver list with parameter
</code></pre>
</blockquote>
<pre><code class="haskell">Prelude&gt; plus2 xs = [ x*2 | x &lt;- xs]
Prelude&gt; plus2 [1..5]
[2,4,6,8,10]
</code></pre>
<blockquote>
<p>Note:</p>
<pre><code>we can not only operator list itself, but also use list as a condition
</code></pre>
</blockquote>
<pre><code class="haskell">Prelude&gt; color xs = [ if x==0 then &quot;red&quot; else if x==1 then &quot;yellow&quot; else &quot;blue&quot; | x &lt;- xs, x==0 || x==1 || x==2]
Prelude&gt; color [1,4,0,3,2,10]
[&quot;yellow&quot;,&quot;red&quot;,&quot;blue&quot;]
</code></pre>
<blockquote>
<p>Note:</p>
<pre><code>we can use `_` to ignore some value
</code></pre>
</blockquote>
<pre><code class="haskell">Prelude&gt; length&#39; xs = sum [ 1 | _ &lt;- xs]
Prelude&gt; length&#39; [1..10]
10
</code></pre>
<blockquote>
<p>Note:</p>
<pre><code>deal with list of lists
</code></pre>
</blockquote>
<pre><code class="haskell">Prelude&gt; lists = [[2,3,4],[3,4,5],[4,5,6]]
Prelude&gt; [[x+1 | x&lt;-xs] | xs &lt;- lists]
[[3,4,5],[4,5,6],[5,6,7]]
</code></pre>
<h2 id="tuple"><a href="#tuple" class="headerlink" title="tuple"></a>tuple</h2><ol>
<li>tuple use <code>()</code></li>
<li>can contain different type values</li>
<li>tuple’s type depend on the length of tuple (means different length of tuple stands of different type) and the type of tuple’s value</li>
</ol>
<blockquote>
<p>Note:</p>
<ol>
<li><p>i still not find a good way to index the tuple, one way to index tuple is use <code>_</code> to filter no needed data. one little complex way is using <code>pattern match</code></p>
</li>
<li><p>but if the tuple only has two value, we can use two function get the value</p>
</li>
</ol>
</blockquote>
<pre><code class="haskell">yohe = (20,170,&quot;12312823@gmail.com&quot;)

-- define function with pattern match
getAge xs =
    let (age,_,_) = xs
    in  print age
-- haskell will return last value be default, so `print` is optional
getScho0l xs = let (_,school,_) = xs in school
-- a more convient way is 
getEmail (_,_,email) = email


-- we can write above in a file, then we can call it by function
getAge yohe
getSchool yohe
getEmail yohe
</code></pre>
<pre><code class="haskell">Prelude&gt; yohe = (20, &quot;2398422@gmail.com&quot;)
Prelude&gt; fst yohe
20
Prelude&gt; snd yohe
&quot;2398422@gmail.com&quot;
</code></pre>
<blockquote>
<p>Note:</p>
<pre><code>`zip` to combine two list into one tuple
                                
`unzip` can abstract tuple into two list
</code></pre>
</blockquote>
<pre><code class="haskell">Prelude&gt; zip [1..10] [&#39;a&#39;..&#39;z&#39;]
[(1,&#39;a&#39;),(2,&#39;b&#39;),(3,&#39;c&#39;),(4,&#39;d&#39;),(5,&#39;e&#39;),(6,&#39;f&#39;),(7,&#39;g&#39;),(8,&#39;h&#39;),(9,&#39;i&#39;),(10,&#39;j&#39;)]

Prelude&gt; a = zip [1..10] [&#39;a&#39;..&#39;z&#39;]
Prelude&gt; unzip a
([1,2,3,4,5,6,7,8,9,10],&quot;abcdefghij&quot;)
</code></pre>
<h2 id="type-and-typeclass"><a href="#type-and-typeclass" class="headerlink" title="type and typeclass"></a>type and typeclass</h2><p>in other languages such as python, data also has type, if we write <code>1 - True</code> in file will lead a error in compile time. so how about haskell? okay, we need to say in haskell everything has a type, data, function, expression (in fact, data is included in expression)</p>
<pre><code class="haskell">Prelude&gt; :t 3
3 :: Num p =&gt; p
Prelude&gt; :t sum
sum :: (Foldable t, Num a) =&gt; t a -&gt; a
Prelude&gt; :t (1+1)
(1+1) :: Num a =&gt; a
</code></pre>
<p><strong>benefit of type</strong></p>
<ol>
<li>type told the expression or function what data type it needs</li>
<li>make it much easier to know what the function/expression means while reading type define</li>
<li>check syntax in compile time</li>
</ol>
<blockquote>
<p>Note:</p>
<ol>
<li>type is capital case in start : <code>Int, Integer, Float, Double, Bool, Char, String</code></li>
<li>use <code>::</code> to announce type definition</li>
<li>use <code>-&gt;</code> to separate parameters</li>
<li>there are two ways:<ul>
<li>with function, <code>function_name :: parameter1_type -&gt; parameter2_type -&gt; return_type</code></li>
<li>with data, <code>data :: data_type</code></li>
</ul>
</li>
</ol>
</blockquote>
<pre><code class="haskell">getEmail :: String -&gt; String
getEmail xs = let (_,_,email) = xs in  email

Prelude&gt; 3 + 4
7
Prelude&gt; 3 + 4 :: Float
7.0
</code></pre>
<p><strong>type variable</strong></p>
<p>some functions not only allow one unchanged data type, this kind of function called <em>polymorphic function</em>. we need to use type variable, often use single lower case character (a~z). it stands for all kinds of types</p>
<pre><code class="haskell">-- head allow String and Int type and others...
Prelude&gt; :t head
head :: [a] -&gt; a
Prelude&gt; head &quot;string&quot;
&#39;s&#39;
Prelude&gt; head [1..10]
1
Prelude&gt; head [1.0..10.0]
1.0
</code></pre>
<p><strong>typeclass</strong></p>
<p>A typeclass is a sort of interface that defines some behavior. If a type is a part of a typeclass, that means that it <code>supports and implements</code> the behavior the typeclass describes.</p>
<pre><code class="haskell">Prelude&gt; :t (==)
(==) :: Eq a =&gt; a -&gt; a -&gt; Bool
</code></pre>
<p>Everything before the <strong>=&gt;</strong> symbol is called a <em>class constraint</em>. We can read the previous type declaration like this: the equality function takes any two values that are of the same type and returns a <strong>Bool</strong>. The type of those two values must be a member of the <strong>Eq</strong> class (this was the class constraint)</p>
<ol>
<li><p>we use <code>=&gt;</code> to announce typeclass</p>
</li>
<li><p>basic typeclass:</p>
<pre><code class="haskell">Eq             used for comparing:it&#39;s implement has method of `==` `/=`
Ord             ordering: `&gt;` `&lt;` `&gt;=` `&lt;=`
Show        present as string    `show`
Read        read string and return a type of Read    `read`
Enum        sequentially ordered types    `succ` `pred`
Bounded        have an upper and a lower bound
Num            numeric typeclass
Integral    only integral (whole) numbers    `fromIntegral`
Floating    includes only floating point numbers
</code></pre>
</li>
<li><p>if one type belongs to one typeclass, then this type can act like other type the typeclass defined.</p>
<pre><code class="haskell">-- 5 belongs to Num typeclass, so it can be Int or Float or Double
Prelude&gt; :t 5
5 :: Num p =&gt; p
Prelude&gt; 5 :: Int
5
Prelude&gt; 5 :: Float
5.0
Prelude&gt; 5 :: Double
5.0
</code></pre>
</li>
</ol>
<blockquote>
<p>Note:</p>
<ol>
<li><p>length function will return a Int value, which may lead many inconvenient</p>
<pre><code class="haskell">Prelude&gt; :t length
length :: Foldable t =&gt; t a -&gt; Int
                                
Prelude&gt; length &quot;hello&quot; + 4.5
                                
&lt;interactive&gt;:235:18: error:
    • No instance for (Fractional Int) arising from the literal ‘4.5’
    • In the second argument of ‘(+)’, namely ‘4.5’
      In the expression: length &quot;hello&quot; + 4.5
      In an equation for ‘it’: it = length &quot;hello&quot; + 4.5
</code></pre>
<p>so why <code>fromIntegral</code> comes up</p>
<pre><code class="haskell">Prelude&gt; :t fromIntegral
fromIntegral :: (Integral a, Num b) =&gt; a -&gt; b
Prelude&gt; fromIntegral (length &quot;hello&quot;) + 4.5
9.5
</code></pre>
</li>
</ol>
</blockquote>
<p><strong>type annotations</strong></p>
<p>some functions don’t know what kind of type it will return, so we need to tell it, that’s type annotations</p>
<p>use <code>:: data_type</code> after data</p>
<pre><code class="haskell">Prelude&gt; :t read
read :: Read a =&gt; String -&gt; a
Prelude&gt; read &quot;3&quot; :: Int
3
</code></pre>
<h2 id="function"><a href="#function" class="headerlink" title="function"></a>function</h2><ol>
<li>function will return last calculate value by default, so  <code>return</code> keyword is optiona</li>
<li><code>return</code> keyword only told function return a value rather than pause, so the code below <code>return</code> will run continue</li>
<li>function name starts with lower case</li>
<li>args split with blank space</li>
</ol>
<p><strong>pattern matching</strong></p>
<p>much more different than any other languages, this feature in my opinion is really cool for it can do some match with parameters.</p>
<pre><code class="haskell">-- how sum comes
-- for list end with [], this may lead function runs error, with pattern match, we can avoid it
sum&#39; [] = 0
-- with pattern match, we can sperate list into two parts: head value and the rest of value
sum&#39; (x:xs) = x + sum&#39; xs
</code></pre>
<pre><code class="haskell">-- without pattern match, function like this
yeho = (20，170，“293848389@gmail.com”)
getEmail xs = let (_,_,email) = xs in email

-- however we can directly match with parameter,cool?
yeho = (20，170，“293848389@gmail.com”)
getEmail (_,_,email) = email

-- without pattern match, head like this
head&#39; [] = error &quot;empty list&quot;
head&#39; x = x !! 0
-- with parameter match, head like this, cool?
head&#39; [] = error &quot;empty list&quot;
head&#39; (x:_) = x
</code></pre>
<p>pattern matching also can act like if statement</p>
<pre><code class="haskell">color 0 = &quot;red&quot;
color 1 = &quot;yellow&quot;
color 2 = &quot;blue&quot;
color _ =  &quot;not origion triple color&quot;
</code></pre>
<p><strong>guard</strong></p>
<p>guards are a way of testing whether some property of a value (or several of them) are true or false. much more like if statement.</p>
<ol>
<li>no <code>=</code> sign after parameter</li>
<li>use <code>|</code> to sign begin</li>
</ol>
<pre><code class="haskell">adjudge :: (Ord a, Num a) =&gt; a -&gt; [Char]
adjudge score
    | score &gt;= 90 = &quot;perfect&quot;
    | score &gt;= 80 = &quot;good&quot;
    | score &gt;= 60 = &quot;not bad&quot;
    | score &gt;= 0 = &quot;not pass&quot;
    | otherwise = &quot;error score&quot;
</code></pre>
<p><code>otherwise</code> is optional, but it is often useful for catching everything</p>
<p>with <strong>where</strong> we can also use local variables in guard</p>
<pre><code class="haskell">total :: (Ord a, Num a) =&gt; a -&gt; a -&gt; a -&gt; [Char]
total math english history
    | score &gt; lineup = &quot;perfect&quot;
    | score &gt; passline = &quot;good&quot;
    | otherwise = &quot;hurry up&quot;
    where score = math + english + history
          lineup = 400
          passline = 200 
</code></pre>
<blockquote>
<p>Note:</p>
<ol>
<li>the indent below where is hard to specify, for it is not 2 tab but 6 blank space (1tab + 2black space)</li>
<li>in where binding, we can define variable</li>
<li>in where binding, we can use pattern match</li>
<li>in where binging, we can use function</li>
</ol>
</blockquote>
<pre><code class="haskell">total :: (Ord a, Num a) =&gt; a -&gt; a -&gt; a -&gt; [Char]
total math english history
    | score &gt; lineup = &quot;perfect&quot;
    | score &gt; passline = &quot;good&quot;
    | otherwise = &quot;hurry up&quot;
    where score = math + english + history
          (lineup,passline) = (400,200)
</code></pre>
<pre><code class="haskell">import Data.List.Split

email :: [Char] -&gt; [Char]
email addr
    | end == &quot;gmail.com&quot; = &quot;gmail&quot;
    | end == &quot;qq.com&quot; = &quot;qq&quot;
    | end == &quot;163.com&quot; = &quot;163&quot;
    | otherwise = &quot;error email address&quot;
    where [_,end] = splitOn &quot;@&quot; addr
 
-- run result
*Main&gt; email &quot;20398442@qq.com&quot;
&quot;qq&quot;
</code></pre>
<pre><code class="haskell">zip&#39; xs ys = [f x y | x &lt;- xs, y &lt;- ys]
    where f x y = (x, y)
</code></pre>
<p><strong>let</strong> works similar like where, but it can write in anywhere in function not only in the end</p>
<p>syntax: <code>let binding in expression</code></p>
<p><strong>the difference between let and where is that let binding itself is expression</strong></p>
<pre><code class="haskell">(let (a,b,c) = (1,2,3) in a+b+c) * 100
</code></pre>
<p><code>if else</code> statement is an expression and we can cram it in almost anywhere, so do <code>let</code> binding. and i wanna to say let binding is so flexible and cool</p>
<pre><code class="haskell">-- simple calculate expression
3 + (let a=2 in a^2) + 1

-- list expression
[ m | x &lt;- [1..10], let m = x * 2 + 1, m &gt; 8]

-- function expression
let add1 x = x + 1 in (add1 1, add1 2, add1 3)

-- pattern match
let (a,b,c) = (1,2,3) in a^2 + b^2 + c^2
</code></pre>
<h2 id="case-expression"><a href="#case-expression" class="headerlink" title="case expression"></a>case expression</h2><p>case is expression,so what about it? that means we can use pattern matching with case value</p>
<pre><code class="haskell">-- syntax
case expression of pattern -&gt; result
                   pattern -&gt; result
                   pattern -&gt; result
                   ...
</code></pre>
<pre><code class="haskell">head&#39; :: [a] -&gt; a
head&#39; xs = case xs of [] -&gt; error &quot;empty list&quot;
                      (x:xs) -&gt; x
</code></pre>
<h2 id="recursion"><a href="#recursion" class="headerlink" title="recursion"></a>recursion</h2><p>for haskell is a language that higher than any other languages, and it ignores how to do it but tells what it is, so the implementation of loop will be instead of recursion. that is why recursion so important in haskell.</p>
<pre><code class="haskell">max&#39; :: Ord a =&gt; [a] -&gt; a 
-- edge condition with pattern match
max&#39; [] = error &quot;empty list&quot;
max&#39; [x] = x
max&#39; (x:xs)
-- don&#39;t need to do loop condition, but to say head number greater than 
-- tail numbers (rest of the list number)
    | x &gt; restList = x
    | otherwise = restList
    where restList = max&#39; xs
</code></pre>
<pre><code class="haskell">take&#39; :: Int -&gt; [a] -&gt; [a]
take&#39; _ [] = []
take&#39; n (x:xs)
    | n &lt;= 0 = []
    | otherwise = x : take&#39; (n-1) xs
</code></pre>
<pre><code class="haskell">reverse&#39; :: [a] -&gt; [a]
reverse&#39; [] = []
reverse&#39; (x:xs) = reverse&#39; xs ++ [x]
</code></pre>
<pre><code class="haskell">repeat&#39; :: a -&gt; [a]
repeat&#39; x = x:repeat&#39; x
</code></pre>
<pre><code class="haskell">-- notice the type define
zip&#39; :: [a] -&gt; [b] -&gt; [(a,b)]
zip&#39; [] _ = []
zip&#39; _ [] = []
zip&#39; (x:xs) (y:ys) = (x,y) : zip&#39; xs ys
</code></pre>
<pre><code class="haskell">elem&#39; :: Eq a =&gt; a -&gt; [a] -&gt; Bool 
elem&#39; m [] = False
elem&#39; m (x:xs) 
    | m == x = True 
    | otherwise = elem&#39; m xs
</code></pre>
<pre><code class="haskell">dropBlank&#39; :: String -&gt; String
dropBlank&#39; [] = []
dropBlank&#39; (x:xs)
    | x == &#39; &#39; = &quot;&quot; ++ dropBlank&#39; xs
    | otherwise = x:dropBlank&#39; xs
</code></pre>
<p><strong>quick sort</strong></p>
<pre><code class="haskell">quicksort :: Ord a =&gt; [a] -&gt; [a]
quicksort [] = []
quicksort (x:xs) =
    let smallsort = quicksort [m | m &lt;- xs, m &lt;= x]
        bigsort = quicksort [m | m &lt;- xs, m &gt; x]
    in smallsort ++ [x] ++ bigsort
</code></pre>
<h2 id="modules-import"><a href="#modules-import" class="headerlink" title="modules import"></a>modules import</h2><p>syntax for importing modules</p>
<pre><code class="haskell">-- in haskell file
-- in this way, we can call the module&#39;s function name directly
import module_name

-- in ghci
:m + module_name

-- import some of function in module
import module_name (func1,func2)

-- import all function in module expect someone
import module_name hiding (func)

-- in some case, two or more modules contains the function with the same name
-- in order to distinguish the function, we can use qualified keyword
-- if the module imported with qualified, the way to call function need to 
-- be prefixed with module name
import qualified module_name
-- call function
module_name.func

-- in order to simplify above calling style, we can use alias to instead the 
-- long syntax of calling function
import qualified module_name as alias_name
-- call function
alias_name.func
-- eg:
import qualified Data.Map as M
M.filter
</code></pre>
<h2 id="higher-order-function"><a href="#higher-order-function" class="headerlink" title="higher order function"></a>higher order function</h2><p><strong>curried function</strong></p>
<p>another part that function program is different with other language is <code>curried function</code> (one function takes more than one parameters). it is a <code>concept </code> which helps us to think functions in another way. in order to understand the concept, we need to know the following point:</p>
<ol>
<li>putting a space between two things is simply <code>function application</code></li>
<li>every function in haskell officially only takes one parameter</li>
<li>if a function need more than one parameters, the one we write that function with too few parameters is called <code>function on the fly (or called partial application)</code> . we can pass it to another function as parameter</li>
</ol>
<p>so, we may though, okay, i know that’s it, and what does it helpful for my coding? let’s see this function and you will understand how powerful this concept</p>
<pre><code class="haskell">-- * is also a function which need two parameters
-- (*2) is a function on the fly
plus2 xs = map (*2) xs

-- / is a function which need two parameters
-- (/10) is a function on the fly
divideByTen x = (/10) x
</code></pre>
<p>if without curried function, above may need to be write as this</p>
<pre><code class="haskell">sum&#39; (x:xs) = x + sum&#39; xs
plus2 xs = map (\x -&gt; x*2) xs
</code></pre>
<p>with this concept we can though a function with many parameters is a function take one parameter then return a new function, the new function takes another parameter and then return a new function and so on…</p>
<pre><code class="haskell">multithree :: Num a =&gt; a -&gt; a -&gt; a -&gt; a
multithree x y z = x * y * z

-- with curried function concept, we can write type as this
multithree :: Num a =&gt; a -&gt; (a -&gt; (a -&gt; a))
multithree x y z = x * y * z
</code></pre>
<blockquote>
<p>Note:</p>
<p>function on the fly don’t means a function only takes one parameter,  it can take more than one parameter. both of them can be called function on the fly.</p>
<p>eg: <code>multithree x</code> is a function on the fly, <code>multithree x y</code> is also a function on the fly</p>
</blockquote>
<p><em>variable name of function on the fly</em></p>
<p>have we notice that a function takes one (or more) parameter <strong>returns a new function</strong>, how great this means? now we can write above function like this:</p>
<pre><code class="haskell">plus2 = map (*2)
divideByTen = (/10)
</code></pre>
<blockquote>
<p>Note:</p>
<p><strong>it is not means we ignore function parameters, left side is just a new function name (yeah a variable)</strong></p>
<p>in this way, function can be greatly simplified.</p>
</blockquote>
<p><strong>function as a parameter</strong></p>
<p>we know that function can take function as parameter and also return functions</p>
<pre><code class="haskell">applyTwice :: (a -&gt; a) -&gt; a -&gt; a  
applyTwice f x = f (f x)  

-- then we can pass function to it
applyTwice (3:) 1
</code></pre>
<p>notice that the function we pass to it is a function on the fly. in this way we abstract function as a variable or called parameter, so we can pass different function to it.</p>
<pre><code class="haskell">zipWith&#39; :: (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
zipWith&#39; _ [] _ = []
zipWith&#39; _ _ [] = []
zipWith&#39; f (x:xs) (y:ys) = f x y : zipWith&#39; f xs ys
</code></pre>
<p><strong>higher order function</strong></p>
<pre><code class="haskell">-- combine two list into one list with specified function
zipWith f x y

zipWith&#39; :: (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
zipWith&#39; _ [] _ = []
zipWith&#39; _ _ [] = []
zipWith&#39; f (x:xs) (y:ys) = f x y : zipWith&#39; f xs ys

-- apply specified function to all elements of list
map f x

map&#39; :: (a -&gt; b) -&gt; [a] -&gt; [b]
map&#39; _ [] = []
map&#39; f (x:xs) = f x : map&#39; f xs

-- filter all list elements to specified function
filter f x

filter&#39; :: (a -&gt; Bool) -&gt; [a] -&gt; [a]
filter&#39; _ [] = []
filter&#39; f (x:xs)
    | f x = x : filter&#39; f xs
    | otherwise = filter&#39; f xs
</code></pre>
<p><strong>lambda</strong></p>
<p>we know higher order function need a parameter of function, normally, we pass a lambda to it.</p>
<pre><code class="haskell">-- syntax
(\parameter1 parameter2 -&gt; function body)
</code></pre>
<blockquote>
<p>Note</p>
<p>partial application can do the same thing as lambda when the function is simple. so consider use partial application first if it can</p>
</blockquote>
<pre><code class="haskell">-- we can do simple pattern match in lambda
map (\(a,b) -&gt; a + b) [(1,2),(3,4),(4,5),(5,6)]
</code></pre>
<p><strong>fold</strong></p>
<p>some functions encapsulate common pattern <code>(x:xs)</code> with edge condition (such as map) and return one value are called fold.</p>
<pre><code class="haskell">-- fold function need a start value and a accumulator
-- eg : start value &quot;False&quot; accumulator &quot;acc&quot;
elem&#39; :: (Eq a) =&gt; a -&gt; [a] -&gt; Bool 
elem&#39; m xs = foldl (\acc x -&gt; if m == x then True else acc) False xs

-- this function can be simplified to 
elem&#39; :: (Eq a) =&gt; a -&gt; [a] -&gt; Bool 
elem&#39; m = foldl (\acc x -&gt;  m == x || acc) False
</code></pre>
<p><code>foldl</code> work though list from left, <code>foldr</code> work though list from right. </p>
<pre><code class="haskell">sum&#39; xs = foldl (\acc x -&gt; acc + x) 0 xs

sum&#39; xs = foldr (\x acc -&gt; x + acc) 0 xs
</code></pre>
<p><code>acc</code>‘s position is very important.</p>
<pre><code class="haskell">-- foldr will take start value as the second parameter
map&#39; f xs = foldr (\x acc -&gt; f x : acc) [] xs
-- foldl will take start value as the first parameter
map&#39; f xs = foldl (\acc x -&gt; acc ++ [f x]) [] xs
</code></pre>
<p><code>foldl1</code> <code>foldr1</code> almost the same as <code>foldl</code> <code>foldr</code>. only <code>foldl1</code> and <code>foldr1</code> take list’s first/last value as the starting value, so we don’t need to write. with this, we need to confirm the list is not empty, or it may crash</p>
<pre><code class="haskell">sum&#39; xs = foldl1 (\acc x -&gt; acc + x) xs
sum&#39; xs = foldr1 (\x acc -&gt; x + acc) xs
</code></pre>
<p><strong>function application with $</strong></p>
<p>function application with <code>$</code> is right-associative, which act as <code>()</code></p>
<pre><code class="haskell">sum ([1..10] ++ [2..20])
-- with $
sum $ [1..10] ++ [2..20]
</code></pre>
<p><strong>function composition with .</strong></p>
<p>function composition with <code>.</code> compose two functions into one, and it is also right-associative</p>
<pre><code class="haskell">f . g = \x f (g x)
</code></pre>
<pre><code class="haskell">map (\x -&gt; (+1) (x/10)) [1..10]
map ((+1) . (/10)) [1..10]
</code></pre>
<blockquote>
<p>Note:</p>
<ol>
<li><p>the principle that we can write compose function is the right function return value’s type is the same as left function parameter</p>
</li>
<li><p>if the right function takes more than one value, we need pass other parameters to the function</p>
</li>
</ol>
</blockquote>
<pre><code class="haskell">show . replicate 3 . max 6 $ 8
</code></pre>
<h2 id="type-and-typeclass-1"><a href="#type-and-typeclass-1" class="headerlink" title="type and typeclass"></a>type and typeclass</h2><p>so, what the data type can help me?</p>
<ol>
<li>with value constructor, help me to store data with associate relationship and with default method to get them out</li>
<li>without value constructor, help me to store data with the value name</li>
</ol>
<h3 id="data-type"><a href="#data-type" class="headerlink" title="data type"></a>data type</h3><p>haskell has already provided us basic data type like <code>Int, Float, Bool, String</code>. we can also define ourself data type</p>
<pre><code class="haskell">-- syntax: 
-- type_name should be capital case
data type_name = value_constructor
</code></pre>
<h3 id="value-parameter"><a href="#value-parameter" class="headerlink" title="value parameter"></a>value parameter</h3><p>after value constructor, we can add some data types define the value it will contain</p>
<pre><code class="haskell">-- Circle , Rectangle are value constructor
data Shape = Circle Float Float Float | Rectangle Float Float Float Float 
</code></pre>
<blockquote>
<p>Note:</p>
<ol>
<li><p>we can thought value constructor as function, it returns a data type</p>
</li>
<li><p>however we can not directly call value constructor, because it has no method to display our data.</p>
</li>
<li><p>we can apply <em><strong><code>deriving (basic typeclass)</code></strong></em> to data type, then the data type will has the properity of basic typeclass</p>
</li>
<li><p>we can use pattern match with value constructor</p>
</li>
</ol>
</blockquote>
<pre><code class="haskell">data Shape = Circle Float Float Float | Rectangle Float Float Float Float deriving (Show)

surface :: Shape -&gt; Float
surface (Circle _ _ r) = pi * r ^ 2
surface (Rectangle x1 y1 x2 y2) = (abs $ x1 -x2) * (abs $ y1 -y2)
</code></pre>
<pre><code class="haskell">*Main&gt; surface $ Circle 3 4 5
78.53982
*Main&gt; Circle 3 4 5
Circle 3.0 4.0 5.0
</code></pre>
<p>for value constructor can act as function, we can use partial application with it</p>
<pre><code class="haskell">*Main&gt; map (Circle 3 4) [1..5]
[Circle 3.0 4.0 1.0,Circle 3.0 4.0 2.0,Circle 3.0 4.0 3.0,Circle 3.0 4.0 4.0,Circle 3.0 4.0 5.0]
</code></pre>
<blockquote>
<p>Note:</p>
<p>often we write data type name  the same as value constructor name if there is only one value constructor</p>
</blockquote>
<pre><code class="haskell">data Point = Point Float Float deriving (Show)
</code></pre>
<p>we can use the data type in other data type define</p>
<pre><code class="haskell">data Shape = Circle Point Float | Rectangle Point Point deriving (Show)
</code></pre>
<p>in this way, we can make Shape data type more readable</p>
<pre><code class="haskell">surface :: Shape -&gt; Float
surface (Circle _ r) = pi * r ^ 2
surface (Rectangle (Point x1 y1) (Point x2 y2)) = (abs $ x1 -x2) * (abs $ y1 -y2)
</code></pre>
<h3 id="record-syntax"><a href="#record-syntax" class="headerlink" title="record syntax"></a>record syntax</h3><p>the way above data type define is not bad, but there are some inconvenient : </p>
<p>such as :</p>
<ol>
<li><p>how to get the value of a data type?  </p>
</li>
<li><p>how to easily distinguish each value?</p>
</li>
</ol>
<pre><code class="haskell">-- sign each type a variable name, seperate with comma
data Person = Person &#123; age :: Int  
                     , height :: Float  
                     , phoneNumber :: String  
                     &#125; deriving (Show)   
</code></pre>
<p>By using record syntax to create this data type, Haskell <em><strong>automatically make these functions with the name of type name:</strong></em> age height phoneNumber</p>
<blockquote>
<p>Note:</p>
<p><strong>with the default method, we can get specified value we need out of the data type</strong></p>
</blockquote>
<pre><code class="haskell">john = Person &#123;age=20, height=170, phoneNumber=&quot;2837109292&quot;&#125;

*Main&gt; age john
20
*Main&gt; phoneNumber john
&quot;2837109292&quot;

class = map (Person 20 170) [&quot;4532232&quot;, &quot;9023482&quot;, &quot;0923842&quot;]
*Main&gt; map phoneNumber classes
[&quot;4532232&quot;,&quot;9023482&quot;,&quot;0923842&quot;]
*Main&gt; phoneNumber $ classes !! 0
&quot;4532232&quot;
</code></pre>
<h3 id="type-parameter"><a href="#type-parameter" class="headerlink" title="type parameter"></a>type parameter</h3><p>the same as value parameter,  <em><strong>type constructors</strong></em> can take types as parameters to produce new types</p>
<pre><code class="haskell">-- eg: a after Maybe is a type parameter
data Maybe a = Nothing | Just a  
</code></pre>
<p>with a parameter, we call data type as <strong>data constructor</strong></p>
<p>the benefit of type parameter is that the data type depends on what we pass to it.</p>
<pre><code class="haskell">data Person a b c = Person &#123; age :: a  
                             , height :: b  
                             , phoneNumber :: c  
                             &#125; deriving (Show) 
</code></pre>
<p>without value constructor store data with value name</p>
<pre><code class="haskell">data Day = Monday | Tuesday | Wednesday | Thursday | Friday | Saturday | Sunday   
    deriving (Eq, Ord, Show, Read, Bounded, Enum)  
</code></pre>
<pre><code class="haskell">Monday --with Show, call directly
Monday == Monday --with Eq, compare directly
read &quot;Monday&quot; :: Day --with Read, convert value from String
MinBound --with Bounded, get min/max value
[Monday..Sunday] --with Enum, list range with value
</code></pre>
<h3 id="type-synonyms"><a href="#type-synonyms" class="headerlink" title="type synonyms"></a>type synonyms</h3><p>data type’s alias, with it we can make our type declaration more clearly</p>
<pre><code class="haskell">-- String is alias of [Char]
type String = [Char]
</code></pre>
<pre><code class="haskell">-- can have parameters
type AssocList k v = [(k,v)]  
-- can partically apply type parameters
type IntMap v = Map Int v  
-- or ignore
type IntMap = Map Int  
</code></pre>
<h2 id="third-module"><a href="#third-module" class="headerlink" title="third module"></a>third module</h2><p><a target="_blank" rel="noopener" href="https://hackage.haskell.org/packages/">haskell官方</a>提供了丰富的模块，可以根据需要选择对应的模块进行下载。</p>
<h3 id="Shell-Script"><a href="#Shell-Script" class="headerlink" title="Shell Script"></a>Shell Script</h3><p>haskell的<code>turtle</code>模块嵌入了shell脚本，实现了很多的unix命令，方便我们使用haskell写shell脚本。同时还支持直接调用系统的命令</p>
<pre><code class="shell"># install turtle in archlinux
pacman -S haskell-turtle
</code></pre>
<p><strong>print text to screen</strong></p>
<pre><code class="haskell">-- 不使用turtle模块,使用内置的System.IO
main = do
    putStrLn &quot;hello world!&quot;
    print &quot;hello world!&quot;
    
-- 使用turtle模块的echo命令
import Turtule
import qualified Data.Text as T
import Data.Maybe

main = do
    -- echo 需要Line数据类型,使用repr可获得Line
    echo $ repr &quot;hello world!&quot;
    -- 或者使用Data.Text来获取Text，使用textToLine获取Maybe Line,使用fromJust 获取Line
    -- 需要导入Data.Maybe Data.Text
    echo $ fromJust $ textToLine $ T.pack &quot;hello world!&quot;
</code></pre>
<p>上面这种方式太麻烦，实际上是在文件开头添加<code>&#123;-# LANGUAGE OverloadedStrings #-&#125;</code>，这样String会成为Text类型</p>
<pre><code class="shell">&#123;-# LANGUAGE OverloadedStrings #-&#125;

import Turtle

main = do
    shell &quot;ls -alh /home&quot; empty
</code></pre>
<p><strong>get command output</strong></p>
<pre><code class="haskell">import Turtle

main = do
    dir &lt;- pwd 
    echo $ repr dir

    time &lt;- date 
    echo $ repr time
</code></pre>
<p><strong>execute system command</strong></p>
<pre><code class="haskell">import Turtle
import qualified Data.Text as T

main = do
    -- 打开浏览器
    -- shell需要接受一个Text数据类型
    let cmd = T.pack &quot;firefox&quot;
    shell cmd empty
    
    -- ps查看进程
    shell (T.pack &quot;ps -ef |grep firefox&quot;)  empty
    
    -- 调用ls命令，内置的ls命令无法添加参数，使用这种方式可以加参数
    shell (T.pack &quot;ls -alh $HOME&quot; |grep rc)  empty
</code></pre>
<h2 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h2><h4 id="problem-of-dynamic-link"><a href="#problem-of-dynamic-link" class="headerlink" title="problem of dynamic link"></a>problem of dynamic link</h4><p><strong>Err：</strong>vscode中运行正常，但是编译报错无法找到Prelude</p>
<p><img src=".images/image-20210527200039979.png" alt="image-20210527200039979"></p>
<p><strong>Cause:</strong> <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Haskell#Configuration">ghc 8.0.2-1</a>版本只支持动态链接库，而编译默认使用的是静态链接。</p>
<p><strong>Fix:</strong></p>
<ol>
<li><p>编译的时候添加动态链接参数</p>
<pre><code class="shell">ghc --dynamic file_name.hs
</code></pre>
<p>为了方便，可以用alias重写ghc</p>
<pre><code class="shell"># add to ~/.zshrc
alias ghc=&quot;ghc -dynamic&quot;
</code></pre>
<ol start="2">
<li>配置cabal/stack使用动态库，配置方法参考<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Haskell#Configuration">arch wiki</a></li>
</ol>
</li>
</ol>
<h4 id="cannot-find-module-which-has-been-installed"><a href="#cannot-find-module-which-has-been-installed" class="headerlink" title="cannot find module which has been installed"></a>cannot find module which has been installed</h4><p><strong>Err:</strong> 使用cabal安装模块后，依然无法导入，报错无法找到模块</p>
<p><strong>Cause:</strong> 在安装cabal之前系统已经存在ghc，导致安装cabal时编译的是系统的ghc</p>
<p><strong>Fix：</strong>解决方法很简单，使用系统的ghc就可以了（注释掉安装时配置的环境变量）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://raw.githubusercontent.com/ssfwshutterbug/ssfwshutterbug.github.io/main/2022/04/23/haskell/" data-id="cl9ktb7v0000ydta8a9l2chc3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/haskell/" rel="tag">haskell</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/04/23/ip-route/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          ip_route
        
      </div>
    </a>
  
  
    <a href="/2022/04/23/go/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">go</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/learn/">learn</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/think/">think</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/thinking/">thinking</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%BB%E5%8E%86%E5%8F%B2/">读历史</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/anaconda/" rel="tag">anaconda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/anbox/" rel="tag">anbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ansible/" rel="tag">ansible</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/archlinux/" rel="tag">archlinux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/boring/" rel="tag">boring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/container/" rel="tag">container</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cursor-theme/" rel="tag">cursor theme</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ed/" rel="tag">ed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/" rel="tag">go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grub/" rel="tag">grub</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/haskell/" rel="tag">haskell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inject-js-css/" rel="tag">inject js/css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iptables/" rel="tag">iptables</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/" rel="tag">life</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mind/" rel="tag">mind</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/optimized/" rel="tag">optimized</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pentablet/" rel="tag">pentablet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/positive/" rel="tag">positive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reality-is-aweful/" rel="tag">reality is aweful</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/route/" rel="tag">route</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rust/" rel="tag">rust</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/" rel="tag">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shield/" rel="tag">shield</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/" rel="tag">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tcp/" rel="tag">tcp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vbox/" rel="tag">vbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xmonad/" rel="tag">xmonad</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zabbix/" rel="tag">zabbix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zk/" rel="tag">zk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/" rel="tag">zsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%9D%E7%BB%AA/" rel="tag">思绪</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A5%9E%E8%AF%9D/" rel="tag">神话</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%89%AF%E7%9F%A5/" rel="tag">良知</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/anaconda/" style="font-size: 10px;">anaconda</a> <a href="/tags/anbox/" style="font-size: 10px;">anbox</a> <a href="/tags/ansible/" style="font-size: 10px;">ansible</a> <a href="/tags/archlinux/" style="font-size: 10px;">archlinux</a> <a href="/tags/boring/" style="font-size: 10px;">boring</a> <a href="/tags/container/" style="font-size: 10px;">container</a> <a href="/tags/cursor-theme/" style="font-size: 10px;">cursor theme</a> <a href="/tags/ed/" style="font-size: 10px;">ed</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/go/" style="font-size: 10px;">go</a> <a href="/tags/grub/" style="font-size: 10px;">grub</a> <a href="/tags/haskell/" style="font-size: 10px;">haskell</a> <a href="/tags/inject-js-css/" style="font-size: 10px;">inject js/css</a> <a href="/tags/iptables/" style="font-size: 10px;">iptables</a> <a href="/tags/k8s/" style="font-size: 20px;">k8s</a> <a href="/tags/life/" style="font-size: 10px;">life</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/mind/" style="font-size: 10px;">mind</a> <a href="/tags/optimized/" style="font-size: 10px;">optimized</a> <a href="/tags/pentablet/" style="font-size: 10px;">pentablet</a> <a href="/tags/positive/" style="font-size: 10px;">positive</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/reality-is-aweful/" style="font-size: 10px;">reality is aweful</a> <a href="/tags/route/" style="font-size: 10px;">route</a> <a href="/tags/rust/" style="font-size: 10px;">rust</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/shield/" style="font-size: 10px;">shield</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/tcp/" style="font-size: 10px;">tcp</a> <a href="/tags/vbox/" style="font-size: 10px;">vbox</a> <a href="/tags/vscode/" style="font-size: 10px;">vscode</a> <a href="/tags/xmonad/" style="font-size: 20px;">xmonad</a> <a href="/tags/zabbix/" style="font-size: 10px;">zabbix</a> <a href="/tags/zk/" style="font-size: 10px;">zk</a> <a href="/tags/zsh/" style="font-size: 10px;">zsh</a> <a href="/tags/%E6%80%9D%E7%BB%AA/" style="font-size: 15px;">思绪</a> <a href="/tags/%E7%A5%9E%E8%AF%9D/" style="font-size: 10px;">神话</a> <a href="/tags/%E8%89%AF%E7%9F%A5/" style="font-size: 10px;">良知</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/10/23/our-body-may-cheat-ourselves-md/">our-body-may-cheat-ourselves.md</a>
          </li>
        
          <li>
            <a href="/2022/07/04/the-reality/">the-reality</a>
          </li>
        
          <li>
            <a href="/2022/06/25/%E4%BB%8E%E5%AE%B9/">从容</a>
          </li>
        
          <li>
            <a href="/2022/06/25/magic-of-xmonad/">magic-of-xmonad</a>
          </li>
        
          <li>
            <a href="/2022/06/24/xp-pentablet/">xp-pentablet</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 shutterbug<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>