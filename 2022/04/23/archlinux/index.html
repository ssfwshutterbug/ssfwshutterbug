<!DOCTYPE html>
<html>
	<head>
		
<title>archlinux-Quiet</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/image/favicon.ico">

<link rel="stylesheet" href="/css/index.css">



<meta name="keywords" content="archlinux,">
<meta name="description" content="">


<script src="/js/jquery.min.js"></script>


<script src="/js/index.js"></script>


<script src="/js/fancybox.umd.js"></script>


<script src="/js/fancybox-images.js"></script>


<script src="/js/gitalk.min.js"></script>


<script src="/js/hljs.min.js"></script>
 
<script>hljs.highlightAll();</script>

	<meta name="generator" content="Hexo 5.4.2"></head>

	<body>
		
	<div class="header">
		<div class="header-top" id="header-top">
			<div class="h-left">
				<a href="/">
					<img src="/image/logo.png" alt="Quiet">
				</a>
			</div>
			<div class="h-right">
				<ul>
					
						
								<li>
									<a href="/">
										HOME
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/archives">
										ARCHIVE
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/categories">
										CATEGORIES
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/tags">
										TAGS
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/links">
										LINKS
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/about">
										ABOUT
									</a>
									<span class="dot"></span>
								</li>
								
									
				</ul>
			</div>
			<div class="h-right-close">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
					<path fill="none" d="M0 0h24v24H0z" />
					<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
				</svg>
			</div>
		</div>
	</div>
	<div class="sidebar">
    <div class="topo">
        <h2>Joey</h2>
    </div>
    <ul>
        
        <li>
            <a href="/">HOME</a>
        </li>
        
        <li>
            <a href="/archives">ARCHIVE</a>
        </li>
        
        <li>
            <a href="/categories">CATEGORIES</a>
        </li>
        
        <li>
            <a href="/tags">TAGS</a>
        </li>
        
        <li>
            <a href="/links">LINKS</a>
        </li>
        
        <li>
            <a href="/about">ABOUT</a>
        </li>
        
    </ul>
    <div class="my_foot">
        
        <a target="_blank" rel="noopener" href="https://github.com/79E/hexo-theme-quiet">
            <img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
        </a>
        
    </div>
</div>
<div class='shelter'>
</div>
<style>
    .shelter{
        background-color: #333;
        opacity:0.5;
        cursor: pointer;
        display: none; 
        position: fixed;
        left: 0;
        top: 0; 
        right: 0;
        bottom: 0;
        z-index: 1998;
    }
    .sidebar {
        width: 66%;
        height: 100%;
        position: fixed;
        top: 0;
        right: -100%;
        bottom: 0;
        background: #fff;
        z-index: 1999;
        text-align: center;
        box-shadow: -6px 0 20px rgba(98, 94, 94, .815);
    }

    .topo {
        width: 100%;
        height: 200px;
        background: url(https://api.ixiaowai.cn/gqapi/gqapi.php) no-repeat;
        background-size: 100% 100%;
        position: relative;
        display: flex;
        align-items: flex-end
    }

    .topo h2 {
        color: #fff;
        z-index: 1;
        position: relative;
        margin: 0 0 10px 10px;
        font-size: 1.2em;
        box-sizing: border-box
    }

    .topo:before {
        content: '';
        background-image: url(/image/pattern.png);
        background-repeat: repeat;
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
        z-index: 1
    }

    .sidebar ul {
        width: 100%;
        margin-top: 50px
    }

    .sidebar ul li {
        height: 50px;
        list-style: none;
        font-size: 1.2em;
        text-align: right;
        margin-right: 10px
    }

    .sidebar ul li a {
        display: grid;
        color: #5d606a;
        text-overflow: ellipsis;
        width: 100%;
        text-decoration: none
    }

    .my_foot {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        position: absolute;
        bottom: 0
    }

    .my_foot a {
        text-decoration: none;
        margin-right: 10px;
        display: inline-block
    }

    .my_foot a img {
        width: 30px;
        height: 30px
    }
</style>

<script>
    $( function () {
	$( '.h-right-close>svg' )
		.click( function () {
			$( '.sidebar' )
				.animate( {
					right: "0"
				}, 500 );
			$( '.shelter' )
				.fadeIn( "slow" )
		} );
	$( '.shelter' )
		.click( function ( e ) {
			$( '.sidebar' )
				.animate( {
					right: "-100%"
				}, 500 );
			$( '.shelter' )
				.fadeOut( "slow" )
		} )
} )

</script>

<div class="post">
    <div class="post-header-background post-header-img"
    style="background: url('https://api.ixiaowai.cn/gqapi/gqapi.php')" 
>
    <div class="post-header-background-content">
        <ul class="post-header-tag">
            
            
            <li><a href="/tags/archlinux">archlinux</a></li>
            
            
        </ul>
        
        <h1>archlinux</h1>
        <div class="post-header-info">
            <div class="post-header-info-author">
                
                    <svg t="1604839279282" class="icon" viewBox="0 0 1024 1024" version="1.1"
                        xmlns="http://www.w3.org/2000/svg" p-id="2901" width="20" height="20">
                        <path
                            d="M513 956.3c-247.7 0-448-200.3-448-448S265.3 66.2 513 66.2s448 200.3 448 448-200.3 442.1-448 442.1z m0-830.9c-212.2 0-388.8 170.7-388.8 388.8C124.2 726.3 294.9 903 513 903c212.2 0 388.8-170.7 388.8-388.8S725.2 125.4 513 125.4z m0 430.2c-94.2 0-170.7-76.5-170.7-170.7S418.8 207.8 513 207.8s170.7 76.5 170.7 170.7S607.2 555.6 513 555.6z m0-289.1c-64.6 0-112 52.8-112 112s47.4 117.9 112 117.9 112-52.8 112-112-47.4-117.9-112-117.9z m0 689.8c-135.7 0-259-58.7-341.9-158.9l-11.8-17.8 11.8-17.8c76.5-117.9 206.2-188.5 347.8-188.5 135.7 0 265 64.6 341.9 182.6l11.8 17.8-11.8 17.8C778 897.1 648.7 956.3 513 956.3zM230.3 773.2C300.9 849.7 406.9 897 513 897c112 0 218.1-47.4 288.6-129.8-70.5-88.2-170.7-135.6-282.7-135.6s-218.1 53.3-288.6 141.6z"
                            p-id="2902" fill="#ffffff"></path>
                    </svg>
                    
                <span class="post-header-info-author-text"> <a href="../../about">Joey</a></span>
                <div class="post-header-info-author-categories">
                    
                         <a href="../../categories/learn/" target="_blank" >learn</a>
                    
                </div>
                <p>2022-04-23 15:10:56</p>
            </div>
        </div>
    </div>
</div>
    <div class="post-content" id="content">
  
  <div id="article" class="post-content-info">
    

    <h1 id="archlinux"><a href="#archlinux" class="headerlink" title="archlinux"></a>archlinux</h1><p>This document includes all the knowledges of using archlinux, from basic installing to daily using, all in one.</p>
<p>[TOC]</p>
<h2 id="base-system-install"><a href="#base-system-install" class="headerlink" title="base system install"></a>base system install</h2><p>first of all, we need to install the system. take it ease, step by  step, and you can own it.</p>
<h3 id="adjust-console-font"><a href="#adjust-console-font" class="headerlink" title="adjust console font"></a>adjust console font</h3><p>may be the default console font is too small, we can change it temporarily and make it much bigger.</p>
<pre><code class="shell">cd /usr/share/kbd/consolefonts
setfont iso01-12x22.psfu.gz
</code></pre>
<h3 id="connect-network"><a href="#connect-network" class="headerlink" title="connect network"></a>connect network</h3><ul>
<li><p>if plug in the cabel, use <code>dhcpcd</code> to get a ip address.</p>
</li>
<li><p>if use wireless, use <code>iwctl</code> to config the netwrok</p>
<pre><code class="shell"># the iwd.server is running by default
iwctl
# list network interface
device list
# start scaning network
station device scan
# show scan result
station device get-networks
# connect to one wifi
station device connect ssid
# get dynamic ip address
dhcpcd
</code></pre>
</li>
</ul>
<h3 id="change-mirror-list"><a href="#change-mirror-list" class="headerlink" title="change mirror list"></a>change mirror list</h3><p>modify <code>/etc/pacman.d/mirrorlist</code> file, move China mirror list to the head.</p>
<blockquote>
<p>note: this configure will sync to new installed system.</p>
</blockquote>
<pre><code class="shell">head /etc/pacman.d/mirrorlist

## China
Server = http://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
Server = http://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch
Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch
Server = http://mirrors.163.com/archlinux/$repo/os/$arch
Server = http://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch
Server = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch
</code></pre>
<h3 id="update-system-clock"><a href="#update-system-clock" class="headerlink" title="update system clock"></a>update system clock</h3><p>enable ntp to ensure the system clock is accurate.</p>
<pre><code class="shell">timedatectl set-ntp true
</code></pre>
<h3 id="partition-disk"><a href="#partition-disk" class="headerlink" title="partition disk"></a>partition disk</h3><p>we can use tools like <code>cfdisk</code> ,<code>parted</code> to parted disk. whatever tool we choose, there are some things need to be done the same.</p>
<ol>
<li>format entire disk with gpt table</li>
<li>one efi partition to install grub</li>
</ol>
<blockquote>
<p>note: efi partition cannot used as lvm part, lvm can only be recognized after grub loading.</p>
</blockquote>
<p>lvm example: </p>
<ul>
<li>esp: 100M</li>
<li>root(lvm): 30G</li>
<li>home(lvm):  last space</li>
</ul>
<pre><code class="shell">parted /dev/nvme0n1 mktable gpt
parted /dev/nvme0n1 mkpart fat 0% 100Mib
parted /dev/nvme0n1 mkpart ext4 100Mib 100%

pvcreate /dev/nvme0n1p2
vgcreate linux /dev/nvme0n1p2
lvcreate -L 30G linux -n root 
lvcreate -l +100%FREE linux -n home

mkfs.fat -F 32 /dev/nvme0n1p1
mkfs.ext4 /dev/linux/root
mkfs.ext4 /dev/linux/home
</code></pre>
<h3 id="mount-partition-and-install-system"><a href="#mount-partition-and-install-system" class="headerlink" title="mount partition and install system"></a>mount partition and install system</h3><pre><code class="shell"># mount root and home partition
mount /dev/linux/root /mnt
mkdir /mnt/home &amp;&amp; mount /dev/linux/home /mnt/home

# chroot mnt and install base system
pacstrap /mnt base linux linux-firmware lvm2 vim
</code></pre>
<h3 id="generate-mount-configure"><a href="#generate-mount-configure" class="headerlink" title="generate mount configure"></a>generate mount configure</h3><blockquote>
<p>note: efi partition not need to be mount.</p>
</blockquote>
<pre><code class="shell">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
</code></pre>
<h3 id="chroot-new-system"><a href="#chroot-new-system" class="headerlink" title="chroot new system"></a>chroot new system</h3><pre><code class="shell">arch-chroot /mnt
</code></pre>
<h3 id="timezone"><a href="#timezone" class="headerlink" title="timezone"></a>timezone</h3><pre><code class="shell">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
hwclock --systohc
</code></pre>
<h3 id="system-language"><a href="#system-language" class="headerlink" title="system language"></a>system language</h3><p>uncomment <code>/etc/locale.gen</code>  with <code>en_us.UTF-8</code> and <code>zh_CN.UTF-8</code> then run</p>
<pre><code class="shell">locale-gen

# set default system language
echo &quot;LANG=en_US.UTF-8&quot; &gt; /etc/locale.conf
</code></pre>
<h3 id="network"><a href="#network" class="headerlink" title="network"></a>network</h3><pre><code class="shell"># add hostname
echo &quot;notebook&quot; &gt; /etc/hostname

# add hosts
echo &quot;
127.0.0.1    localhost
::1        localhost
127.0.1.1    hostname.localdomain    hostname
&quot; &gt;&gt; /etc/hosts
</code></pre>
<h3 id="initramfs"><a href="#initramfs" class="headerlink" title="initramfs"></a>initramfs</h3><blockquote>
<p>note: if we don’t use lvm, this step can be ignored.</p>
</blockquote>
<p>edit /etc/mkinitcpio.conf, add <code>lvm2</code> between <code>block</code> and <code>filesystems</code></p>
<pre><code class="shell">mkinitcpio -P
</code></pre>
<h3 id="install-netwrok-tool"><a href="#install-netwrok-tool" class="headerlink" title="install netwrok tool"></a>install netwrok tool</h3><p>we can choose iwd or netctl to configure network</p>
<ul>
<li>iwd</li>
</ul>
<pre><code class="shell">pacman -S iwd dhcpcd
systemctl enable iwd
</code></pre>
<ul>
<li>netctl</li>
</ul>
<pre><code class="shell">pacman -S netctl wpa_supplicant dialog  dhcpcd
</code></pre>
<h3 id="install-grub"><a href="#install-grub" class="headerlink" title="install grub"></a>install grub</h3><p>first mount efi partition to <code>/boot/efi</code></p>
<pre><code class="shell">mkdir /boot/efi
mount /dev/nvme0n1p1 /boot/efi

pacman -S grub efibootmgr
grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=GRUB --removable
grub-mkconfig -o /boot/grub/grub.cfg
</code></pre>
<h3 id="set-root-passwd"><a href="#set-root-passwd" class="headerlink" title="set root passwd"></a>set root passwd</h3><pre><code class="shell">passwd root
</code></pre>
<h3 id="umount-and-reboot"><a href="#umount-and-reboot" class="headerlink" title="umount and reboot"></a>umount and reboot</h3><pre><code class="shell">exit and umount -R /mnt
reboot
</code></pre>
<h2 id="general-configure"><a href="#general-configure" class="headerlink" title="general configure"></a>general configure</h2><p>the step below is general configure, that is to say it’s basic and cannot be ignored.</p>
<h3 id="connect-network-1"><a href="#connect-network-1" class="headerlink" title="connect network"></a>connect network</h3><ul>
<li><p>we can use <code>iwd</code> to set wifi connection, only need using <code>dhcpcd</code> to get a dynamic ip address</p>
<p><strong>static ip</strong></p>
<p>create a config file  <code>/etc/iwd/main.conf</code> to enable static network config by adding</p>
<pre><code class="shell">cat /etc/iwd/main.conf

[General]
EnableNetworkConfiguration=true
</code></pre>
<p>add static ip address config to <code>wifi_name.psk file</code> under <code>/var/lib/iwd</code></p>
<pre><code class="shell">cat &gt;&gt; /var/lib/iwd/qiyue.psk

[IPv4]
Address=192.168.31.31
Netmask=255.255.255.0
Gateway=192.168.31.1
</code></pre>
</li>
<li><p>if we use <code>netctl</code>(wifi/ethernet), we can use a gui tool named wifi-menu to connect network</p>
<pre><code class="shell">sudo wifi-menu
</code></pre>
<p>when we connect correct there will be a configure file in /etc/netctl, in order to auto connect network, we need enable it.</p>
<pre><code class="shell">cd /etc/netctl
# it must be file name not localtion path and without super priviledge
netctl enable confirure_file_name
</code></pre>
<p><strong>static ip</strong></p>
<pre><code class="shell">sudo cp /etc/netctl/examples/wireless-wpa-static /etc/netctl

Description=&#39;A simple WPA encrypted wireless connection using a static IP&#39;
Interface=wlo1
Connection=wireless
Security=wpa
ESSID=&#39;wifi-essid&#39; # modify
Key=&#39;password&#39; # modify
IP=static
Address=&#39;192.168.0.104/24&#39; # modify
Gateway=&#39;192.168.0.1&#39;    # modify
DNS=(&#39;114.114.114.114&#39;) # modify
</code></pre>
<p>some command of netctl</p>
<pre><code class="shell">netctl disable wireless-wpa-static-old
netctl enable wireless-wpa-static
netctl restart wireless-wpa-static
</code></pre>
</li>
</ul>
<h3 id="install-some-software"><a href="#install-some-software" class="headerlink" title="install some software"></a>install some software</h3><p>if there comes some error message shows cannot find package, we need to config China repository first.</p>
<ul>
<li><p>man page</p>
<pre><code class="shell">pacman -S man-db man-pages texinfo
</code></pre>
</li>
<li><p>base-devel</p>
<p>it includes <code>sudo, gcc, make, sed, grep, which</code> and etc usual command</p>
<pre><code class="shell">pacman -S base-devel
</code></pre>
</li>
<li><p>install doas or sudo</p>
<pre><code class="shell">pacman -S sudo
pacman -S doas
</code></pre>
<p>then create a file <code>/etc/doas.conf</code> and write something to it</p>
<pre><code class="shell">echo &quot;permit nopass :wheel&quot; &gt; /etc/doas.conf
</code></pre>
</li>
<li><p>xmonad window manager</p>
<p>xmonad window manager uses xterm by default.</p>
<pre><code class="shell">pacman -S xmonad xmonad-contrib xmobar xterm
</code></pre>
</li>
<li><p>poybar</p>
<p>i use it with xmonad as default status bar</p>
<pre><code class="shell">pacman -S polybar
</code></pre>
</li>
<li><p>input method</p>
<p>install all of packages of fcitx5-im, fcitx5-material-color is the skin which really likes windows 10</p>
<pre><code class="shell">pacman -S fcitx5-im fcitx5-material-color fcitx5-rime
</code></pre>
</li>
<li><p>transparent tools</p>
<p>transset-df can transparent the xterm</p>
<pre><code class="shell">yay -S transset-df
</code></pre>
</li>
<li><p>animate action</p>
<p>picom has some good effect like fade in fade out and etc. and aur’s <a target="_blank" rel="noopener" href="https://github.com/jonaburg/picom">picom-jonaburg-git</a> has motion effect</p>
<pre><code class="shell">yay -S picom-jonaburg-git
</code></pre>
<p><img src=".images/picom-motion.gif"></p>
</li>
<li><p>package search tool</p>
<p>we can use <code>dmenu</code> or <code>rofi</code>, i use dmenu much more, but rofi can help me to find how many applications i have ever installed and which one should i launch once a time forgot its name with some keywords.</p>
<pre><code class="shell">pacman -S dmenu rofi
</code></pre>
</li>
<li><p>font</p>
<p>proper font will make some software works well like xterm and polybar</p>
<pre><code class="shell"># the font can show icons in terminal, and font for vscode
# Cascadia and Firacode become my favorite fonts now, even use it as system application font
pacman -S nerd-fonts-iosevka nerd-fonts-fira-code nerd-fonts-cascadia-code

# the two fonts can show chinese and korean proper in polybar
pacman -S adobe-source-han-sans-cn-fonts adobe-source-han-sans-kr-fonts 
</code></pre>
</li>
<li><p>notify tool</p>
<p>it can show notify message in desktop with highly configurable.</p>
<pre><code class="shell">pacman -S dunst
</code></pre>
</li>
<li><p>clip tool</p>
<p>it is a clip tool with great useage, such as clip standard output, one file even though an image</p>
<pre><code class="shell">pacman -S xclip
</code></pre>
</li>
<li><p>youdao dictionary</p>
<p>i have wrote a shell translate copy sentense which depends on this</p>
<pre><code class="shell">pacman -S ydcv-rs-git
</code></pre>
</li>
<li><p>screenshot</p>
<p>useful screenshot tool</p>
<pre><code class="shell">pacman -S flameshot
</code></pre>
</li>
<li><p>file manager</p>
<p>w3m is a plug in to show photo</p>
<pre><code class="shell">pacman -S ranger w3m
</code></pre>
</li>
<li><p>download tool</p>
<pre><code class="shell">pacman -S wget curl
</code></pre>
</li>
<li><p>audio and video player</p>
<pre><code class="shell">pacman -S mpg123 mplayer
</code></pre>
</li>
<li><p>performance monitor</p>
<pre><code class="shell">pacman -S glances htop neofetch

# htim is a replace of htop with vim typle keybing, after install it, type htop as usual
yay -S htim
</code></pre>
</li>
<li><p>browser</p>
<pre><code class="shell">pacman -S firefox
</code></pre>
</li>
<li><p>writer</p>
<pre><code class="shell"># use marktext-git instead of typora, since typora is not open source
pacman -S marktext-git
</code></pre>
</li>
<li><p>code</p>
<pre><code class="shel">pacman -S visual-studio-code-bin
</code></pre>
</li>
<li><p>screen capture</p>
<pre><code class="shell">pacman -S obs-studio
</code></pre>
</li>
<li><p>sql client tool</p>
<pre><code class="shell">pacman -S dbeaver
</code></pre>
</li>
<li><p>stickypad</p>
<pre><code class="shell">pacman -S xpad
</code></pre>
</li>
<li><p>chat</p>
<pre><code class="shell">pacman -S skypeforlinux-stable-bin
</code></pre>
</li>
<li><p>gui dialog tool</p>
<pre><code class="shell">pacman -S yad
</code></pre>
</li>
<li><p>simulate</p>
<pre><code class="shell">pacman -S xdotool
</code></pre>
</li>
<li><p>cli music player </p>
<pre><code class="shell">pacman -S cmus
</code></pre>
</li>
<li><p>chinese date</p>
<pre><code class="shell">pacman -S cdate
</code></pre>
</li>
<li><p>cpu information</p>
<pre><code class="shell">pacman -S cpufetch
</code></pre>
</li>
<li><p>image viewer</p>
<pre><code class="shell">pacman -S gthumb
</code></pre>
</li>
<li><p>wire sniff tool</p>
<pre><code class="shell">pacman -S wireshark
</code></pre>
</li>
<li><p>fake like hackers tool</p>
<pre><code class="shell">cmatrix no-more-secrets-git
</code></pre>
</li>
<li><p>analysis disk usage</p>
<pre><code class="shell">pacman -S ncdu
</code></pre>
</li>
</ul>
<h3 id="add-user"><a href="#add-user" class="headerlink" title="add user"></a>add user</h3><p>install zsh shell first</p>
<pre><code class="shell">sudo pacman -S zsh oh-my-zsh-git
</code></pre>
<p>add user with wheel group and zsh as default shell</p>
<pre><code class="shell">useradd -m -G wheel -s /bin/zsh username
</code></pre>
<p>set passwd</p>
<pre><code class="shell">passwd username
</code></pre>
<p>then adjust priviledges, such as sudo priviledge, run command without password</p>
<pre><code class="shell"># uncomment below in /etc/sudoers
%wheel ALL=(ALL) ALL
%wheel ALL=(ALL) NOPASSWD: ALL
</code></pre>
<h3 id="install-xorg"><a href="#install-xorg" class="headerlink" title="install xorg"></a>install xorg</h3><pre><code class="shell">pacman -S xorg
</code></pre>
<p>in order to use <code>startx</code> to login to gui, we need to install xorg-xinit</p>
<pre><code class="shell">pacman -S xorg-xinit
</code></pre>
<h3 id="video"><a href="#video" class="headerlink" title="video"></a>video</h3><p>there comes three choice: </p>
<ul>
<li>intel with video card integrated</li>
<li>nvidia indepedent</li>
<li>amd video driver</li>
</ul>
<p>if we use intel video card, we need to install intel drive</p>
<pre><code class="shell">pacman -S xf86-video-intel

# install package to adjust screen backlight, only intel works
pacman -S xorg-xbacklight

# we can also adjust screen backlight by hand, only intel works
vim /sys/class/backlight/intel_backlight
</code></pre>
<p>if we use nvidia video card, we need to install nvidia drive</p>
<pre><code class="shell">pacman -S nvidia
</code></pre>
<p>amd gpu</p>
<pre><code class="shell">pacman -S xf86-video-amdgpu
</code></pre>
<h3 id="audio"><a href="#audio" class="headerlink" title="audio"></a>audio</h3><pre><code class="shell">sudo pacman -S pulseaudio pulseaudio-alsa pamixer
</code></pre>
<p>when we installed those software, we can also not get voice, because it is mute by default. so we need enable it</p>
<pre><code class="shell">pamixer --unmute
</code></pre>
<h2 id="personal-configure"><a href="#personal-configure" class="headerlink" title="personal configure"></a>personal configure</h2><p>why it is personal? because there are too many choice for user to choose, and i myself use the system serveral years and have wrote a shell script to copy the old configure file to the system without configure it step by step. so i will describe it in two part.</p>
<ul>
<li>one is auto config</li>
<li>another is step by step</li>
</ul>
<h3 id="auto-config"><a href="#auto-config" class="headerlink" title="auto config"></a>auto config</h3><p> all my backup file locate in <code>~/Data/linux</code>, so i need to copy old data to new machine. there are several ways to do the thing, such as a usb drive, use scp, startup a ftp in old machine…</p>
<p>and find a script named <code>filesync</code> in <code>linux/.local/bin</code> which we copied from old machine. and run:</p>
<pre><code class="shell">./filesync install
</code></pre>
<p> most of things will be done automaticly.</p>
<h3 id="step-by-step"><a href="#step-by-step" class="headerlink" title="step by step"></a>step by step</h3><p>the section below will show you how to config system step by step.</p>
<h4 id="install-AUR-package-installer"><a href="#install-AUR-package-installer" class="headerlink" title="install AUR package installer"></a>install AUR package installer</h4><p>using <code>yay</code> or <code>paru</code> we can download software in AUR. and suggest use paru, because it can search both pacman and aur at the same time.</p>
<pre><code class="shell">pacman -S paru
# pacman -S yay
</code></pre>
<h4 id="add-China-repository"><a href="#add-China-repository" class="headerlink" title="add China repository"></a>add China repository</h4><p><strong>pacman repository</strong></p>
<p>write info to <code>/etc/pacman.conf</code></p>
<pre><code class="shell">[archlinuxcn]
Server = https://mirrors.aliyun.com/archlinuxcn/$arch
</code></pre>
<p>then refresh the database</p>
<pre><code class="shell">pacman -Sy
</code></pre>
<p>we don’t need to install chinese keyring right now, just install it while there is a message shows we need to import some keyring.</p>
<pre><code class="shell">pacman -S archlinuxcn-keyring
</code></pre>
<p><strong>aur repository</strong></p>
<pre><code class="shell"># if use yay to download aur package
yay --aururl &quot;https://aur.tuna.tsinghua.edu.cn&quot; --save
</code></pre>
<p>this will create yay config in <code>~/.config/yay/config.json</code></p>
<pre><code class="shell"># can check config with commands
yay -P -g
</code></pre>
<h4 id="default-location-config"><a href="#default-location-config" class="headerlink" title="default location config"></a>default location config</h4><p>when we use xorg, there is a way to config where the data to be stored. even though not all the software follow the rules, but it is much better than no.</p>
<p>added to <code>~/.pam_environment</code></p>
<pre><code class="shell"># environment variable to set xdg base directory
XDG_CONFIG_HOME=/home/blueocean/.config
XDG_CACHE_HOME=/home/blueocean/.cache
XDG_DATA_HOME=/home/blueocean/.local/share
XDG_DATA_DIRS=/usr/local/share:/usr/share
XDG_CONFIG_DIRS=/etc/xdg
</code></pre>
<h4 id="fcitx5-configure"><a href="#fcitx5-configure" class="headerlink" title="fcitx5 configure"></a>fcitx5 configure</h4><p>in order to make fcitx5 works well, there are several variable to be configed in <code>~/.pam_environment</code></p>
<pre><code class="shell"># environment variable for fcitx5
INPUT_METHOD  DEFAULT=fcitx5
GTK_IM_MODULE DEFAULT=fcitx5
QT_IM_MODULE  DEFAULT=fcitx5
XMODIFIERS    DEFAULT=\@im=fcitx5
</code></pre>
<p>add startup command to <code>~/.xinitrc</code> file :<code>fcitx5 &amp;</code> </p>
<p>short keys: <code>ctrl +alt +h </code> :enable/disable completion</p>
<p>if not simple chinese, use “ctrl+`” to change</p>
<h4 id="xmonad-config"><a href="#xmonad-config" class="headerlink" title="xmonad config"></a>xmonad config</h4><p>copy configure file <code>xmonad.hs</code>  to <code>~/.xmonad/</code></p>
<p>then compile it:</p>
<pre><code class="shell">xmonad --recompile
</code></pre>
<p>write start xmonad command to <code>~/.xinitrc</code></p>
<pre><code class="shell"># if home directory has no .xinitrc then copy 
[ ! -f ~/.xinitrc ] &amp;&amp; cp /etc/X11/xinit/xinitrc ~/.xinitrc

# write to the end of the file
exec xmonad    
</code></pre>
<h4 id="polybar-config"><a href="#polybar-config" class="headerlink" title="polybar config"></a>polybar config</h4><p>if there has no configure file, we can download configure from website</p>
<pre><code class="shell">[ ! -f ~/.config/polybar/config ] &amp;&amp; touch ~/.config/polybar/config
</code></pre>
<p>add start command in <code>~/.xinitrc</code></p>
<pre><code class="shell">sh ~/.config/polybar/launch.sh
</code></pre>
<h4 id="disable-touchpad"><a href="#disable-touchpad" class="headerlink" title="disable touchpad"></a>disable touchpad</h4><p>if we have a touchpad and don’t wanna use, we can disable it</p>
<p>first of all, install the command:</p>
<pre><code class="shell">pacman -S xorg-xinput
</code></pre>
<p>add below to <code>~/.xinitrc</code> to disable it</p>
<pre><code class="shell">xinput | grep Touchpad | grep -E &#39;=[0-9]&#123;2&#125;&#39; -o | grep -E &#39;[0-9]&#123;2&#125;&#39; -o | xargs xinput disable
</code></pre>
<h4 id="cursor-style"><a href="#cursor-style" class="headerlink" title="cursor style"></a>cursor style</h4><p>make sure xsetroot tools has been installed</p>
<pre><code class="shell">pacman -S xorg-xsetroot
</code></pre>
<p>write below to <code>~/.xinitrc</code></p>
<pre><code class="shell">xsetroot -cursor_name left_ptr
</code></pre>
<h4 id="window-effect"><a href="#window-effect" class="headerlink" title="window effect"></a>window effect</h4><p>make sure picom has been installed, then write below to <code>~/.xinitrc</code></p>
<pre><code class="shell">picom  --experimental-backends --config .config/picom/picom.conf -b
</code></pre>
<h4 id="xterm-transparent"><a href="#xterm-transparent" class="headerlink" title="xterm transparent"></a>xterm transparent</h4><p>make sure transset-df has been installed, then write below to <code>~/.zshrc</code>. we can change transparent with <code>-m</code> parameter.</p>
<pre><code class="shell">[ -n &quot;$XTERM_VERSION&quot; ] &amp;&amp; transset-df -m 0.95 --id &quot;$WINDOWID&quot; --dec 0.1 &gt;/dev/null
</code></pre>
<h4 id="ntfs-file-system-recognize"><a href="#ntfs-file-system-recognize" class="headerlink" title="ntfs file system recognize"></a>ntfs file system recognize</h4><p>in order to recognize windows file system, the tool need to be installed. and without it we cannot modify windows file by normal user.</p>
<pre><code class="shell">pacman -S ntfs-3g

# mount example
mount -t ntfs-3g /dev/sdaX /mnt
</code></pre>
<h4 id="home-directory"><a href="#home-directory" class="headerlink" title="home directory"></a>home directory</h4><p>with <code>xdg-user-dirs</code> add “well known” user directories in /home/user</p>
<pre><code class="shell">pacman -S xdg-user-dirs
</code></pre>
<p>then run <code>xdg-user-dirs-update</code> to product</p>
<pre><code class="shell">xdg-user-dirs-update
</code></pre>
<h4 id="fat-partition-recognize"><a href="#fat-partition-recognize" class="headerlink" title="fat partition recognize"></a>fat partition recognize</h4><p>in order to mount fat partition or use mkfs.fat format a disk, we need to install <code>dosfstools</code> first.</p>
<pre><code class="shell">pacman -S dosfstools
</code></pre>
<h2 id="other-settings"><a href="#other-settings" class="headerlink" title="other settings"></a>other settings</h2><p>some configure which seems not very important.</p>
<h3 id="grub-theme"><a href="#grub-theme" class="headerlink" title="grub theme"></a>grub theme</h3><ul>
<li><p>gnome look or pacman</p>
<p>   download from the <a href="gnomelook.org">web site</a> or install by pacman and mv to <code>/boot/grub/theme</code> directory</p>
<pre><code class="shell">unzip arch-silence-master.zip                    
mv arch-silence-master /boot/grub/theme/    
</code></pre>
<p>   now tell grub use the new theme, modify <code>/etc/default/grub    </code></p>
<pre><code class="shell">GRUB_THEME=&quot;/boot/grub/themes/arch-silence-master/theme/theme.txt&quot;
</code></pre>
<p>   rebuild <code>grub.cfg</code></p>
<pre><code class="shell">grub-mkcofig -o /boot/grub/grub.cfg
</code></pre>
</li>
<li><p>git hub</p>
<p>   download from <a target="_blank" rel="noopener" href="https://gitee.com/ulomo/grub2-themes">website</a>, unzip and change directory to it and run</p>
<pre><code class="shell">sudo ./install.sh -b -t tela
</code></pre>
<p>   <img src=".images/image-20210224232446970.png" alt="image-20210224232446970"></p>
<p>   uninstall run <code>sudo ./install.sh -r -t tela</code></p>
</li>
</ul>
<h3 id="show-boot-message"><a href="#show-boot-message" class="headerlink" title="show boot message"></a>show boot message</h3><p>in default the boot message is hidden, we can make it showing again.modify <code>/etc/default/grub</code>, remove <code>quiet</code> flag</p>
<pre><code class="shell">GRUB_CMDLINE_LINUX_DEFAULT=&quot;loglevel=3&quot;
</code></pre>
<p>rebuild grub.cfg</p>
<pre><code class="shell">grub-mkconfig -o /boot/grub/grub.cfg
</code></pre>
<h3 id="coloize-pacman"><a href="#coloize-pacman" class="headerlink" title="coloize pacman"></a>coloize pacman</h3><p>in default the search result of pacman has no colors, we can change it. modify <code>/etc/pacman.conf</code>, uncomment <code>color</code></p>
<h3 id="colorls"><a href="#colorls" class="headerlink" title="colorls"></a>colorls</h3><p>it is a colorized ls command which can show icons (make sure u have patched font with graph support. such as nerd-fonts-iosevka)</p>
<pre><code class="shell"># it is writed in rube
pacman -S ruby

# then use gem which ruby package manager install colorls
gem install colorls

# follow install output config environment. such as add to .zshrc
source $(dirname $(gem which colorls))/tab_complete.sh

# add path to /etc/profile
append_path &#39;/home/blueocean/.local/share/gem/ruby/2.7.0/bin&#39;
</code></pre>
<p>alias ls to colorls</p>
<pre><code class="shell"># in .zshrc
alias ls=&quot;colorls&quot;

# make effect
source /etc/profile
source ~/.zshrc
</code></pre>
<p><img src=".images/image-20210418125422704.png" alt="image-20210418125422704"></p>
<p>if ruby upgrades, run <code>gem install colorls</code> to upgrade colorls also.</p>
<h3 id="bluetooth"><a href="#bluetooth" class="headerlink" title="bluetooth"></a>bluetooth</h3><p><strong>install base package</strong></p>
<p>use bluetooth to connect device. intall package first</p>
<pre><code class="shell">pacman -S bluez
</code></pre>
<p>provide cli tool</p>
<pre><code class="shell">pacman -S bluez-utils
</code></pre>
<p>provide sounds for bluetooth</p>
<pre><code class="shell">pacman -S pulseaudio-bluetooth
</code></pre>
<p><strong>add user to lp group</strong></p>
<p>it is needed to add user to lp group</p>
<pre><code class="shell">usermod -a -G lp `whoami`
</code></pre>
<p><strong>start bluetooth</strong></p>
<p>check whether or not driver has been launched</p>
<pre><code class="shell">lsmod | grep btusb
</code></pre>
<p>if not launched by hand</p>
<pre><code class="shell">modprobe btusb
</code></pre>
<p>launch service, a reboot needed</p>
<pre><code class="shell">systemctl enable bluetooth.service
systemctl start bluetooth.service
</code></pre>
<blockquote>
<p>note: we need enable bluetooth to start up automaticly, otherwise there will be a error msg of failed</p>
</blockquote>
<p>connect devices the first time</p>
<pre><code class="shell">bluetoothctl
agent KeyboardOnly
default-agent
power on
scan on
pair xxxx
connect xxxx
</code></pre>
<p>a paired device can be connect directory</p>
<pre><code class="shell"># show paired devices
devices
# then connect
connect xxxx
</code></pre>
<h3 id="adjust-video-fan-speed"><a href="#adjust-video-fan-speed" class="headerlink" title="adjust video fan speed"></a>adjust video fan speed</h3><p>make sure nvidia-settings has been installed already.</p>
<pre><code class="shell"># enable fan speed adjust
nvidia-xconfig --cool-bits=4

# then add below to ~/.xinitrc, replace n with the fan speed percentage. such as 10
nvidia-settings -a &quot;[gpu:0]/GPUFanControlState=1&quot; -a &quot;[fan:0]/GPUTargetFanSpeed=n&quot;
</code></pre>
<h3 id="cursor-theme"><a href="#cursor-theme" class="headerlink" title="cursor theme"></a>cursor theme</h3><p>full document can visit <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Cursor_themes#XDG_specification">arch wiki</a> page.</p>
<p>the default cursor theme is bad, i need to change it. before start up, i need to make it clearly there are 3 part should be changed</p>
<ol>
<li>xdg settting for X11</li>
<li>gtk theme setting</li>
<li>terminal setting</li>
</ol>
<p>first download cursor theme you liked <a target="_blank" rel="noopener" href="https://www.gnome-look.org/browse/cat/107/ord/rating/">in this website</a></p>
<p><strong>xdg setting</strong></p>
<pre><code class="shell"># create ~/.icons folder
mkdir ~/.icons

# extract theme folder to ~/.icons
tar -xzf theme.tar.gz -C ~/.icons

# create theme configure file
mkdir ~/.icons/default
touch ~/.icons/default/index.theme

echo &quot;
[icon theme]
Inherits=oreo_spark_blue_cursors
&quot; &gt; ~/.icons/default/index.theme
</code></pre>
<p><strong>gtk setting</strong></p>
<pre><code class="shell"># create theme config file
touch ~/.config/gtk-3.0/settings.ini

echo &quot;
[Settings]
gtk-cursor-theme-name=oreo_spark_blue_cursors
&quot; &gt; ~/.config/gtk-3.0/settings.ini

# polybar use gtk-2.0, so we need copy above setting to gtk2 folder
cp ~/.config/gtk-3.0/settings.ini ~/.config/gtk-2.0/settings.ini
</code></pre>
<p><strong>terminal setting</strong></p>
<pre><code class="shell"># write this in ~/.Xresources
Xcursor.theme: oreo_spark_blue_cursors
Xcursor.size: 16
</code></pre>
<p><strong>make it effect</strong></p>
<pre><code class="shell">xrdb ~/.Xresources
</code></pre>
<p>then relogin desktop</p>
<h3 id="gtk-application-theme-and-icon-theme"><a href="#gtk-application-theme-and-icon-theme" class="headerlink" title="gtk application theme and icon theme"></a>gtk application theme and icon theme</h3><p>it is a long time for google, and cannot find how to set system application theme and icon theme. finally i get it.</p>
<p><strong>First,</strong> we need to know there are two different frames in our application:</p>
<ol>
<li>GTK style</li>
<li>QT style</li>
</ol>
<p>it depends on what kind of language the application to be wrote. not depends on our theme chooseing.</p>
<p><strong>Second,</strong> we need to know there are there kind of themes we can download:</p>
<ol>
<li>application theme. the frame of application which stores in <code>~/.themes</code> or <code>/usr/share/themes</code></li>
<li>icon theme, the icon of application which stores in <code>~/.icons</code> or <code>/usr/share/icons</code></li>
<li>cursor theme, cursor style which stores in <code>~/.icons</code> or <code>/usr/share/icons</code></li>
</ol>
<p><strong>I</strong> follow <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/GTK#GTK_and_Qt">wiki page</a> to configure themes:</p>
<ol>
<li><p>download theme from <a target="_blank" rel="noopener" href="http://opendesktop.org/">this website</a></p>
</li>
<li><p>then extract gtk theme in<code>~/.themes</code>. </p>
<p>extract icon theme in <code>~/.icons</code></p>
<pre><code class="shell">tar -xJf Downloads/WhiteSur-light.tar.xz -C ~/.themes
</code></pre>
<pre><code class="shell">tar -xJf 01-WhiteSur.tar.xz -C ~/.icons
</code></pre>
</li>
<li><p>edit two files</p>
<blockquote>
<p>Note:</p>
<p>i find a more beautiful font rather than <code>Cantarell</code></p>
<p>use <code>CaskaydiaCove Nerd Font 10</code> instead of <code>Cantarell 11</code></p>
</blockquote>
<p>gtk2 application need to edit file <code>/usr/share/gtk-2.0/gtkrc</code> or <code>.config/gtk-2.0/gtkrc</code></p>
<pre><code class="shell">cat /usr/share/gtk-2.0/gtkrc 
gtk-icon-theme-name = &quot;WhiteSur-light&quot;
gtk-theme-name = &quot;WhiteSur-light&quot;
gtk-font-name = &quot;Cantarell 11&quot;
</code></pre>
<p>gtk3 application can edit <code>/usr/share/gtk-3.0/settings.ini</code> or <code>.config/gtk-3.0/settings.ini</code></p>
<pre><code class="shell">cat ~/.config/gtk-3.0/settings.ini 
[Settings]
gtk-cursor-theme-name = oreo_spark_blue_cursors
gtk-icon-theme-name = WhiteSur-light
gtk-theme-name = WhiteSur-light
gtk-font-name = Cantarell 11
</code></pre>
</li>
</ol>
<p>then relogin desktop, most of applications will show specified theme correctly. however some of applications such as vbox still the same as before shows like this:</p>
<p><img src=".images/image-20210808000347792.png" alt="image-20210808000347792"></p>
<p>and at last i find that it is because the application writes by QT, so we cannot apply GTK theme to it. and i find the fixed method: <strong>make QT application use GTK theme <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Uniform_look_for_Qt_and_GTK_applications#Using_a_GTK_icon_theme_in_Qt_apps">in this page</a></strong></p>
<pre><code class="shell"># write this to ~/.xinitrc if i use window manager
export DESKTOP_SESSION=gnome
</code></pre>
<p>relogin desktop, and then the virtualbox shows correct themes, it is really amazing!</p>
<p><img src=".images/image-20210808000209103.png" alt="image-20210808000209103"></p>
<p><strong>only for one specified app</strong></p>
<p>above setting will change all app theme, however we can define some app with specified theme.</p>
<pre><code class="shell"># go to this folder
cd /usr/share/applications
# find which app should be change
vim leafpad.desktop

# find Exec line
Exec=leafpad %F
# change it to specified theme
Exec=env GTK_THEME=WhiteSur-light:light leafpad %F
</code></pre>
<p>restart app, theme will make effect. but it seems that it’s only make effect if we have no theme setting by default.</p>
<h3 id="font-setting"><a href="#font-setting" class="headerlink" title="font setting"></a>font setting</h3><p>at first, we need to know the category of fonts.</p>
<ul>
<li>bitmap: often used in system console</li>
<li>latin script:<ul>
<li>serif: shows great in large font, no good in small font. often used in title and printing.</li>
<li>sans-serif: shows great in small font and web page.</li>
<li>monospace: often used in coding.</li>
<li>family: include above there fonts.</li>
</ul>
</li>
<li>non-latin script: chinese/japanese and others</li>
<li>emoji and symbols</li>
<li>math</li>
<li>other operating system fonts</li>
</ul>
<p>so in a GUI operation system, we often use latin for english and non-latin for chinese. emoji and math is optional. notice that console can use bitmap only.</p>
<blockquote>
<p>user font can be set in <code>~/.local/share/fonts</code></p>
<p>then use <code>fc-cache</code> to build font cache.</p>
</blockquote>
<p>in order to configure font manually, we need two step:</p>
<ol>
<li> make effect of user setting</li>
</ol>
<pre><code class="shell">mkdir ~/.config/fontconfig/conf.d
ln -s /usr/share/fontconfig/conf.avail/50-user.conf ~/.config/fontconfig/conf.d
</code></pre>
<ol start="2">
<li><p>manually font setting</p>
<pre><code class="shell">touch ~/.config/fontconfig/fonts.conf
</code></pre>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;!DOCTYPE fontconfig SYSTEM &quot;fonts.dtd&quot;&gt;
&lt;fontconfig&gt;
    &lt;match target=&quot;font&quot;&gt;
        &lt;edit name=&quot;autohint&quot; mode=&quot;assign&quot;&gt; &lt;bool&gt;false&lt;/bool&gt; &lt;/edit&gt;
        &lt;edit name=&quot;antialias&quot; mode=&quot;assign&quot;&gt; &lt;bool&gt;true&lt;/bool&gt; &lt;/edit&gt;
        &lt;edit name=&quot;hinting&quot; mode=&quot;assign&quot;&gt; &lt;bool&gt;true&lt;/bool&gt; &lt;/edit&gt;
        &lt;edit name=&quot;hintstyle&quot; mode=&quot;assign&quot;&gt; &lt;const&gt;hintslight&lt;/const&gt; &lt;/edit&gt;
        &lt;edit name=&quot;rgba&quot; mode=&quot;assign&quot;&gt; &lt;const&gt;rgb&lt;/const&gt; &lt;/edit&gt;
        &lt;edit name=&quot;lcdfilter&quot; mode=&quot;assign&quot;&gt; &lt;const&gt;lcddefault&lt;/const&gt; &lt;/edit&gt;
        &lt;edit name=&quot;embeddedbitmap&quot; mode=&quot;assign&quot;&gt; &lt;bool&gt;false&lt;/bool&gt; &lt;/edit&gt;
    &lt;/match&gt;

    &lt;!--fallback font order--&gt;
    &lt;alias&gt;
        &lt;family&gt;serif&lt;/family&gt;
        &lt;prefer&gt;
            &lt;family&gt;DejaVu Serif&lt;/family&gt;
            &lt;family&gt;Source Han Sans CN&lt;/family&gt;
        &lt;/prefer&gt;
    &lt;/alias&gt;
    &lt;alias&gt;
        &lt;family&gt;sans-serif&lt;/family&gt;
        &lt;prefer&gt;
            &lt;family&gt;Inter&lt;/family&gt;
            &lt;family&gt;Source Han Sans CN&lt;/family&gt;
        &lt;/prefer&gt;
    &lt;/alias&gt;
    &lt;alias&gt;
        &lt;family&gt;monospace&lt;/family&gt;
        &lt;prefer&gt;
            &lt;family&gt;Ubuntu&lt;/family&gt;
            &lt;family&gt;Source Han Sans CN&lt;/family&gt;
        &lt;/prefer&gt;
    &lt;/alias&gt;
&lt;/fontconfig&gt;
</code></pre>
</li>
</ol>
<p>i use <code>DejaVu Serif</code> for serif, <code>Inter</code> for sans-serif, <code>Ubuntu</code> for monospace. the same setting for firefox and it shows great.</p>
<h3 id="virtual-machine"><a href="#virtual-machine" class="headerlink" title="virtual machine"></a>virtual machine</h3><h4 id="virtualbox"><a href="#virtualbox" class="headerlink" title="virtualbox"></a>virtualbox</h4><p><strong>load kernel module</strong></p>
<p>before we can run virtual machine, we need load <code>vboxdrv</code> kernel module before</p>
<pre><code class="shell">modprobe vboxdrv
</code></pre>
<p>when we launch a virtualbox os with desktop environment, the most import thing is the size of window, for what the default size is to small.</p>
<p>if we use windows we can directily click the top bar menu and choose install third extension, after finish, we can login windows and click install extension.</p>
<p><strong>screen size with command</strong></p>
<p>however in linux, it is much complex, one method i find good enough is use command to specify to size without install extension and working fine.</p>
<pre><code class="shell"># first use cvt to product the screen size info
cvt length width

# second install xorg-xrandr and use it to set size
pacman -S xorg-xrandr

# add the standout of cvt 
xrandr --newmode 

# add a new mode
xrandr --addmode Virtual-1 lengthxwidth_refreshrate

# change screen size
xrandr --output Virtual-1 --mode lengthxwidth_refreshrate


# for example
cvt 2550 1406
xrandr --newmode &quot;2552x1406_60.00&quot;  302.75  2552 2736 3008 3464  1406 1409 1419 1458 -hsync +vsync
xrandr --addmode Virtual-1 2552x1406_60.00
xrandr --output Virtual-1 --mode 2552x1406_60.00
</code></pre>
<p><strong>screen size with iso file</strong></p>
<p>yeah, there comes <a target="_blank" rel="noopener" href="https://askubuntu.com/questions/310320/cant-get-fullscreen-resolution-on-ubuntu-hosted-on-virtualbox">another method</a> which work most of the time i find in the website.The most important thing, <strong>do not use</strong> THE “GUEST  ADDITIONS CD” come along with the Oracle VirtualBox, which you usually  find in the menu “Devices” - “Insert Guest Additions CD Image”. <strong>But</strong> download the latest VBoxAdditions iso file from the <a target="_blank" rel="noopener" href="http://download.virtualbox.org/virtualbox/">official webpage</a>, mount the image file in your virtual machine and then run the shell file “VBoxLinuxAdditions.run”:</p>
<pre><code class="shell">sudo sh  VBoxLinuxAdditions.run
</code></pre>
<p>Type in the password when prompted. Restart your virtual machine, then everything should work now.</p>
<h4 id="kvm"><a href="#kvm" class="headerlink" title="kvm"></a>kvm</h4><p>I have used virtualbox so many years when i first heard of it, it is quiet simple, free and i like it very much. However today when i see DT’s video, he introduces virt-manager to manager virtual machine, i think i need try it. Because kvm is the kernel based virtual machine, its performance may improved a lot then virtualbox. At first we need to know some concept:</p>
<ul>
<li><p>kvm: kernel based virtual machine,  provide the ability to start virtual machine.</p>
</li>
<li><p>qemu: machine emulator which can use kvm hypervisor or others. </p>
</li>
<li><p>libvirt: libs(network, storage and etc), daemon, command utility(virsh)</p>
</li>
<li><p>virt-manager: gui tool for easily build/manage virtual machine.</p>
</li>
</ul>
<p>at first, check whether support kvm</p>
<pre><code class="shell">LC_ALL=C lscpu | grep Virtualization
</code></pre>
<p>if the output not empty, then we can install the needed tools</p>
<pre><code class="shell"># virt-manager includes libvirt
pacman -S qemu virt-manager

# other tool that libvirtd need
pacman -S ebtables dnsmasq dmidecode
</code></pre>
<blockquote>
<p>Note: </p>
<ol>
<li><p><code>ebtables</code> and <code>dnsmasq</code> is very important for virt-manager to manage/build host network bridge and dnsmasq in iptables, without them the network in virtual machine may be faild to connect.</p>
</li>
<li><p>dmidecode used for showing host information in virt-manager.</p>
</li>
<li><p>so,  in host machine iptables must be enabled and started for virt-manager to manage virtual machine network.</p>
</li>
</ol>
</blockquote>
<p>then enable and start libvirtd daemon</p>
<pre><code class="shell">systemctl enable --now libvirtd
</code></pre>
<p>after start up, we need add our user to libvirt group. </p>
<blockquote>
<p> Note: without this step, there may be some auth errors.</p>
</blockquote>
<pre><code class="shell">usermod -a -G libvirt [user_name]
</code></pre>
<p>finally, we can launch virt-manager to build/manage virtual machine.</p>
<p><strong>add new image location</strong></p>
<p>the default image location is <code>/var/lib/libvirt/images</code>, we can add a new storage location via virt-manager</p>
<p><img src="./.images/2021-12-04-13-56-30-image.png" alt="virt-manager"></p>
<p><strong>convert virtualbox images to kvm images</strong></p>
<pre><code class="shell"># for example convert archlinux.vdi to archlinux
# er, i convert serveral images from vdi to qcow2 and all of them faild in find disk with UUID
qemu-img convert -f vdi -O qcow2 archlinux.vdi ~/Public/kvm/images/archlinux
</code></pre>
<p><strong>add uefi support</strong></p>
<p>install edk2-ovmf to support uefi</p>
<pre><code class="shell">pacman -S edk2-ovmf

# then restart libvertd
systemctl restart libvertd
</code></pre>
<p><strong><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/107633/how-do-i-get-my-mouse-back-from-qemu-kvm">get mouse back from virt-manager</a></strong></p>
<p>use <code>left ctrl + left alt</code> to release focus in virt-manager. or <code>left ctrl + left alt + g</code> when use GTK fronted of qemu.</p>
<p><strong>some important virsh command</strong></p>
<p><code>virsh</code> is libvirt’s command line tool, include commands which can operate the virtual machine instead of virt-manager, however it is much complex.</p>
<p><em>virtual machine is called domain in libvirt</em></p>
<pre><code class="shell"># list all running machines/domains (include id/domain-name)
sudo virsh list

# list all machines/domains
sudo virsh list --all

# list all networks
sudo virsh net-list

# list all pools/images storage position
sudo virsh pool-list

# list all volumes/images
sudo virsh vol-list [pool-name]

# list domain/machine info
sudo virsh dominfo [domain-name/id]

# list domain/machine ipaddress
sudo virsh domifaddr [domain-name/id]

# start/shutdown/suspend domain/machine
sudo virsh start/shutdown/suspend [domain-name/id]

# start network
sudo virsh net-start [network-name]
</code></pre>
<p><strong>user comand line to start up a virtual machine</strong></p>
<pre><code class="shell"># start up network
sudo virsh net-list
sudo virsh net-start [network-name]
# start virtual machine
sudo virsh list --all
sudo virsh start [domain-name/id]
# get virtual machine&#39;s ip address
sudo virsh domifaddr [domain-name/id]
# then use ssh to connect remote linux or rdesktop to connect windows
</code></pre>
<p><strong>fix cannot adjust resolution</strong></p>
<p>most of time we start up a new virtual machine in virt-manager, the resolution cannot adjust correctly, the way to fix it is change virt-manager video model.</p>
<p>we can change <code>QXL</code> to <code>Virtio</code> or <code>VGA</code></p>
<p><strong>share folder</strong></p>
<p>for example make host’s <code>Desktop</code> folder as a share folder, we need to change Desktop folder’s permistion to 777</p>
<pre><code class="shell">chmod 777 ~/Desktop
</code></pre>
<p>in virt-manager create a new file filesystem and mount to <code>/mnt</code> for example</p>
<p>in virtual machine use command to mount the new share folder</p>
<pre><code class="shell"># for example mount share folder to Desktop
mount -t 9p -o trans=virtio /mnt Desktop
</code></pre>
<p><strong>use qemu command to create/start virtual machine with GUI</strong></p>
<p><em>shortcut</em>:</p>
<ul>
<li>fullscreen: ctrl+alt+f</li>
<li>menu: ctrl+alt+m</li>
<li>grab mouse: ctrl+alt+g (effect only when menu bar shows)</li>
</ul>
<pre><code class="shell"># create a file block to install virtual machine
qemu-img create -f qcow2 [virtual-name] [disk-size]

# eg:
qemu-img create -f qcow2 android.img 10G


# install OS to file block
qemu-system-x86_64 -enable-kvm -cdrom android.iso -drive file=./android.img 

# start virtual machine
# cpu: host has the best performance
# smp: cpu thread
# m: memory
# vga: video method
# soundhw: sound device

# eg:
qemu-system-x86_64 -enable-kvm -drive file=./android.img -cpu host -smp 4 -m 4G -vga virtio -display sdl,ql=on -soundhw=hda

qemu-system-x86_64 -enable-kvm -drive file=win11.qcow2 -cpu host -smp 4 -m 4G -vga virtio -display gtk,gl=on,full-screen=on -soundhw hda
</code></pre>
<h3 id="connect-remote-windows"><a href="#connect-remote-windows" class="headerlink" title="connect remote windows"></a>connect remote windows</h3><p>windows remote desktop via udp/3389, so if i wanna to connect to windows in linux machine, i need to install a client with the ability to connect windows supported protocol. there are a lot of tools, but i choose the <code>rdesktop</code>, since it is a simple command line tool.</p>
<pre><code class="shell">pacman -S rdesktop
</code></pre>
<pre><code class="shell"># better rander
rdesktop -g 100% -r sound:local -x l -M -K  -P -z 192.168.122.157:3389
</code></pre>
<ul>
<li><p><code>-g 100%</code>: automatically scale the geometry to fit screen.</p>
</li>
<li><p><code>-r sound:local</code>: redirect remote machine sound to local.</p>
</li>
<li><p><code>-M</code>: use linux system’s mouse instead of remote machine’s mouse.</p>
</li>
<li><p><code>-K</code>: use linux window manager instead of remote machine’s window manager.</p>
</li>
<li><p><code>-x l</code>: rander remote desktop’s wallpaper, window motion. </p>
</li>
<li><p><code>-P</code>: enable bitmap cache to disk to improve performance.</p>
</li>
<li><p><code>-z</code>: enable compress rdp datastream.</p>
</li>
<li><p><code>192.168.122.157:3389</code>: remote mahine’s ip and port.</p>
</li>
</ul>
<pre><code class="shell"># low level rander
rdesktop -g 100% -r sound:local -x m -M -K -P -z -b 192.168.122.157:3389
</code></pre>
<blockquote>
<p>Note: when use <code>-P</code> option, will create a directory  <code>~/.rdesktop/cache</code>, in order to speed up the access time, we can mount this directory to memory.</p>
</blockquote>
<pre><code class="shell"># nvim /etc/fstab

tmpfs    /home/healer/.rdesktop/cache    tmpfs   rw,nodev,nosuid    0 0
</code></pre>
<h3 id="auto-login"><a href="#auto-login" class="headerlink" title="auto login"></a>auto login</h3><p>archlinux use agetty to manage virtual console, we can use it to automatic login system without password. </p>
<pre><code class="shell">mkdir /etc/systemd/system/getty@tty1.service.d
touch /etc/systemd/system/getty@tty1.service.d/override.conf

# change username with login user name
echo &quot;
[Service]
ExecStart=
ExecStart=-/usr/bin/agetty --autologin username --noclear %I $TERM
&quot; &gt; /etc/systemd/system/getty@tty1.service.d/override.conf
</code></pre>
<p>relogin system will make effect.</p>
<p>if we also want to login desktop environment, we can do it like this.</p>
<pre><code class="shell">echo &quot;
if [[ ! $DISPLAY &amp;&amp; $XDG_VTNR -eq 1 ]]; then
    exec startx &amp;&gt;/dev/null
fi
&quot; &gt; ~/.zprofile
</code></pre>
<h3 id="connect-remote-linux"><a href="#connect-remote-linux" class="headerlink" title="connect remote linux"></a>connect remote linux</h3><p>in linux, there is no default remote service installed by default, so if we wanna to connect to remote linux with GUI interface, we need install a VNC server in remote linux and then install a VNC client in local machine to connect to remote.</p>
<p><strong>in remote</strong></p>
<p>the easiest way is to install <code>x11vnc</code></p>
<pre><code class="shell">pacman -S x11vnc
</code></pre>
<p>then create a connection passwd</p>
<pre><code class="shell">x11vnc -storepasswd
</code></pre>
<p>the command above will create a passwd file in <code>~/.vnc/passwd</code> by default.</p>
<p>then start vnc server</p>
<pre><code class="shell">x11vnc -display :0
</code></pre>
<p><strong>in local</strong></p>
<p>remmina is a common GUI tool that support lots of protocol</p>
<pre><code class="shell">pacman -S remmina
pacman -S libvncserver
</code></pre>
<h3 id="auto-suspend"><a href="#auto-suspend" class="headerlink" title="auto suspend"></a>auto suspend</h3><p>in order to save power while we don’t use computer with a specified time. we can use <code>slock</code> and <code>xautolock</code></p>
<p><strong>suspend with shortcut</strong></p>
<pre><code class="shell"># write this in xmonad.hs and triger with shortcut
((0 , xK_l), spawn &quot;slock &amp; systemctl suspend&quot;)
</code></pre>
<p><strong>auto suspend with specified time</strong></p>
<p>run <code>xautolock</code> while system startup and auto sleep with specified time</p>
<pre><code class="shell"># write this in xmonad.hs which will run while login desktop (30 minites)
spawnOnce &quot;xautolock -time 30 -locker &#39;systemctl suspend&#39; -detectsleep&quot;

# or write this in .xinitrc
xautolock -time 30 -locker &#39;systemctl suspend&#39; -detectsleep
</code></pre>
<h3 id="cache-browser-data-to-memory"><a href="#cache-browser-data-to-memory" class="headerlink" title="cache browser data to memory"></a>cache browser data to memory</h3><p>install</p>
<pre><code class="shell"># install psd
pacman -S  profile-sync-daemon

# first run create configure file
~ » psd                                                                                                                                                                                               ~  
 First time running psd so please edit /home/healer/.config/psd/psd.conf to your liking and run again.
</code></pre>
<p>configure</p>
<pre><code class="shell"># enable
systemctl --user enable psd

# configure overlay and browser
vim ~/.config/psd/psd.conf

USE_OVERLAYFS=&quot;yes&quot;
BROWSERS=(firefox)
</code></pre>
<h3 id="cache-anything-to-RAM"><a href="#cache-anything-to-RAM" class="headerlink" title="cache anything to RAM"></a>cache anything to RAM</h3><p>the benefit of <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Anything-sync-daemon">asd</a> is that it can speed the access of some <strong>folder</strong> (not file) and makes the file to store in physical possible.</p>
<pre><code class="shell">sudo pacman -S anything-sync-daemon
</code></pre>
<p>edit <code>/etc/asd.conf</code></p>
<pre><code class="shell"># put the folder which i want to load to memory
WHATTOSYNC=(
&#39;/home/healer/.oh-my-zsh/his&#39;
)
</code></pre>
<blockquote>
<p>Note:</p>
<p>by default <code>.zsh_history</code> stores in <code>$HOME</code>, but asd can only sync folders. And <a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/265957/zsh-histfile-still-read-from-zsh-history">there is a way</a> to set history to another folder: define <code>HISTFILE</code> variable before oh-my-zsh in <code>~/.zshrc</code></p>
<pre><code class="shell">HISTFILE=~/.oh-my-zsh/his/.zsh_history
source $ZSH/oh-my-zsh.sh
</code></pre>
</blockquote>
<p>at last enable asd service at boot time and start asd</p>
<pre><code class="shell">sudo systemctl enable --now asd
</code></pre>
<h3 id="screen-rotation"><a href="#screen-rotation" class="headerlink" title="screen rotation"></a>screen rotation</h3><p>use <code>xrandr</code> described in <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Tablet_PC#Screen_rotation">wiki page</a></p>
<pre><code class="shell"># add a key binding in xmonad
# output name can be find with xrandr
xrandr --output HDMI-A-0 --rotate left
xrandr --output HDMI-A-0 --rotate normal
</code></pre>
<h3 id="firefox-adds-on"><a href="#firefox-adds-on" class="headerlink" title="firefox adds-on"></a>firefox adds-on</h3><p>some useful adds-on</p>
<p><img src=".images/image-20210817102719051.png" alt="image-20210817102719051"></p>
<h3 id="burn-dvd"><a href="#burn-dvd" class="headerlink" title="burn dvd"></a>burn dvd</h3><p>I have to say that the idea why i want to use dvd is because of one youtuber called DT, he has a video told why he uses dvd still today, and i thought it is a perfect idea.</p>
<p>The main reason i use dvd is that can store long times without information lose, and has a feeling of old life in such a fast society.</p>
<p>there are two things need to be noticed:</p>
<ol>
<li>new blank DVD-R cannot be mounted, it needs to burn data first.</li>
<li>a toolset <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Optical_disc_drive#Burning">dvd+rw-tools</a> contains the tool <code>growisofs</code> which can burn data to DVD-R.</li>
</ol>
<pre><code class="shell"># install toolset
pacman -S dvd+rw-tools

# insert new DVD-R to DVD burn machine
# burn data to new DVD-R
growisofs -Z /dev/sr0 -R -J /some/files

# append data to DVD-R
growisofs -M /dev/dvd -R -J /more/files
</code></pre>
<p>after burning data to DVD-R we can mount it</p>
<pre><code class="shell">mount /dev/sr0 /mnt
</code></pre>
<h3 id="email-receiving"><a href="#email-receiving" class="headerlink" title="email receiving"></a>email receiving</h3><p><code>mutt</code> is a linux CLI application of email client. although GUI mail applications such as MailSpring, BlueMail are very friendly use, but the size of GUI packages are much bigger than CLI applications.</p>
<pre><code class="shell">sudo pacman -S mutt
</code></pre>
<p>mutt’s default configure can be set in <code>~/.config/mutt/muttrc</code></p>
<pre><code class="shell"># create local mail store loction and mutt configuration file
mkdir ~/.local/share/Mail ~/.config/mutt
touch ~/.config/mutt/muttrc
</code></pre>
<p><code>muttrc</code> configuration </p>
<pre><code class="shell"># RECEIVING EMAIL SETTING (IMAP)
# user and password
set imap_user       = 1025096440@qq.com
set imap_pass       = lcfqrejgdeggbcic
# address of colud mailbox
set folder          = imaps://1025096440@imap.qq.com/
set spoolfile       = +INBOX
# architure of cloud mailbox checking
mailboxes           = +INBOX +SENT
# receiving of sending file local store position
set folder          = &quot;$HOME/.local/share/Mail&quot;; set record=&quot;+sent&quot;
set imap_keepalive  = 300
set mail_check      = 5
set sort            = reverse-date

# SENDING EMAIL SETTING (SMAP)
# user name of sending from
set realname        = shutterbug
# address and password of sending from
set from            = $imap_user
set smtp_pass       = $imap_pass 
# cloud SMAP server address
set smtp_url        = smtps://1025096440@qq.com@smtp.qq.com
# use ssl enforce
set ssl_force_tls   = yes



# style and editor define
set arrow_cursor
#set folder_format=&quot;%2C %t %N %8s %d %f&quot;
set sidebar_short_path  = yes
set sidebar_width       = 22
set sidebar_visible     = yes
set sidebar_format      = &quot;%B%* %N/%S &quot;
set index_format=&quot;%3C %-5Z %&#123;%b %d      &#125; %-25.20L (%?l?%4l&amp;%4c?) %s&quot;
set editor          = vim
# html render with w3m
set mailcap_path    = $HOME/.config/mutt/mailcap
auto_view text/html
alternative_order text/plain text/html
# key binding
bind pager j next-line
bind pager k previous-line
bind attach,index,pager \CD next-page
bind attach,index,pager \CU previous-page
bind pager g top
bind pager G bottom
bind attach,index g first-entry
bind attach,index G last-entry
bind index,pager B sidebar-toggle-visible 
# color scheme
color hdrdefault blue black
color quoted blue black
color signature blue black
color attachment red black
color prompt brightmagenta black
color message brightred black
color error brightred black
color indicator red black 
color status brightgreen blue
color tree blue black
color normal white black
color markers red black
color search white black
color tilde brightmagenta black
color index blue black ~F
color index red black &quot;~N|~O&quot;
</code></pre>
<p>by default mutt cannot render html page, however we can use w3m to resolve it with the configuration file <code>$HOME/.config/mutt/mailcap</code></p>
<pre><code class="shell">text/html; w3m -I %&#123;charset&#125; -T text/html; copiousoutput;
</code></pre>
<p>we can type <code>mutt</code> to launch the email client use <code>space</code> key to open the content of email</p>
<p>sending email is little difference</p>
<pre><code class="shell"># launch text editor to edit message
mutt -s &#39;tile&#39; user@email.com

# or message from file content
mutt -s &quot;Subject&quot; somejoeorjane@someserver.com &lt; /var/log/somelog

# or append some file
mutt -s &quot;Subject&quot; somejoeorjane@someserver.com -a somefile &lt; /tmp/sometext.txt
</code></pre>
<blockquote>
<p>Note:</p>
<p>change sidebar folder press <code>c</code>, then press <code>tab</code> twice</p>
</blockquote>
<h3 id="external-monitor-brightness"><a href="#external-monitor-brightness" class="headerlink" title="external monitor brightness"></a>external monitor brightness</h3><p>when i use a monitor display, i cannot adjust the brightness with <code>xbacklight</code> tool. today, i find the reason why i cannot adjust it <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/backlight#setpci">in this website</a>. simple to say, external monitor needs other tools to change brightness.</p>
<pre><code class="shell"># it need a kernel module to be loaded
sudo modprobe i2c-dev

# install a tool called ddcutil
sudo pacman -S ddcutil

# then find which feature can adjust the brightness
sudo ddcutil capabilities |grep -i brightness


➜  acpi_video0 sudo ddcutil capabilities |grep -i brightness
   Feature: 10 (Brightness)
# i find it is 10, then i can adjust it
# 10 is the feature number
sudo ddcutil setvcp 10 30
# increase/decrease
sudo ddcutil setvcp 10 + 5
sudo ddcutil setvcp 10 - 5

# and check it
sudo ddcutil getvcp 10
</code></pre>
<p>finally i need the module to be loaded at boot time, we can add this feature as describe <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Kernel_module#Automatic_module_loading_with_systemd">in this website</a>. </p>
<pre><code class="shell">sudo touch /etc/modules-load.d/i2c-dev.conf
sudo echo i2c_dev &gt; /etc/modules-load.d/i2c-dev.conf
</code></pre>
<p>change <code>ddcutil</code> permission to let normal user can execute it</p>
<pre><code class="shell"># setuid can make normal user execute some file with the file&#39;s owner permission
sudo chmod u+s /usr/bin/ddcutil
</code></pre>
<p>then add shortcut to xmonad</p>
<pre><code class="haskell">((mod1Mask, xK_F6), spawn &quot;ddcutil setvcp 10 - 5&quot;)
((mod1Mask, xK_F8), spawn &quot;ddcutil setvcp 10 + 5&quot;)
</code></pre>
<h2 id="command-software-usage"><a href="#command-software-usage" class="headerlink" title="command/software usage"></a>command/software usage</h2><p>common command and software usage.</p>
<h3 id="journal"><a href="#journal" class="headerlink" title="journal"></a>journal</h3><p>journal is the logging system of systemd. default log location in <code>/var/log/journal</code>. in default setting the size of log will increate until 10% of total disk.</p>
<pre><code class="shell"># we can change the default setting, unit Mib
vim /etc/systemd/journald.conf

SystemMaxFiles=10
</code></pre>
<p>we can clean by hand</p>
<pre><code class="shell"># show disk usage
journalctl --disk-usage

# clean 
# vacuum cannot remove active or unarchived file. and rotate can archive active file.
journalctl --rotate --vacuum-size=1
journalctl --rotate --vacuum-time=1
</code></pre>
<h3 id="format-convert"><a href="#format-convert" class="headerlink" title="format convert"></a>format convert</h3><blockquote>
<p>note:</p>
<p>   utf-8 and gbk are both character encoding, and they are differect, we need to know utf-8 is much better than gbk, for utf-8 support more.</p>
</blockquote>
<p>if software cannot show text normally, we have two method to repair it.</p>
<ol>
<li>change software setting to display normally if software has the ability</li>
<li>change file encoding to which software use with tools</li>
</ol>
<p>for example:</p>
<p>as we know windows file encode with gbk, and it cannot display normally in linux vim editor in default, we can add vim setting to support it</p>
<pre><code class="shell">vim ~/.vimrc

set fileencodings=utf-8,gb18030,gbk
</code></pre>
<p>another method is change file encoding</p>
<pre><code class="shell">iconv -f gbk -t utf-8 1.txt -o 2.txt
</code></pre>
<ul>
<li><code>-f</code> from</li>
<li><code>-t</code> to</li>
<li><code>-o</code> output file</li>
</ul>
<h3 id="qv2ray-amp-v2ray-core"><a href="#qv2ray-amp-v2ray-core" class="headerlink" title="qv2ray &amp; v2ray-core"></a>qv2ray &amp; v2ray-core</h3><blockquote>
<p>Note:</p>
<ol>
<li>buy proxy, i buy though iGG. with iGG i can get scribe url</li>
<li>install software to config scribe url</li>
</ol>
</blockquote>
<p>because yay cannot download software from github, most time will failed to install some software. so need to install a software to proxy.</p>
<p>Qv2ray is a v2ray client gui tool for configing v2ray. and v2ray-core is the core of v2ray.</p>
<ul>
<li><p>download</p>
<p>download <a target="_blank" rel="noopener" href="https://github.com/Qv2ray/Qv2ray/releases">qv2ray</a> , i choose appimage, it can be run directory without install</p>
<p>download <a target="_blank" rel="noopener" href="https://github.com/v2fly/v2ray-core/releases">v2ray-core</a>, a 64bit zip file</p>
</li>
<li><p>configure qv2ray</p>
<p>follow <a target="_blank" rel="noopener" href="https://iguge.app/helper/?p=257">this website</a></p>
<pre><code class="shell"># create a app folder
mkdir .local/apps/qv2ray
# move appimage to qv2ray
mv Downloads/Qv2ray.v2.6.3.linux-x64.AppImage .local/apps/qv2ray
# then run this app
chmod u+x ./Qv2ray.v2.6.3.linux-x64.AppImage
./Qv2ray.v2.6.3.linux-x64.AppImage

# create v2ray-core folder
mkdir .local/apps/qv2ray/vcore
# unzip v2ray-core to new folder
unzip Download/v2ray-linux-64.zip -d .local/apps/qv2ray/vcore
# then configure in gui app
</code></pre>
<p>change file location and click “ok”</p>
<p><img src=".images/image-20210505013851544.png" alt="image-20210505013851544"></p>
</li>
<li><p>and follow website to add scribe address, then we can use proxy to visit website</p>
</li>
<li><p>the way to allow yay(git) to proxy follow <a target="_blank" rel="noopener" href="https://iguge.app/helper/?p=152">this website</a></p>
<pre><code class="shell">-- git
# http https
git config --global http.proxy http://127.0.0.1:8889
git config --global https.proxy https://127.0.0.1:8889
# socks5
git config --global http.proxy socks5://127.0.0.1:1089
git config --global https.proxy socks5://127.0.0.1:1089
</code></pre>
<p>– speed github</p>
</li>
</ul>
<h1 id="configure-http-https-proxy"><a href="#configure-http-https-proxy" class="headerlink" title="configure http https proxy"></a>configure http https proxy</h1><p>  git config –global http.<a target="_blank" rel="noopener" href="https://github.com.proxy/">https://github.com.proxy</a> <a target="_blank" rel="noopener" href="https://127.0.0.1:8889/">https://127.0.0.1:8889</a><br>  git config –global https.<a target="_blank" rel="noopener" href="https://github.com.proxy/">https://github.com.proxy</a> <a target="_blank" rel="noopener" href="https://127.0.0.1:8889/">https://127.0.0.1:8889</a></p>
<h1 id="configure-socks5-proxy-this-is-what-yay-used"><a href="#configure-socks5-proxy-this-is-what-yay-used" class="headerlink" title="configure socks5 proxy, this is what yay used"></a>configure socks5 proxy, this is what yay used</h1><p>  git config –global http.<a target="_blank" rel="noopener" href="https://github.com.proxy/">https://github.com.proxy</a> socks5://127.0.0.1:1089<br>  git config –global https.<a target="_blank" rel="noopener" href="https://github.com.proxy/">https://github.com.proxy</a> socks5://127.0.0.1:1089</p>
<pre><code>the port we can find in gui configure

![image-20210505014434826](.images/image-20210505014434826.png)

- after configure, if i need to use yay, first choose a proxy and enable it, then use yay to download software, speed fast.

![image-20210505015404595](.images/image-20210505015404595.png)

- at last create a soft link to appimage

```shell
cd .local/bin
ln -sf ~/.local/apps/qv2ray/Qv2ray.v2.7.0-pre2.linux-x64.AppImage v2ray
</code></pre>
<pre><code class="shell"># usage: such as reconnect last connect
v2ray --reconnect
</code></pre>
<h3 id="terminal-proxy"><a href="#terminal-proxy" class="headerlink" title="terminal proxy"></a>terminal proxy</h3><p>above v2ray setting can allow git / github /browser proxy, but terminal cannot. below will show how to proxy terminal.</p>
<p>the setting can work correctly depend on above v2ray work fine</p>
<pre><code class="shell">sudo pacman -S proxychains-ng 
</code></pre>
<p>modify configure file</p>
<pre><code class="shell"># add this to file end
#socks4         127.0.0.1 9050
http    127.0.0.1 8889
socks5  127.0.0.1 1089
</code></pre>
<p>proxy terminal</p>
<pre><code class="shell">proxychains bash
</code></pre>
<p><img src=".images/image-20210505021635397.png" alt="image-20210505021635397"></p>
<p><img src=".images/image-20210505021703497.png" alt="image-20210505021703497"></p>
<h3 id="cronie-notify"><a href="#cronie-notify" class="headerlink" title="cronie notify"></a>cronie notify</h3><p>i use cronie to edit time task</p>
<pre><code class="shell">pacman -S cronie
</code></pre>
<p>in default, cronie use <code>vi</code> to edit task. we can change it vim</p>
<pre><code class="shell">EDITOR=vim crontab -e
</code></pre>
<p>there are some principles we need to follow:</p>
<ol>
<li>message cannot send to dbus directorily</li>
<li>crontab don’t know system variables, we need to announce it</li>
<li>stdout not support pipline</li>
<li>cannot recognize local command such as <code>~/.local/bin</code></li>
</ol>
<p>in order to use notify and sound we need announce variables either in script or crontab command</p>
<pre><code class="shell">## sound variable
# check variable&#39;s value
echo $XDG_RUNTIME_DIR
# 1. write in script
export XDG_RUNTIME_DIR=/run/user/1000

# 2. or announce in crontab
env XDG_RUNTIME_DIR=/run/user/1000


## nofify
# check variable&#39;s value
echo $DBUS_SESSION_BUS_ADDRESS
# 1. write in script
export DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus
# 2. or announce in crontab
env DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus
</code></pre>
<p>we can write crontab like this:</p>
<pre><code class="shell">* * * * * env DBUS_SESSION_BUS_ADDRESS=unix:path=&quot;/run/user/1000/bus&quot; XDG_RUNTIME_DIR=&quot;/run/user/1000&quot; dunstify &quot;`~/.local/bin/filesync`&quot;
</code></pre>
<p>however, there is a problem. if we send nothing, the dunst will also show a none notify. we can fix it by writing command in script, and then execute script</p>
<pre><code class="shell">function log()&#123;
    exec 1&gt;&amp;4
    if [ $# -gt 0 ];then
        info=$@
        echo &quot;[$(date &#39;+%F %H:%M&#39;)] :: $info&quot;
        # send notify in script
        dunstify &quot;[$(date &#39;+%F %H:%M&#39;)] :: $info&quot;
    fi
    exec 1&gt;/dev/null
    unset info
&#125;
</code></pre>
<p>then execute script with crontab</p>
<pre><code class="shell">* * * * * env DBUS_SESSION_BUS_ADDRESS=unix:path=&quot;/run/user/1000/bus&quot; XDG_RUNTIME_DIR=&quot;/run/user/1000&quot; ~/.local/bin/filesync
</code></pre>
<h3 id="oneko"><a href="#oneko" class="headerlink" title="oneko"></a>oneko</h3><p>oneko is a application that displays a cute cat chases cursor.</p>
<pre><code class="shell"># AUR install
paru -S oneko

# add to xmonad startup app
spawnOnce &quot;oneko &amp;&quot;
</code></pre>
<h3 id="downgrade-application"><a href="#downgrade-application" class="headerlink" title="downgrade application"></a>downgrade application</h3><p>sometimes we want to use an old version application, we can use <code>downgrade</code> command to downgrade.</p>
<pre><code class="shell">pacman -S downgrade

# downgrade a software
downgrade app_name
# then choose a number to downgrade
</code></pre>
<h2 id="使用shoadowsocks上google"><a href="#使用shoadowsocks上google" class="headerlink" title="使用shoadowsocks上google"></a>使用shoadowsocks上google</h2><p>安装shadowsocks代理以及proxychains协议转换</p>
<pre><code class="shell">sudo pacman -S proxychains-ng shadowsocks
</code></pre>
<p>修改proxychains配置文件</p>
<pre><code class="shell">sudo vim /etc/proxychains.conf
#socks4         127.0.0.1 9050        #注释
socks5  127.0.0.1 1080                #添加
</code></pre>
<p>添加本地域名解析</p>
<pre><code class="shell">sudo vim /etc/hosts
#添加
104.31.74.55  youneed.win
104.31.74.54  www.youneed.win
</code></pre>
<p><em>添加脚本变量路径</em></p>
<pre><code class="shell">vim .xinitrc
export PATH=$PATH:~/.local/bin
</code></pre>
<p>在<code>~/.local/bin</code>下建立软链接，指向脚本</p>
<pre><code class="shell">cd ~/.local/bin
ln -s ~/Documents/script/shell/shadowshocks.sh sslink
</code></pre>
<p>运行脚本启动代理</p>
<pre><code class="shell">proxychains firefox        #浏览器代理
proxychains bash        #终端代理
</code></pre>
<h2 id="安装virtualbox"><a href="#安装virtualbox" class="headerlink" title="安装virtualbox"></a>安装virtualbox</h2><pre><code class="shell">#由于使用的是linux内核，所以选择virtualbox-host-modules-arch 
sudo pacman -S virtualbox virtualbox-host-modules-arch 
</code></pre>
<p>在启动虚拟机之前，需要加载模块</p>
<pre><code class="shell">modprobe vboxdrv
</code></pre>
<p>启动virtualbox的几种方式：</p>
<p>1.GUI图形界面的启动，这也是大部分时候都在使用的方式，即运行virtualbox软件</p>
<p>2.命令启动，即使用命令无界面启动。后来发现这种方式启动和xmonad很搭，因为不会存在热键冲突的问题，那么xmonad中的所有窗口操作的快捷键依然有效。</p>
<pre><code class="shell">vboxsdl --startvm &#39;kali linux&#39;        #由于系统名字中有空格，所以要使用引号
</code></pre>
<p>3.同样是命令启动，但这种大多数时候是作为服务器使用的方式，即没有任何界面，只能通过ssh去连接主机（就像在windows中使用xshell一个意思）</p>
<pre><code class="shell">vboxheadless -s &#39;kali linux&#39;
</code></pre>
<h2 id="解决xorg问题"><a href="#解决xorg问题" class="headerlink" title="解决xorg问题"></a>解决xorg问题</h2><p>自从安装系统之后就发现一个问题，那就是xorg每次启动都要花个20多秒。所以首先是查看日志</p>
<pre><code class="shell">#xorg的日志在家目录下
vim .local/share/xorg/Xorg.0.log
#然后查看EE报错的地方，发现每次都是在启动nouveau驱动的时候卡了20多秒，然后启动失败了
#原因是我没有安装nouveau驱动，没有安装的原因就是安装之后启动倒是挺迅速的，但是退出xorg之后，或者想要关机的时候就会卡住。
#我想为什么就不能让它不去检测这个驱动呢？终于google到了答案：就是强制让xorg使用intel显卡，而忽略n卡

cd /etc/X11/xorg.conf.d/
touch nonvidia.conf
#添加如下代码：
Section &quot;Device&quot;
    Identifier  &quot;Intel Card&quot;
    Driver      &quot;intel&quot;
EndSection

Section &quot;Device&quot;
    Identifier  &quot;Nvidia Card&quot;
    Driver      &quot;nouveau&quot;
EndSection

Section &quot;Screen&quot;
    Identifier  &quot;My Screen&quot;
    Device      &quot;Intel Card&quot;
EndSection
</code></pre>
<p>然后reboot，startx，果然一下子就打开了图形界面，虽然查看了一下日志，依然有报错，但是它直接跳过之后的等待以及检测了。以上介绍在wiki上也有讲，只是我不知道咋写啊。这也算是基本完成了系统安装以及之后的错误修复了吧！</p>
<h2 id="安装系统之后博客迁移"><a href="#安装系统之后博客迁移" class="headerlink" title="安装系统之后博客迁移"></a>安装系统之后博客迁移</h2><p>安装必要软件</p>
<pre><code class="shell">#这些都要安装
sudo pacman -S git nodejs npm
sudo npm install -g hexo-cli
npm install --save hexo-deployer-git
npm audit fix
npm audit fix --force
npm install hexo-generator-searchdb --save
</code></pre>
<p>当然我又安装了这个加密插件，结果我错了</p>
<pre><code class="shell">npm install --save hexo-blog-encrypt    #然后我哭了
</code></pre>
<p>搞了半天老是报错，什么tostring不能为空，我的密码明明有啊，查看了一下js配置文件，发现确实有password.tostring()这个</p>
<p>然后我用数字做密码试了一下不报错，但是我之前加密的文章全部没加密了？我觉得这是一个bug，至少前面应该做一下判断。所以去你的加密，索性不用了，然后一切都好了。</p>
<pre><code class="shell">ssh-keygen
cat ~/.ssh/id_rsa.pub
</code></pre>
<p>然后在github设置中将sshkey添加进去</p>
<p>当然这后面还有两步，如果没有这两步，推送的时候会提示的</p>
<pre><code class="shell">git config --global user.email &quot;2935549510@qq.com&quot;
git config --global user.name &quot;narcissus&quot;
</code></pre>
<p>再编译，推送</p>
<pre><code class="shell">hexo g
hexo d
</code></pre>
<h2 id="与Android手机连接"><a href="#与Android手机连接" class="headerlink" title="与Android手机连接"></a><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Media_Transfer_Protocol#Android_File_Transfer">与Android手机连接</a></h2><p>这里是使用了USB与手机连接</p>
<pre><code class="shell">sudo pacman -S android-file-transfer    #安装软件
</code></pre>
<p>手机通过USB与电脑连接，同时开启MTP传输。</p>
<pre><code class="shell">sudo aft-mtp-mount /mnt                    #挂载
</code></pre>
<p>然后就可以直接进入<code>/mnt</code>目录查看手机中的文件了</p>
<hr>
<h2 id="更新key失败"><a href="#更新key失败" class="headerlink" title="更新key失败"></a>更新key失败</h2><p>加入archlinuxcn源后，下载archlinuxcn-keyring时失败。</p>
<pre><code class="shell"># 删除gpg数据库
rm -rf /etc/pacman.d/gunpg
# 重新获取
pacman-key --init
pacman-key --populate
pacman-key --refresh-keys
pacman -Syu
</code></pre>
<p>另外一个解决方法是通过调整时间，出问题的根本原因在于时间不一致，但是这次时间看似都正常，因此用第一种方法解决了</p>
<pre><code class="shell"># 查看系统时间
date
# 查看硬件时钟
hwclock --show
# 修改硬件时钟
timedatectl set-time &quot;2019-11-24 09:56:00&quot;
# 重新更新
pacman -Syu
</code></pre>
<h2 id="discuss"><a href="#discuss" class="headerlink" title="discuss"></a>discuss</h2><p>some problems i meet while installing the system.</p>
<h3 id="cannot-find-the-grub-info-in-bios"><a href="#cannot-find-the-grub-info-in-bios" class="headerlink" title="cannot find the grub info in bios"></a>cannot find the grub info in bios</h3><p>this time i installed system in msi, grub installation and configuration were right, but cannot find the grub in bios. </p>
<p>i know the boot info was stored in NVRAM, so i find wheather it has the boot info with my archlinux.</p>
<pre><code class="shell">efibootmgr -v
</code></pre>
<p> there has nothing info of my archlinux, so i added it by myself.</p>
<pre><code class="shell"># the efi partition is /dev/sda1 and efi installed in /boot/efi with directory /boot/efi/EFI/GRUB/grubx64.efi
efibootmgr --create --disk /dev/sda --part 1 --loader /EFI/GRUB/grubx64.efi --label &quot;archlinux bootloader&quot; --verbose
</code></pre>
<p>then i checked weather it has the archlinux boot info, and got correct info</p>
<pre><code class="shell">efibootmgr -v

Boot0006* archlinux bootloader  PciRoot(0x0)/Pci(0x17,0x0)/Sata(2,65535,0)/HD(1,GPT,fd816945-085d-4dca-aabc-734244e1ff5f,0x800,0x31800)/File(\EFI\BOOT\BOOTX64.EFI)
</code></pre>
<p>however when i reboot the system, there has nothing what i added before.</p>
<p>at last i find the problem:</p>
<p><img src=".images/image-20210206170411522.png" alt="image-20210206170411522"></p>
<p>that’s why the info i added disappeard. so while installing the grub, i need add a <code>removable</code> parameter. and then the grub configure will rename to BOOTX and store in another directory where the UEFI firmware can recognize.</p>
<pre><code class="shell"># correctly command
grub-install --efi-directory=/boot/efi --bootloader-id=GRUB --removable
</code></pre>
<p> now the directory likes this:</p>
<pre><code class="shell">/boot/efi
└── EFI
    └── BOOT
        └── BOOTX64.EFI
</code></pre>
<p>the grub configure  producted before can be removed or leave it alone since it will not be used.</p>
<h3 id="xterm-or-ranger-cannot-show-icons"><a href="#xterm-or-ranger-cannot-show-icons" class="headerlink" title="xterm or ranger cannot show icons"></a>xterm or ranger cannot show icons</h3><p>sometimes while installing nerd-font and ranger plug-icons we may find terminal cannot show icons, and the problem was leaded by error system font  setting. we need to change whether the configure properly</p>
<pre><code class="shell">~ » cat /etc/locale.conf                                                                                                                                                                              ~  
LANG=en_US.UTF-8
</code></pre>
<h3 id="xterm-cannot-show-Chinese"><a href="#xterm-cannot-show-Chinese" class="headerlink" title="xterm cannot show Chinese"></a>xterm cannot show Chinese</h3><p>at first, checking whether we have setted the correct locale</p>
<pre><code class="shell"># make sure exist &quot;en_US.UTF-8&quot;
locale -a

# make sure have &quot;LANG=en_US.UTF-8&quot;
cat /etc/locale.conf

# if not run this
echo &quot;LANG=en_US.UTF-8&quot; &gt; /etc/locale.conf
# or use localectl
localectl set-locale LANG=en_US.UTF-8
</code></pre>
<p>if locale setting makes no effect, we need force xterm use utf8</p>
<pre><code class="shell"># add this to .Xresource

XTerm*locale: false
XTerm*utf8: true
</code></pre>
<p>run <code>xrdb .Xresource</code> to make effect of changes </p>
<h3 id="AMD-virtualize-failed"><a href="#AMD-virtualize-failed" class="headerlink" title="AMD virtualize failed"></a>AMD virtualize failed</h3><p>when use virtualbox to launch a virtual machine, there comes a error, it is leaded by disabled cpu virtual in bios which is in default.</p>
<p><strong>ERROR MSG:</strong> <code>AMD-V is disabled in the BIOS (or by the host OS) (VERR_SVM_DISABLED).</code></p>
<p><strong>FIX:</strong> enable <code>svm mode</code></p>
<p><img src=".images/MSI_SnapShot-1621141601481.bmp"></p>
<h3 id="yay-install-failed-with-strip-binary"><a href="#yay-install-failed-with-strip-binary" class="headerlink" title="yay install failed with strip binary"></a>yay install failed with strip binary</h3><p><strong>ERROR:</strong> <code>Cannot find the strip binary required for object file stripping.</code></p>
<p><strong>WHY:</strong> miss some application</p>
<p><strong>FIX:</strong> install <code>base-devel</code></p>
<h3 id="mirror-version-error"><a href="#mirror-version-error" class="headerlink" title="mirror version error"></a>mirror version error</h3><p><strong>ERROR:</strong> <code> error while loading shared libraries: libicui18n.so.69</code></p>
<p><strong>WHY:</strong> version problem</p>
<p><strong>FIX:</strong> uncomment community mirror and run system update: <code>pacman -Syu</code></p>
<h3 id="pycharm-error-in-xmonad"><a href="#pycharm-error-in-xmonad" class="headerlink" title="pycharm error in xmonad"></a>pycharm error in xmonad</h3><p>if in windows environment, it works fine. but in xmonad, there comes a error: <code>WARN - s.impl.EditorColorsManagerImpl - Cannot find scheme: Vibrant Ink from plugin: com.intellij.database</code>.</p>
<p>fixed by exporting a environment variable</p>
<pre><code class="shell">export _JAVA_AWT_WM_NONREPARENTING=1
</code></pre>
<p>in order to simply usage, write it with alias</p>
<pre><code class="shell">alias pycharm=&#39;export _JAVA_AWT_WM_NONREPARENTING=1 &amp;&amp; ~/pycharm-2019.3.3/bin/pycharm.sh &amp;&gt;/dev/null &amp;&#39;
</code></pre>
<h3 id="obs-cannot-record-microphone-sound"><a href="#obs-cannot-record-microphone-sound" class="headerlink" title="obs cannot record microphone sound"></a>obs cannot record microphone sound</h3><p>the default setting after installing obs-studio cannot record microphone. In a fact that it’s not the problem of obs, it is the error of system sound setting. The default system setting mutes the sound of microphone, we need install a software called <code>pavucontrol</code> to configure it.</p>
<p><strong>gui tool</strong></p>
<p><img src=".images/image-20210731235537332.png" alt="image-20210731235537332"></p>
<pre><code class="shell">pacman -S pavucontrol
</code></pre>
<p>click the icon to disable muting, then every thing works fine.</p>
<p><img src=".images/image-20210801000011984.png" alt="image-20210801000011984"></p>
<p><img src=".images/obs.gif" alt="obs"></p>
<p><strong>cli tool</strong></p>
<p>another method is install a cli tool, much light than gui tool.</p>
<pre><code class="shell"># install
pacman -S pulsemixer

# list all audio device
pulsemixer --list

# find the mute one and unmute it
pulsemixer --id &lt;source-2&gt; --unmute
</code></pre>
<h3 id="invalid-or-corrupted-package-pgp-signature"><a href="#invalid-or-corrupted-package-pgp-signature" class="headerlink" title="invalid or corrupted package(pgp signature)"></a>invalid or corrupted package(pgp signature)</h3><p>after adding china mirror to <code>pacman.conf</code> and running update, package install will meet <a target="_blank" rel="noopener" href="https://bbs.archlinux.org/viewtopic.php?id=233480">this problem</a></p>
<pre><code class="shell">error: jansson: signature from &quot;Eli Schwartz &lt;eschwartz@archlinux.org&gt;&quot; is marginal trust
:: File /var/cache/pacman/pkg/jansson-2.10-3-x86_64.pkg.tar.xz is corrupted (invalid or corrupted package (PGP signature)).
</code></pre>
<p>method to resolve the problem</p>
<pre><code class="shell"># eg:
pacman-key --list-sigs |rg &#39;Eli&#39;
pacman-key --delete 91FFE0700E80619CEB73235CA88E23E377514E00
pacman-key --populate archlinux
</code></pre>

  </div>
  <div id="gitalk-container"></div>
</div>

<script>
  
Fancybox.bind('[data-fancybox="fancybox-gallery-img"]', {
  dragToClose: true,
  Toolbar: true,
  closeButton: "top",
  Image: {
    zoom: true,
  },
  on: {
    initCarousel: (fancybox) => {
      const slide = fancybox.Carousel.slides[fancybox.Carousel.page];
      fancybox.$container.style.setProperty(
        "--bg-image",
        `url("${slide.$thumb.src}")`
      );
    },
    "Carousel.change": (fancybox, carousel, to, from) => {
      const slide = carousel.slides[to];
      fancybox.$container.style.setProperty(
        "--bg-image",
        `url("${slide.$thumb.src}")`
      );
    },
  },
});
</script>

<style>
    #noneimg img {
        display: none;
        z-index: 9999;
        /* width: 600px !important; */
        min-width: 0%;
        max-width: 90%;
        max-height: 80%;
        border-radius: 0px;
        position: fixed;
        box-shadow: 0 0 0px #c3c3c300 !important;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        margin: auto !important;
    }

    @media screen and (max-width:600px) {
        #noneimg img {
            max-width: 88%
        }
    }
</style>

    <div class="post-paging">
    
    <a href="/2022/04/23/learn-from-shield/">
        <div class="post-paging-last">
            <span>上一篇</span>
            <p>learn_from_shield</p>
        </div>
    </a>
    

    
</div>
</div>
		
<div class="footer">
	<div class="Copyright">
		©2022 By Joey. 主题：<a
			style="text-decoration: none;display: contents; color: #898F9F;"
			target="_blank" rel="noopener" href="https://github.com/79e/hexo-theme-quiet">Quiet</a>
	</div>
	<div class="contact">
		
		<a target="_blank" rel="noopener" href="https://github.com/79E/hexo-theme-quiet">
			<img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
		</a>
		
	</div>
</div>

<script src="/js/gotop.js"></script>


<style type="text/css">
    @media screen and (min-width: 600px) {
        .goTop>span {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            width: 40px;
            height: 40px;
            cursor: pointer;
            opacity: 0.8;
            background: rgba(18, 24, 58, 0.06);
            text-align: center;
            transition: border .5s;
            border: 1px solid rgba(18, 24, 58, 0.06);

            -moz-transition: border .5s;
            /* Firefox 4 */
            -webkit-transition: border .5s;
            /* Safari 和 Chrome */
            -o-transition: border .5s;
            /* Opera */
        }

        .goTop>span:hover {
            border: 1px solid #6680B3;
        }


        .goTop {
            position: fixed;
            right: 30px;
            bottom: 80px;
        }

        .goTop>span>svg {
            width: 20px;
            height: 20px;
            opacity: 0.7;
        }

    }

    @media screen and (max-width: 600px) {
        .goTop {
            display: none;
        }
    }
</style>
<div class="goTop" id="js-go_top">
    <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g>
                <path d="M13 12v8h-2v-8H4l8-8 8 8z"></path>
            </g>
        </svg>
    </span>
</div>
<script>
    $( '#js-go_top' )
	.gotoTop( {
		offset: 500,
		speed: 300,
		animationShow: {
			'transform': 'translate(0,0)',
			'transition': 'transform .5s ease-in-out'
		},
		animationHide: {
			'transform': 'translate(100px,0)',
			'transition': 'transform .5s ease-in-out'
		}
	} );
</script>


    <!-- Gitalk -->
    <script>
        const data = '{"clientID":"02b3c","clientSecret":"adfc7b4","repo":"gimment","owner":"duneng","admin":"duneng"}'
        const gitalk = new Gitalk({
            ...JSON.parse( data),
            id:location.pathname,
            distractionFreeMode:false
        })
        
        if(Boolean('true')){
            gitalk.render('gitalk-container')
        }
    </script>

<script>
	console.log('\n %c Hexo-Quiet 主题 %c https://github.com/79e/hexo-theme-quiet \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
</script>
	</body>
</html>

