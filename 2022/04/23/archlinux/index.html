<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="shutterbug">
    
    <title>
        
            archlinux |
        
        Sweet Diary
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.svg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"raw.githubusercontent.com","root":"/","language":"en","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":false,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.svg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/4.jpg","description":"the world you see is not about how they act but how we respond."},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":false},"code_copy":{"enable":false,"style":"default"},"pjax":{"enable":true},"lazyload":{"enable":false},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                Sweet Diary
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                CATEGORIES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                TAGS
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">CATEGORIES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">TAGS</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">archlinux</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.svg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">shutterbug</span>
                        
                            <span class="author-label">Lv4</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2022-04-23 15:10:56</span>
        <span class="mobile">2022-04-23 15:10</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/learn/">learn</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/archlinux/">archlinux</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1 id="archlinux"><a href="#archlinux" class="headerlink" title="archlinux"></a>archlinux</h1><p>This document includes all the knowledges of using archlinux, from basic installing to daily using, all in one.</p>
<p>[TOC]</p>
<h2 id="base-system-install"><a href="#base-system-install" class="headerlink" title="base system install"></a>base system install</h2><p>first of all, we need to install the system. take it ease, step by  step, and you can own it.</p>
<h3 id="adjust-console-font"><a href="#adjust-console-font" class="headerlink" title="adjust console font"></a>adjust console font</h3><p>may be the default console font is too small, we can change it temporarily and make it much bigger.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/share/kbd/consolefonts</span><br><span class="line">setfont iso01-12x22.psfu.gz</span><br></pre></td></tr></table></figure>

<h3 id="connect-network"><a href="#connect-network" class="headerlink" title="connect network"></a>connect network</h3><ul>
<li><p>if plug in the cabel, use <code>dhcpcd</code> to get a ip address.</p>
</li>
<li><p>if use wireless, use <code>iwctl</code> to config the netwrok</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">the iwd.server is running by default</span></span><br><span class="line">iwctl</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">list network interface</span></span><br><span class="line">device list</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">start scaning network</span></span><br><span class="line">station device scan</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">show scan result</span></span><br><span class="line">station device get-networks</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">connect to one wifi</span></span><br><span class="line">station device connect ssid</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">get dynamic ip address</span></span><br><span class="line">dhcpcd</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="change-mirror-list"><a href="#change-mirror-list" class="headerlink" title="change mirror list"></a>change mirror list</h3><p>modify <code>/etc/pacman.d/mirrorlist</code> file, move China mirror list to the head.</p>
<blockquote>
<p>note: this configure will sync to new installed system.</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">head /etc/pacman.d/mirrorlist</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># China</span></span></span><br><span class="line">Server = http://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch</span><br><span class="line">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch</span><br><span class="line">Server = http://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch</span><br><span class="line">Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch</span><br><span class="line">Server = http://mirrors.163.com/archlinux/$repo/os/$arch</span><br><span class="line">Server = http://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch</span><br><span class="line">Server = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch</span><br></pre></td></tr></table></figure>

<h3 id="update-system-clock"><a href="#update-system-clock" class="headerlink" title="update system clock"></a>update system clock</h3><p>enable ntp to ensure the system clock is accurate.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timedatectl set-ntp true</span><br></pre></td></tr></table></figure>

<h3 id="partition-disk"><a href="#partition-disk" class="headerlink" title="partition disk"></a>partition disk</h3><p>we can use tools like <code>cfdisk</code> ,<code>parted</code> to parted disk. whatever tool we choose, there are some things need to be done the same.</p>
<ol>
<li>format entire disk with gpt table</li>
<li>one efi partition to install grub</li>
</ol>
<blockquote>
<p>note: efi partition cannot used as lvm part, lvm can only be recognized after grub loading.</p>
</blockquote>
<p>lvm example: </p>
<ul>
<li>esp: 100M</li>
<li>root(lvm): 30G</li>
<li>home(lvm):  last space</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">parted /dev/nvme0n1 mktable gpt</span><br><span class="line">parted /dev/nvme0n1 mkpart fat 0% 100Mib</span><br><span class="line">parted /dev/nvme0n1 mkpart ext4 100Mib 100%</span><br><span class="line"></span><br><span class="line">pvcreate /dev/nvme0n1p2</span><br><span class="line">vgcreate linux /dev/nvme0n1p2</span><br><span class="line">lvcreate -L 30G linux -n root </span><br><span class="line">lvcreate -l +100%FREE linux -n home</span><br><span class="line"></span><br><span class="line">mkfs.fat -F 32 /dev/nvme0n1p1</span><br><span class="line">mkfs.ext4 /dev/linux/root</span><br><span class="line">mkfs.ext4 /dev/linux/home</span><br></pre></td></tr></table></figure>

<h3 id="mount-partition-and-install-system"><a href="#mount-partition-and-install-system" class="headerlink" title="mount partition and install system"></a>mount partition and install system</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mount root and home partition</span></span><br><span class="line">mount /dev/linux/root /mnt</span><br><span class="line">mkdir /mnt/home &amp;&amp; mount /dev/linux/home /mnt/home</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">chroot</span> mnt and install base system</span></span><br><span class="line">pacstrap /mnt base linux linux-firmware lvm2 vim</span><br></pre></td></tr></table></figure>

<h3 id="generate-mount-configure"><a href="#generate-mount-configure" class="headerlink" title="generate mount configure"></a>generate mount configure</h3><blockquote>
<p>note: efi partition not need to be mount.</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span><br></pre></td></tr></table></figure>

<h3 id="chroot-new-system"><a href="#chroot-new-system" class="headerlink" title="chroot new system"></a>chroot new system</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arch-chroot /mnt</span><br></pre></td></tr></table></figure>

<h3 id="timezone"><a href="#timezone" class="headerlink" title="timezone"></a>timezone</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">hwclock --systohc</span><br></pre></td></tr></table></figure>

<h3 id="system-language"><a href="#system-language" class="headerlink" title="system language"></a>system language</h3><p>uncomment <code>/etc/locale.gen</code>  with <code>en_us.UTF-8</code> and <code>zh_CN.UTF-8</code> then run</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">locale-gen</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">set</span> default system language</span></span><br><span class="line">echo &quot;LANG=en_US.UTF-8&quot; &gt; /etc/locale.conf</span><br></pre></td></tr></table></figure>

<h3 id="network"><a href="#network" class="headerlink" title="network"></a>network</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">add hostname</span></span><br><span class="line">echo &quot;notebook&quot; &gt; /etc/hostname</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">add hosts</span></span><br><span class="line">echo &quot;</span><br><span class="line">127.0.0.1    localhost</span><br><span class="line">::1        localhost</span><br><span class="line">127.0.1.1    hostname.localdomain    hostname</span><br><span class="line">&quot; &gt;&gt; /etc/hosts</span><br></pre></td></tr></table></figure>

<h3 id="initramfs"><a href="#initramfs" class="headerlink" title="initramfs"></a>initramfs</h3><blockquote>
<p>note: if we don’t use lvm, this step can be ignored.</p>
</blockquote>
<p>edit /etc/mkinitcpio.conf, add <code>lvm2</code> between <code>block</code> and <code>filesystems</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkinitcpio -P</span><br></pre></td></tr></table></figure>

<h3 id="install-netwrok-tool"><a href="#install-netwrok-tool" class="headerlink" title="install netwrok tool"></a>install netwrok tool</h3><p>we can choose iwd or netctl to configure network</p>
<ul>
<li>iwd</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S iwd dhcpcd</span><br><span class="line">systemctl enable iwd</span><br></pre></td></tr></table></figure>

<ul>
<li>netctl</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S netctl wpa_supplicant dialog  dhcpcd</span><br></pre></td></tr></table></figure>

<h3 id="install-grub"><a href="#install-grub" class="headerlink" title="install grub"></a>install grub</h3><p>first mount efi partition to <code>/boot/efi</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir /boot/efi</span><br><span class="line">mount /dev/nvme0n1p1 /boot/efi</span><br><span class="line"></span><br><span class="line">pacman -S grub efibootmgr</span><br><span class="line">grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=GRUB --removable</span><br><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>

<h3 id="set-root-passwd"><a href="#set-root-passwd" class="headerlink" title="set root passwd"></a>set root passwd</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd root</span><br></pre></td></tr></table></figure>

<h3 id="umount-and-reboot"><a href="#umount-and-reboot" class="headerlink" title="umount and reboot"></a>umount and reboot</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exit and umount -R /mnt</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>

<h2 id="general-configure"><a href="#general-configure" class="headerlink" title="general configure"></a>general configure</h2><p>the step below is general configure, that is to say it’s basic and cannot be ignored.</p>
<h3 id="connect-network-1"><a href="#connect-network-1" class="headerlink" title="connect network"></a>connect network</h3><ul>
<li><p>we can use <code>iwd</code> to set wifi connection, only need using <code>dhcpcd</code> to get a dynamic ip address</p>
<p><strong>static ip</strong></p>
<p>create a config file  <code>/etc/iwd/main.conf</code> to enable static network config by adding</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/iwd/main.conf</span><br><span class="line"></span><br><span class="line">[General]</span><br><span class="line">EnableNetworkConfiguration=true</span><br></pre></td></tr></table></figure>

<p>add static ip address config to <code>wifi_name.psk file</code> under <code>/var/lib/iwd</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;&gt; /var/lib/iwd/qiyue.psk</span><br><span class="line"></span><br><span class="line">[IPv4]</span><br><span class="line">Address=192.168.31.31</span><br><span class="line">Netmask=255.255.255.0</span><br><span class="line">Gateway=192.168.31.1</span><br></pre></td></tr></table></figure></li>
<li><p>if we use <code>netctl</code>(wifi/ethernet), we can use a gui tool named wifi-menu to connect network</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo wifi-menu</span><br></pre></td></tr></table></figure>

<p>when we connect correct there will be a configure file in /etc/netctl, in order to auto connect network, we need enable it.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/netctl</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">it must be file name not localtion path and without super priviledge</span></span><br><span class="line">netctl enable confirure_file_name</span><br></pre></td></tr></table></figure>

<p><strong>static ip</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/netctl/examples/wireless-wpa-static /etc/netctl</span><br><span class="line"></span><br><span class="line">Description=&#x27;A simple WPA encrypted wireless connection using a static IP&#x27;</span><br><span class="line">Interface=wlo1</span><br><span class="line">Connection=wireless</span><br><span class="line">Security=wpa</span><br><span class="line">ESSID=&#x27;wifi-essid&#x27; # modify</span><br><span class="line">Key=&#x27;password&#x27; # modify</span><br><span class="line">IP=static</span><br><span class="line">Address=&#x27;192.168.0.104/24&#x27; # modify</span><br><span class="line">Gateway=&#x27;192.168.0.1&#x27;    # modify</span><br><span class="line">DNS=(&#x27;114.114.114.114&#x27;) # modify</span><br></pre></td></tr></table></figure>

<p>some command of netctl</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netctl disable wireless-wpa-static-old</span><br><span class="line">netctl enable wireless-wpa-static</span><br><span class="line">netctl restart wireless-wpa-static</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="install-some-software"><a href="#install-some-software" class="headerlink" title="install some software"></a>install some software</h3><p>if there comes some error message shows cannot find package, we need to config China repository first.</p>
<ul>
<li><p>man page</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S man-db man-pages texinfo</span><br></pre></td></tr></table></figure></li>
<li><p>base-devel</p>
<p>it includes <code>sudo, gcc, make, sed, grep, which</code> and etc usual command</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S base-devel</span><br></pre></td></tr></table></figure></li>
<li><p>install doas or sudo</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S sudo</span><br><span class="line">pacman -S doas</span><br></pre></td></tr></table></figure>

<p>then create a file <code>/etc/doas.conf</code> and write something to it</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;permit nopass :wheel&quot; &gt; /etc/doas.conf</span><br></pre></td></tr></table></figure></li>
<li><p>xmonad window manager</p>
<p>xmonad window manager uses xterm by default.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xmonad xmonad-contrib xmobar xterm</span><br></pre></td></tr></table></figure></li>
<li><p>poybar</p>
<p>i use it with xmonad as default status bar</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S polybar</span><br></pre></td></tr></table></figure></li>
<li><p>input method</p>
<p>install all of packages of fcitx5-im, fcitx5-material-color is the skin which really likes windows 10</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S fcitx5-im fcitx5-material-color fcitx5-rime</span><br></pre></td></tr></table></figure></li>
<li><p>transparent tools</p>
<p>transset-df can transparent the xterm</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S transset-df</span><br></pre></td></tr></table></figure></li>
<li><p>animate action</p>
<p>picom has some good effect like fade in fade out and etc. and aur’s <a class="link"   target="_blank" rel="noopener" href="https://github.com/jonaburg/picom" >picom-jonaburg-git<i class="fas fa-external-link-alt"></i></a> has motion effect</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S picom-jonaburg-git</span><br></pre></td></tr></table></figure>

<p><img src=".images/picom-motion.gif"></p>
</li>
<li><p>package search tool</p>
<p>we can use <code>dmenu</code> or <code>rofi</code>, i use dmenu much more, but rofi can help me to find how many applications i have ever installed and which one should i launch once a time forgot its name with some keywords.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S dmenu rofi</span><br></pre></td></tr></table></figure></li>
<li><p>font</p>
<p>proper font will make some software works well like xterm and polybar</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">the font can show icons <span class="keyword">in</span> terminal, and font <span class="keyword">for</span> vscode</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cascadia and Firacode become my favorite fonts now, even use it as system application font</span></span><br><span class="line">pacman -S nerd-fonts-iosevka nerd-fonts-fira-code nerd-fonts-cascadia-code</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">the two fonts can show chinese and korean proper <span class="keyword">in</span> polybar</span></span><br><span class="line">pacman -S adobe-source-han-sans-cn-fonts adobe-source-han-sans-kr-fonts </span><br></pre></td></tr></table></figure></li>
<li><p>notify tool</p>
<p>it can show notify message in desktop with highly configurable.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S dunst</span><br></pre></td></tr></table></figure></li>
<li><p>clip tool</p>
<p>it is a clip tool with great useage, such as clip standard output, one file even though an image</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xclip</span><br></pre></td></tr></table></figure></li>
<li><p>youdao dictionary</p>
<p>i have wrote a shell translate copy sentense which depends on this</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S ydcv-rs-git</span><br></pre></td></tr></table></figure></li>
<li><p>screenshot</p>
<p>useful screenshot tool</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S flameshot</span><br></pre></td></tr></table></figure></li>
<li><p>file manager</p>
<p>w3m is a plug in to show photo</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S ranger w3m</span><br></pre></td></tr></table></figure></li>
<li><p>download tool</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S wget curl</span><br></pre></td></tr></table></figure></li>
<li><p>audio and video player</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S mpg123 mplayer</span><br></pre></td></tr></table></figure></li>
<li><p>performance monitor</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pacman -S glances htop neofetch</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">htim is a replace of htop with vim typle keybing, after install it, <span class="built_in">type</span> htop as usual</span></span><br><span class="line">yay -S htim</span><br></pre></td></tr></table></figure></li>
<li><p>browser</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S firefox</span><br></pre></td></tr></table></figure></li>
<li><p>writer</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">use marktext-git instead of typora, since typora is not open <span class="built_in">source</span></span></span><br><span class="line">pacman -S marktext-git</span><br></pre></td></tr></table></figure></li>
<li><p>code</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S visual-studio-code-bin</span><br></pre></td></tr></table></figure></li>
<li><p>screen capture</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S obs-studio</span><br></pre></td></tr></table></figure></li>
<li><p>sql client tool</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S dbeaver</span><br></pre></td></tr></table></figure></li>
<li><p>stickypad</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xpad</span><br></pre></td></tr></table></figure></li>
<li><p>chat</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S skypeforlinux-stable-bin</span><br></pre></td></tr></table></figure></li>
<li><p>gui dialog tool</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S yad</span><br></pre></td></tr></table></figure></li>
<li><p>simulate</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xdotool</span><br></pre></td></tr></table></figure></li>
<li><p>cli music player </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S cmus</span><br></pre></td></tr></table></figure></li>
<li><p>chinese date</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S cdate</span><br></pre></td></tr></table></figure></li>
<li><p>cpu information</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S cpufetch</span><br></pre></td></tr></table></figure></li>
<li><p>image viewer</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S gthumb</span><br></pre></td></tr></table></figure></li>
<li><p>wire sniff tool</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S wireshark</span><br></pre></td></tr></table></figure></li>
<li><p>fake like hackers tool</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmatrix no-more-secrets-git</span><br></pre></td></tr></table></figure></li>
<li><p>analysis disk usage</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S ncdu</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="add-user"><a href="#add-user" class="headerlink" title="add user"></a>add user</h3><p>install zsh shell first</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S zsh oh-my-zsh-git</span><br></pre></td></tr></table></figure>

<p>add user with wheel group and zsh as default shell</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -m -G wheel -s /bin/zsh username</span><br></pre></td></tr></table></figure>

<p>set passwd</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd username</span><br></pre></td></tr></table></figure>

<p>then adjust priviledges, such as sudo priviledge, run command without password</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">uncomment below <span class="keyword">in</span> /etc/sudoers</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">wheel ALL=(ALL) ALL</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">wheel ALL=(ALL) NOPASSWD: ALL</span></span><br></pre></td></tr></table></figure>

<h3 id="install-xorg"><a href="#install-xorg" class="headerlink" title="install xorg"></a>install xorg</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xorg</span><br></pre></td></tr></table></figure>

<p>in order to use <code>startx</code> to login to gui, we need to install xorg-xinit</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xorg-xinit</span><br></pre></td></tr></table></figure>

<h3 id="video"><a href="#video" class="headerlink" title="video"></a>video</h3><p>there comes three choice: </p>
<ul>
<li>intel with video card integrated</li>
<li>nvidia indepedent</li>
<li>amd video driver</li>
</ul>
<p>if we use intel video card, we need to install intel drive</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xf86-video-intel</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install package to adjust screen backlight, only intel works</span></span><br><span class="line">pacman -S xorg-xbacklight</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">we can also adjust screen backlight by hand, only intel works</span></span><br><span class="line">vim /sys/class/backlight/intel_backlight</span><br></pre></td></tr></table></figure>

<p>if we use nvidia video card, we need to install nvidia drive</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S nvidia</span><br></pre></td></tr></table></figure>

<p>amd gpu</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xf86-video-amdgpu</span><br></pre></td></tr></table></figure>

<h3 id="audio"><a href="#audio" class="headerlink" title="audio"></a>audio</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S pulseaudio pulseaudio-alsa pamixer</span><br></pre></td></tr></table></figure>

<p>when we installed those software, we can also not get voice, because it is mute by default. so we need enable it</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pamixer --unmute</span><br></pre></td></tr></table></figure>

<h2 id="personal-configure"><a href="#personal-configure" class="headerlink" title="personal configure"></a>personal configure</h2><p>why it is personal? because there are too many choice for user to choose, and i myself use the system serveral years and have wrote a shell script to copy the old configure file to the system without configure it step by step. so i will describe it in two part.</p>
<ul>
<li>one is auto config</li>
<li>another is step by step</li>
</ul>
<h3 id="auto-config"><a href="#auto-config" class="headerlink" title="auto config"></a>auto config</h3><p> all my backup file locate in <code>~/Data/linux</code>, so i need to copy old data to new machine. there are several ways to do the thing, such as a usb drive, use scp, startup a ftp in old machine…</p>
<p>and find a script named <code>filesync</code> in <code>linux/.local/bin</code> which we copied from old machine. and run:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./filesync install</span><br></pre></td></tr></table></figure>

<p> most of things will be done automaticly.</p>
<h3 id="step-by-step"><a href="#step-by-step" class="headerlink" title="step by step"></a>step by step</h3><p>the section below will show you how to config system step by step.</p>
<h4 id="install-AUR-package-installer"><a href="#install-AUR-package-installer" class="headerlink" title="install AUR package installer"></a>install AUR package installer</h4><p>using <code>yay</code> or <code>paru</code> we can download software in AUR. and suggest use paru, because it can search both pacman and aur at the same time.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S paru</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">pacman -S yay</span></span><br></pre></td></tr></table></figure>

<h4 id="add-China-repository"><a href="#add-China-repository" class="headerlink" title="add China repository"></a>add China repository</h4><p><strong>pacman repository</strong></p>
<p>write info to <code>/etc/pacman.conf</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[archlinuxcn]</span><br><span class="line">Server = https://mirrors.aliyun.com/archlinuxcn/$arch</span><br></pre></td></tr></table></figure>

<p>then refresh the database</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Sy</span><br></pre></td></tr></table></figure>

<p>we don’t need to install chinese keyring right now, just install it while there is a message shows we need to import some keyring.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S archlinuxcn-keyring</span><br></pre></td></tr></table></figure>

<p><strong>aur repository</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">if</span> use yay to download aur package</span></span><br><span class="line">yay --aururl &quot;https://aur.tuna.tsinghua.edu.cn&quot; --save</span><br></pre></td></tr></table></figure>

<p>this will create yay config in <code>~/.config/yay/config.json</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">can check config with commands</span></span><br><span class="line">yay -P -g</span><br></pre></td></tr></table></figure>

<h4 id="default-location-config"><a href="#default-location-config" class="headerlink" title="default location config"></a>default location config</h4><p>when we use xorg, there is a way to config where the data to be stored. even though not all the software follow the rules, but it is much better than no.</p>
<p>added to <code>~/.pam_environment</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">environment variable to <span class="built_in">set</span> xdg base directory</span></span><br><span class="line">XDG_CONFIG_HOME=/home/blueocean/.config</span><br><span class="line">XDG_CACHE_HOME=/home/blueocean/.cache</span><br><span class="line">XDG_DATA_HOME=/home/blueocean/.local/share</span><br><span class="line">XDG_DATA_DIRS=/usr/local/share:/usr/share</span><br><span class="line">XDG_CONFIG_DIRS=/etc/xdg</span><br></pre></td></tr></table></figure>

<h4 id="fcitx5-configure"><a href="#fcitx5-configure" class="headerlink" title="fcitx5 configure"></a>fcitx5 configure</h4><p>in order to make fcitx5 works well, there are several variable to be configed in <code>~/.pam_environment</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">environment variable <span class="keyword">for</span> fcitx5</span></span><br><span class="line">INPUT_METHOD  DEFAULT=fcitx5</span><br><span class="line">GTK_IM_MODULE DEFAULT=fcitx5</span><br><span class="line">QT_IM_MODULE  DEFAULT=fcitx5</span><br><span class="line">XMODIFIERS    DEFAULT=\@im=fcitx5</span><br></pre></td></tr></table></figure>

<p>add startup command to <code>~/.xinitrc</code> file :<code>fcitx5 &amp;</code> </p>
<p>short keys: <code>ctrl +alt +h </code> :enable/disable completion</p>
<p>if not simple chinese, use “ctrl+`” to change</p>
<h4 id="xmonad-config"><a href="#xmonad-config" class="headerlink" title="xmonad config"></a>xmonad config</h4><p>copy configure file <code>xmonad.hs</code>  to <code>~/.xmonad/</code></p>
<p>then compile it:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmonad --recompile</span><br></pre></td></tr></table></figure>

<p>write start xmonad command to <code>~/.xinitrc</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">if</span> home directory has no .xinitrc <span class="keyword">then</span> copy</span> </span><br><span class="line">[ ! -f ~/.xinitrc ] &amp;&amp; cp /etc/X11/xinit/xinitrc ~/.xinitrc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">write to the end of the file</span></span><br><span class="line">exec xmonad    </span><br></pre></td></tr></table></figure>

<h4 id="polybar-config"><a href="#polybar-config" class="headerlink" title="polybar config"></a>polybar config</h4><p>if there has no configure file, we can download configure from website</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ ! -f ~/.config/polybar/config ] &amp;&amp; touch ~/.config/polybar/config</span><br></pre></td></tr></table></figure>

<p>add start command in <code>~/.xinitrc</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh ~/.config/polybar/launch.sh</span><br></pre></td></tr></table></figure>

<h4 id="disable-touchpad"><a href="#disable-touchpad" class="headerlink" title="disable touchpad"></a>disable touchpad</h4><p>if we have a touchpad and don’t wanna use, we can disable it</p>
<p>first of all, install the command:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xorg-xinput</span><br></pre></td></tr></table></figure>

<p>add below to <code>~/.xinitrc</code> to disable it</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xinput | grep Touchpad | grep -E &#x27;=[0-9]&#123;2&#125;&#x27; -o | grep -E &#x27;[0-9]&#123;2&#125;&#x27; -o | xargs xinput disable</span><br></pre></td></tr></table></figure>

<h4 id="cursor-style"><a href="#cursor-style" class="headerlink" title="cursor style"></a>cursor style</h4><p>make sure xsetroot tools has been installed</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xorg-xsetroot</span><br></pre></td></tr></table></figure>

<p>write below to <code>~/.xinitrc</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xsetroot -cursor_name left_ptr</span><br></pre></td></tr></table></figure>

<h4 id="window-effect"><a href="#window-effect" class="headerlink" title="window effect"></a>window effect</h4><p>make sure picom has been installed, then write below to <code>~/.xinitrc</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">picom  --experimental-backends --config .config/picom/picom.conf -b</span><br></pre></td></tr></table></figure>

<h4 id="xterm-transparent"><a href="#xterm-transparent" class="headerlink" title="xterm transparent"></a>xterm transparent</h4><p>make sure transset-df has been installed, then write below to <code>~/.zshrc</code>. we can change transparent with <code>-m</code> parameter.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ -n &quot;$XTERM_VERSION&quot; ] &amp;&amp; transset-df -m 0.95 --id &quot;$WINDOWID&quot; --dec 0.1 &gt;/dev/null</span><br></pre></td></tr></table></figure>

<h4 id="ntfs-file-system-recognize"><a href="#ntfs-file-system-recognize" class="headerlink" title="ntfs file system recognize"></a>ntfs file system recognize</h4><p>in order to recognize windows file system, the tool need to be installed. and without it we cannot modify windows file by normal user.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pacman -S ntfs-3g</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mount example</span></span><br><span class="line">mount -t ntfs-3g /dev/sdaX /mnt</span><br></pre></td></tr></table></figure>

<h4 id="home-directory"><a href="#home-directory" class="headerlink" title="home directory"></a>home directory</h4><p>with <code>xdg-user-dirs</code> add “well known” user directories in /home/user</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xdg-user-dirs</span><br></pre></td></tr></table></figure>

<p>then run <code>xdg-user-dirs-update</code> to product</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xdg-user-dirs-update</span><br></pre></td></tr></table></figure>

<h4 id="fat-partition-recognize"><a href="#fat-partition-recognize" class="headerlink" title="fat partition recognize"></a>fat partition recognize</h4><p>in order to mount fat partition or use mkfs.fat format a disk, we need to install <code>dosfstools</code> first.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S dosfstools</span><br></pre></td></tr></table></figure>

<h2 id="other-settings"><a href="#other-settings" class="headerlink" title="other settings"></a>other settings</h2><p>some configure which seems not very important.</p>
<h3 id="grub-theme"><a href="#grub-theme" class="headerlink" title="grub theme"></a>grub theme</h3><ul>
<li><p>gnome look or pacman</p>
<p>   download from the <a href="gnomelook.org">web site</a> or install by pacman and mv to <code>/boot/grub/theme</code> directory</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unzip arch-silence-master.zip                    </span><br><span class="line">mv arch-silence-master /boot/grub/theme/    </span><br></pre></td></tr></table></figure>

<p>   now tell grub use the new theme, modify <code>/etc/default/grub    </code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRUB_THEME=&quot;/boot/grub/themes/arch-silence-master/theme/theme.txt&quot;</span><br></pre></td></tr></table></figure>

<p>   rebuild <code>grub.cfg</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-mkcofig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure></li>
<li><p>git hub</p>
<p>   download from <a class="link"   target="_blank" rel="noopener" href="https://gitee.com/ulomo/grub2-themes" >website<i class="fas fa-external-link-alt"></i></a>, unzip and change directory to it and run</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./install.sh -b -t tela</span><br></pre></td></tr></table></figure>

<p>   <img src=".images/image-20210224232446970.png" alt="image-20210224232446970"></p>
<p>   uninstall run <code>sudo ./install.sh -r -t tela</code></p>
</li>
</ul>
<h3 id="show-boot-message"><a href="#show-boot-message" class="headerlink" title="show boot message"></a>show boot message</h3><p>in default the boot message is hidden, we can make it showing again.modify <code>/etc/default/grub</code>, remove <code>quiet</code> flag</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot;loglevel=3&quot;</span><br></pre></td></tr></table></figure>

<p>rebuild grub.cfg</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>

<h3 id="coloize-pacman"><a href="#coloize-pacman" class="headerlink" title="coloize pacman"></a>coloize pacman</h3><p>in default the search result of pacman has no colors, we can change it. modify <code>/etc/pacman.conf</code>, uncomment <code>color</code></p>
<h3 id="colorls"><a href="#colorls" class="headerlink" title="colorls"></a>colorls</h3><p>it is a colorized ls command which can show icons (make sure u have patched font with graph support. such as nerd-fonts-iosevka)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">it is writed <span class="keyword">in</span> rube</span></span><br><span class="line">pacman -S ruby</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">then</span> use gem <span class="built_in">which</span> ruby package manager install colorls</span></span><br><span class="line">gem install colorls</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">follow install output config environment. such as add to .zshrc</span></span><br><span class="line">source $(dirname $(gem which colorls))/tab_complete.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">add path to /etc/profile</span></span><br><span class="line">append_path &#x27;/home/blueocean/.local/share/gem/ruby/2.7.0/bin&#x27;</span><br></pre></td></tr></table></figure>

<p>alias ls to colorls</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">in</span> .zshrc</span></span><br><span class="line">alias ls=&quot;colorls&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make effect</span></span><br><span class="line">source /etc/profile</span><br><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure>

<p><img src=".images/image-20210418125422704.png" alt="image-20210418125422704"></p>
<p>if ruby upgrades, run <code>gem install colorls</code> to upgrade colorls also.</p>
<h3 id="bluetooth"><a href="#bluetooth" class="headerlink" title="bluetooth"></a>bluetooth</h3><p><strong>install base package</strong></p>
<p>use bluetooth to connect device. intall package first</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S bluez</span><br></pre></td></tr></table></figure>

<p>provide cli tool</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S bluez-utils</span><br></pre></td></tr></table></figure>

<p>provide sounds for bluetooth</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S pulseaudio-bluetooth</span><br></pre></td></tr></table></figure>

<p><strong>add user to lp group</strong></p>
<p>it is needed to add user to lp group</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -a -G lp `whoami`</span><br></pre></td></tr></table></figure>

<p><strong>start bluetooth</strong></p>
<p>check whether or not driver has been launched</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep btusb</span><br></pre></td></tr></table></figure>

<p>if not launched by hand</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modprobe btusb</span><br></pre></td></tr></table></figure>

<p>launch service, a reboot needed</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable bluetooth.service</span><br><span class="line">systemctl start bluetooth.service</span><br></pre></td></tr></table></figure>

<blockquote>
<p>note: we need enable bluetooth to start up automaticly, otherwise there will be a error msg of failed</p>
</blockquote>
<p>connect devices the first time</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bluetoothctl</span><br><span class="line">agent KeyboardOnly</span><br><span class="line">default-agent</span><br><span class="line">power on</span><br><span class="line">scan on</span><br><span class="line">pair xxxx</span><br><span class="line">connect xxxx</span><br></pre></td></tr></table></figure>

<p>a paired device can be connect directory</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">show paired devices</span></span><br><span class="line">devices</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">then</span> connect</span></span><br><span class="line">connect xxxx</span><br></pre></td></tr></table></figure>

<h3 id="adjust-video-fan-speed"><a href="#adjust-video-fan-speed" class="headerlink" title="adjust video fan speed"></a>adjust video fan speed</h3><p>make sure nvidia-settings has been installed already.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">enable</span> fan speed adjust</span></span><br><span class="line">nvidia-xconfig --cool-bits=4</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">then</span> add below to ~/.xinitrc, replace n with the fan speed percentage. such as 10</span></span><br><span class="line">nvidia-settings -a &quot;[gpu:0]/GPUFanControlState=1&quot; -a &quot;[fan:0]/GPUTargetFanSpeed=n&quot;</span><br></pre></td></tr></table></figure>

<h3 id="cursor-theme"><a href="#cursor-theme" class="headerlink" title="cursor theme"></a>cursor theme</h3><p>full document can visit <a class="link"   target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Cursor_themes#XDG_specification" >arch wiki<i class="fas fa-external-link-alt"></i></a> page.</p>
<p>the default cursor theme is bad, i need to change it. before start up, i need to make it clearly there are 3 part should be changed</p>
<ol>
<li>xdg settting for X11</li>
<li>gtk theme setting</li>
<li>terminal setting</li>
</ol>
<p>first download cursor theme you liked <a class="link"   target="_blank" rel="noopener" href="https://www.gnome-look.org/browse/cat/107/ord/rating/" >in this website<i class="fas fa-external-link-alt"></i></a></p>
<p><strong>xdg setting</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">create ~/.icons folder</span></span><br><span class="line">mkdir ~/.icons</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">extract theme folder to ~/.icons</span></span><br><span class="line">tar -xzf theme.tar.gz -C ~/.icons</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">create theme configure file</span></span><br><span class="line">mkdir ~/.icons/default</span><br><span class="line">touch ~/.icons/default/index.theme</span><br><span class="line"></span><br><span class="line">echo &quot;</span><br><span class="line">[icon theme]</span><br><span class="line">Inherits=oreo_spark_blue_cursors</span><br><span class="line">&quot; &gt; ~/.icons/default/index.theme</span><br></pre></td></tr></table></figure>

<p><strong>gtk setting</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">create theme config file</span></span><br><span class="line">touch ~/.config/gtk-3.0/settings.ini</span><br><span class="line"></span><br><span class="line">echo &quot;</span><br><span class="line">[Settings]</span><br><span class="line">gtk-cursor-theme-name=oreo_spark_blue_cursors</span><br><span class="line">&quot; &gt; ~/.config/gtk-3.0/settings.ini</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">polybar use gtk-2.0, so we need copy above setting to gtk2 folder</span></span><br><span class="line">cp ~/.config/gtk-3.0/settings.ini ~/.config/gtk-2.0/settings.ini</span><br></pre></td></tr></table></figure>

<p><strong>terminal setting</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">write this <span class="keyword">in</span> ~/.Xresources</span></span><br><span class="line">Xcursor.theme: oreo_spark_blue_cursors</span><br><span class="line">Xcursor.size: 16</span><br></pre></td></tr></table></figure>

<p><strong>make it effect</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xrdb ~/.Xresources</span><br></pre></td></tr></table></figure>

<p>then relogin desktop</p>
<h3 id="gtk-application-theme-and-icon-theme"><a href="#gtk-application-theme-and-icon-theme" class="headerlink" title="gtk application theme and icon theme"></a>gtk application theme and icon theme</h3><p>it is a long time for google, and cannot find how to set system application theme and icon theme. finally i get it.</p>
<p><strong>First,</strong> we need to know there are two different frames in our application:</p>
<ol>
<li>GTK style</li>
<li>QT style</li>
</ol>
<p>it depends on what kind of language the application to be wrote. not depends on our theme chooseing.</p>
<p><strong>Second,</strong> we need to know there are there kind of themes we can download:</p>
<ol>
<li>application theme. the frame of application which stores in <code>~/.themes</code> or <code>/usr/share/themes</code></li>
<li>icon theme, the icon of application which stores in <code>~/.icons</code> or <code>/usr/share/icons</code></li>
<li>cursor theme, cursor style which stores in <code>~/.icons</code> or <code>/usr/share/icons</code></li>
</ol>
<p><strong>I</strong> follow <a class="link"   target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/GTK#GTK_and_Qt" >wiki page<i class="fas fa-external-link-alt"></i></a> to configure themes:</p>
<ol>
<li><p>download theme from <a class="link"   target="_blank" rel="noopener" href="http://opendesktop.org/" >this website<i class="fas fa-external-link-alt"></i></a></p>
</li>
<li><p>then extract gtk theme in<code>~/.themes</code>. </p>
<p>extract icon theme in <code>~/.icons</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xJf Downloads/WhiteSur-light.tar.xz -C ~/.themes</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xJf 01-WhiteSur.tar.xz -C ~/.icons</span><br></pre></td></tr></table></figure></li>
<li><p>edit two files</p>
<blockquote>
<p>Note:</p>
<p>i find a more beautiful font rather than <code>Cantarell</code></p>
<p>use <code>CaskaydiaCove Nerd Font 10</code> instead of <code>Cantarell 11</code></p>
</blockquote>
<p>gtk2 application need to edit file <code>/usr/share/gtk-2.0/gtkrc</code> or <code>.config/gtk-2.0/gtkrc</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat /usr/share/gtk-2.0/gtkrc </span><br><span class="line">gtk-icon-theme-name = &quot;WhiteSur-light&quot;</span><br><span class="line">gtk-theme-name = &quot;WhiteSur-light&quot;</span><br><span class="line">gtk-font-name = &quot;Cantarell 11&quot;</span><br></pre></td></tr></table></figure>

<p>gtk3 application can edit <code>/usr/share/gtk-3.0/settings.ini</code> or <code>.config/gtk-3.0/settings.ini</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.config/gtk-3.0/settings.ini </span><br><span class="line">[Settings]</span><br><span class="line">gtk-cursor-theme-name = oreo_spark_blue_cursors</span><br><span class="line">gtk-icon-theme-name = WhiteSur-light</span><br><span class="line">gtk-theme-name = WhiteSur-light</span><br><span class="line">gtk-font-name = Cantarell 11</span><br></pre></td></tr></table></figure></li>
</ol>
<p>then relogin desktop, most of applications will show specified theme correctly. however some of applications such as vbox still the same as before shows like this:</p>
<p><img src=".images/image-20210808000347792.png" alt="image-20210808000347792"></p>
<p>and at last i find that it is because the application writes by QT, so we cannot apply GTK theme to it. and i find the fixed method: <strong>make QT application use GTK theme <a class="link"   target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Uniform_look_for_Qt_and_GTK_applications#Using_a_GTK_icon_theme_in_Qt_apps" >in this page<i class="fas fa-external-link-alt"></i></a></strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">write this to ~/.xinitrc <span class="keyword">if</span> i use window manager</span></span><br><span class="line">export DESKTOP_SESSION=gnome</span><br></pre></td></tr></table></figure>

<p>relogin desktop, and then the virtualbox shows correct themes, it is really amazing!</p>
<p><img src=".images/image-20210808000209103.png" alt="image-20210808000209103"></p>
<p><strong>only for one specified app</strong></p>
<p>above setting will change all app theme, however we can define some app with specified theme.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">go to this folder</span></span><br><span class="line">cd /usr/share/applications</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">find <span class="built_in">which</span> app should be change</span></span><br><span class="line">vim leafpad.desktop</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">find Exec line</span></span><br><span class="line">Exec=leafpad %F</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">change it to specified theme</span></span><br><span class="line">Exec=env GTK_THEME=WhiteSur-light:light leafpad %F</span><br></pre></td></tr></table></figure>

<p>restart app, theme will make effect. but it seems that it’s only make effect if we have no theme setting by default.</p>
<h3 id="font-setting"><a href="#font-setting" class="headerlink" title="font setting"></a>font setting</h3><p>at first, we need to know the category of fonts.</p>
<ul>
<li>bitmap: often used in system console</li>
<li>latin script:<ul>
<li>serif: shows great in large font, no good in small font. often used in title and printing.</li>
<li>sans-serif: shows great in small font and web page.</li>
<li>monospace: often used in coding.</li>
<li>family: include above there fonts.</li>
</ul>
</li>
<li>non-latin script: chinese/japanese and others</li>
<li>emoji and symbols</li>
<li>math</li>
<li>other operating system fonts</li>
</ul>
<p>so in a GUI operation system, we often use latin for english and non-latin for chinese. emoji and math is optional. notice that console can use bitmap only.</p>
<blockquote>
<p>user font can be set in <code>~/.local/share/fonts</code></p>
<p>then use <code>fc-cache</code> to build font cache.</p>
</blockquote>
<p>in order to configure font manually, we need two step:</p>
<ol>
<li> make effect of user setting</li>
</ol>
   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/.config/fontconfig/conf.d</span><br><span class="line">ln -s /usr/share/fontconfig/conf.avail/50-user.conf ~/.config/fontconfig/conf.d</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>manually font setting</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch ~/.config/fontconfig/fonts.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">fontconfig</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;fonts.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fontconfig</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;autohint&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">bool</span>&gt;</span>false<span class="tag">&lt;/<span class="name">bool</span>&gt;</span> <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;antialias&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span> <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;hinting&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span> <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;hintstyle&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">const</span>&gt;</span>hintslight<span class="tag">&lt;/<span class="name">const</span>&gt;</span> <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;rgba&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">const</span>&gt;</span>rgb<span class="tag">&lt;/<span class="name">const</span>&gt;</span> <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;lcdfilter&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">const</span>&gt;</span>lcddefault<span class="tag">&lt;/<span class="name">const</span>&gt;</span> <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;embeddedbitmap&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">bool</span>&gt;</span>false<span class="tag">&lt;/<span class="name">bool</span>&gt;</span> <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--fallback font order--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">alias</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">family</span>&gt;</span>serif<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prefer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">family</span>&gt;</span>DejaVu Serif<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">family</span>&gt;</span>Source Han Sans CN<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">prefer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">alias</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">alias</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">family</span>&gt;</span>sans-serif<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prefer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">family</span>&gt;</span>Inter<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">family</span>&gt;</span>Source Han Sans CN<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">prefer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">alias</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">alias</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">family</span>&gt;</span>monospace<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prefer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">family</span>&gt;</span>Ubuntu<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">family</span>&gt;</span>Source Han Sans CN<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">prefer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">alias</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">fontconfig</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>i use <code>DejaVu Serif</code> for serif, <code>Inter</code> for sans-serif, <code>Ubuntu</code> for monospace. the same setting for firefox and it shows great.</p>
<h3 id="virtual-machine"><a href="#virtual-machine" class="headerlink" title="virtual machine"></a>virtual machine</h3><h4 id="virtualbox"><a href="#virtualbox" class="headerlink" title="virtualbox"></a>virtualbox</h4><p><strong>load kernel module</strong></p>
<p>before we can run virtual machine, we need load <code>vboxdrv</code> kernel module before</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modprobe vboxdrv</span><br></pre></td></tr></table></figure>

<p>when we launch a virtualbox os with desktop environment, the most import thing is the size of window, for what the default size is to small.</p>
<p>if we use windows we can directily click the top bar menu and choose install third extension, after finish, we can login windows and click install extension.</p>
<p><strong>screen size with command</strong></p>
<p>however in linux, it is much complex, one method i find good enough is use command to specify to size without install extension and working fine.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">first use cvt to product the screen size info</span></span><br><span class="line">cvt length width</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">second install xorg-xrandr and use it to <span class="built_in">set</span> size</span></span><br><span class="line">pacman -S xorg-xrandr</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">add the standout of cvt</span> </span><br><span class="line">xrandr --newmode </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">add a new mode</span></span><br><span class="line">xrandr --addmode Virtual-1 lengthxwidth_refreshrate</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">change screen size</span></span><br><span class="line">xrandr --output Virtual-1 --mode lengthxwidth_refreshrate</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">for</span> example</span></span><br><span class="line">cvt 2550 1406</span><br><span class="line">xrandr --newmode &quot;2552x1406_60.00&quot;  302.75  2552 2736 3008 3464  1406 1409 1419 1458 -hsync +vsync</span><br><span class="line">xrandr --addmode Virtual-1 2552x1406_60.00</span><br><span class="line">xrandr --output Virtual-1 --mode 2552x1406_60.00</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>screen size with iso file</strong></p>
<p>yeah, there comes <a class="link"   target="_blank" rel="noopener" href="https://askubuntu.com/questions/310320/cant-get-fullscreen-resolution-on-ubuntu-hosted-on-virtualbox" >another method<i class="fas fa-external-link-alt"></i></a> which work most of the time i find in the website.The most important thing, <strong>do not use</strong> THE “GUEST  ADDITIONS CD” come along with the Oracle VirtualBox, which you usually  find in the menu “Devices” - “Insert Guest Additions CD Image”. <strong>But</strong> download the latest VBoxAdditions iso file from the <a class="link"   target="_blank" rel="noopener" href="http://download.virtualbox.org/virtualbox/" >official webpage<i class="fas fa-external-link-alt"></i></a>, mount the image file in your virtual machine and then run the shell file “VBoxLinuxAdditions.run”:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh  VBoxLinuxAdditions.run</span><br></pre></td></tr></table></figure>

<p>Type in the password when prompted. Restart your virtual machine, then everything should work now.</p>
<h4 id="kvm"><a href="#kvm" class="headerlink" title="kvm"></a>kvm</h4><p>I have used virtualbox so many years when i first heard of it, it is quiet simple, free and i like it very much. However today when i see DT’s video, he introduces virt-manager to manager virtual machine, i think i need try it. Because kvm is the kernel based virtual machine, its performance may improved a lot then virtualbox. At first we need to know some concept:</p>
<ul>
<li><p>kvm: kernel based virtual machine,  provide the ability to start virtual machine.</p>
</li>
<li><p>qemu: machine emulator which can use kvm hypervisor or others. </p>
</li>
<li><p>libvirt: libs(network, storage and etc), daemon, command utility(virsh)</p>
</li>
<li><p>virt-manager: gui tool for easily build/manage virtual machine.</p>
</li>
</ul>
<p>at first, check whether support kvm</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LC_ALL=C lscpu | grep Virtualization</span><br></pre></td></tr></table></figure>

<p>if the output not empty, then we can install the needed tools</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">virt-manager includes libvirt</span></span><br><span class="line">pacman -S qemu virt-manager</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">other tool that libvirtd need</span></span><br><span class="line">pacman -S ebtables dnsmasq dmidecode</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Note: </p>
<ol>
<li><p><code>ebtables</code> and <code>dnsmasq</code> is very important for virt-manager to manage/build host network bridge and dnsmasq in iptables, without them the network in virtual machine may be faild to connect.</p>
</li>
<li><p>dmidecode used for showing host information in virt-manager.</p>
</li>
<li><p>so,  in host machine iptables must be enabled and started for virt-manager to manage virtual machine network.</p>
</li>
</ol>
</blockquote>
<p>then enable and start libvirtd daemon</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable --now libvirtd</span><br></pre></td></tr></table></figure>

<p>after start up, we need add our user to libvirt group. </p>
<blockquote>
<p> Note: without this step, there may be some auth errors.</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -a -G libvirt [user_name]</span><br></pre></td></tr></table></figure>

<p>finally, we can launch virt-manager to build/manage virtual machine.</p>
<p><strong>add new image location</strong></p>
<p>the default image location is <code>/var/lib/libvirt/images</code>, we can add a new storage location via virt-manager</p>
<p><img src="./.images/2021-12-04-13-56-30-image.png" alt="virt-manager"></p>
<p><strong>convert virtualbox images to kvm images</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">for</span> example convert archlinux.vdi to archlinux</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">er, i convert serveral images from vdi to qcow2 and all of them faild <span class="keyword">in</span> find disk with UUID</span></span><br><span class="line">qemu-img convert -f vdi -O qcow2 archlinux.vdi ~/Public/kvm/images/archlinux</span><br></pre></td></tr></table></figure>

<p><strong>add uefi support</strong></p>
<p>install edk2-ovmf to support uefi</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pacman -S edk2-ovmf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">then</span> restart libvertd</span></span><br><span class="line">systemctl restart libvertd</span><br></pre></td></tr></table></figure>

<p><strong><a class="link"   target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/107633/how-do-i-get-my-mouse-back-from-qemu-kvm" >get mouse back from virt-manager<i class="fas fa-external-link-alt"></i></a></strong></p>
<p>use <code>left ctrl + left alt</code> to release focus in virt-manager. or <code>left ctrl + left alt + g</code> when use GTK fronted of qemu.</p>
<p><strong>some important virsh command</strong></p>
<p><code>virsh</code> is libvirt’s command line tool, include commands which can operate the virtual machine instead of virt-manager, however it is much complex.</p>
<p><em>virtual machine is called domain in libvirt</em></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">list all running machines/domains (include <span class="built_in">id</span>/domain-name)</span></span><br><span class="line">sudo virsh list</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">list all machines/domains</span></span><br><span class="line">sudo virsh list --all</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">list all networks</span></span><br><span class="line">sudo virsh net-list</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">list all pools/images storage position</span></span><br><span class="line">sudo virsh pool-list</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">list all volumes/images</span></span><br><span class="line">sudo virsh vol-list [pool-name]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">list domain/machine info</span></span><br><span class="line">sudo virsh dominfo [domain-name/id]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">list domain/machine ipaddress</span></span><br><span class="line">sudo virsh domifaddr [domain-name/id]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">start/shutdown/suspend domain/machine</span></span><br><span class="line">sudo virsh start/shutdown/suspend [domain-name/id]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">start network</span></span><br><span class="line">sudo virsh net-start [network-name]</span><br></pre></td></tr></table></figure>

<p><strong>user comand line to start up a virtual machine</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">start up network</span></span><br><span class="line">sudo virsh net-list</span><br><span class="line">sudo virsh net-start [network-name]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">start virtual machine</span></span><br><span class="line">sudo virsh list --all</span><br><span class="line">sudo virsh start [domain-name/id]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">get virtual machine<span class="string">&#x27;s ip address</span></span></span><br><span class="line">sudo virsh domifaddr [domain-name/id]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">then use ssh to connect remote linux or rdesktop to connect windows</span></span></span><br></pre></td></tr></table></figure>



<p><strong>fix cannot adjust resolution</strong></p>
<p>most of time we start up a new virtual machine in virt-manager, the resolution cannot adjust correctly, the way to fix it is change virt-manager video model.</p>
<p>we can change <code>QXL</code> to <code>Virtio</code> or <code>VGA</code></p>
<p><strong>share folder</strong></p>
<p>for example make host’s <code>Desktop</code> folder as a share folder, we need to change Desktop folder’s permistion to 777</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 ~/Desktop</span><br></pre></td></tr></table></figure>

<p>in virt-manager create a new file filesystem and mount to <code>/mnt</code> for example</p>
<p>in virtual machine use command to mount the new share folder</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">for</span> example mount share folder to Desktop</span></span><br><span class="line">mount -t 9p -o trans=virtio /mnt Desktop</span><br></pre></td></tr></table></figure>

<p><strong>use qemu command to create/start virtual machine with GUI</strong></p>
<p><em>shortcut</em>:</p>
<ul>
<li>fullscreen: ctrl+alt+f</li>
<li>menu: ctrl+alt+m</li>
<li>grab mouse: ctrl+alt+g (effect only when menu bar shows)</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">create a file block to install virtual machine</span></span><br><span class="line">qemu-img create -f qcow2 [virtual-name] [disk-size]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">eg:</span></span><br><span class="line">qemu-img create -f qcow2 android.img 10G</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install OS to file block</span></span><br><span class="line">qemu-system-x86_64 -enable-kvm -cdrom android.iso -drive file=./android.img </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">start virtual machine</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">cpu: host has the best performance</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">smp: cpu thread</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">m: memory</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">vga: video method</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">soundhw: sound device</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">eg:</span></span><br><span class="line">qemu-system-x86_64 -enable-kvm -drive file=./android.img -cpu host -smp 4 -m 4G -vga virtio -display sdl,ql=on -soundhw=hda</span><br><span class="line"></span><br><span class="line">qemu-system-x86_64 -enable-kvm -drive file=win11.qcow2 -cpu host -smp 4 -m 4G -vga virtio -display gtk,gl=on,full-screen=on -soundhw hda</span><br></pre></td></tr></table></figure>





<h3 id="connect-remote-windows"><a href="#connect-remote-windows" class="headerlink" title="connect remote windows"></a>connect remote windows</h3><p>windows remote desktop via udp/3389, so if i wanna to connect to windows in linux machine, i need to install a client with the ability to connect windows supported protocol. there are a lot of tools, but i choose the <code>rdesktop</code>, since it is a simple command line tool.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S rdesktop</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">better rander</span></span><br><span class="line">rdesktop -g 100% -r sound:local -x l -M -K  -P -z 192.168.122.157:3389</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>-g 100%</code>: automatically scale the geometry to fit screen.</p>
</li>
<li><p><code>-r sound:local</code>: redirect remote machine sound to local.</p>
</li>
<li><p><code>-M</code>: use linux system’s mouse instead of remote machine’s mouse.</p>
</li>
<li><p><code>-K</code>: use linux window manager instead of remote machine’s window manager.</p>
</li>
<li><p><code>-x l</code>: rander remote desktop’s wallpaper, window motion. </p>
</li>
<li><p><code>-P</code>: enable bitmap cache to disk to improve performance.</p>
</li>
<li><p><code>-z</code>: enable compress rdp datastream.</p>
</li>
<li><p><code>192.168.122.157:3389</code>: remote mahine’s ip and port.</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">low level rander</span></span><br><span class="line">rdesktop -g 100% -r sound:local -x m -M -K -P -z -b 192.168.122.157:3389</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Note: when use <code>-P</code> option, will create a directory  <code>~/.rdesktop/cache</code>, in order to speed up the access time, we can mount this directory to memory.</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">nvim /etc/fstab</span></span><br><span class="line"></span><br><span class="line">tmpfs    /home/healer/.rdesktop/cache    tmpfs   rw,nodev,nosuid    0 0</span><br></pre></td></tr></table></figure>

<h3 id="auto-login"><a href="#auto-login" class="headerlink" title="auto login"></a>auto login</h3><p>archlinux use agetty to manage virtual console, we can use it to automatic login system without password. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mkdir /etc/systemd/system/getty@tty1.service.d</span><br><span class="line">touch /etc/systemd/system/getty@tty1.service.d/override.conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">change username with login user name</span></span><br><span class="line">echo &quot;</span><br><span class="line">[Service]</span><br><span class="line">ExecStart=</span><br><span class="line">ExecStart=-/usr/bin/agetty --autologin username --noclear %I $TERM</span><br><span class="line">&quot; &gt; /etc/systemd/system/getty@tty1.service.d/override.conf</span><br></pre></td></tr></table></figure>

<p>relogin system will make effect.</p>
<p>if we also want to login desktop environment, we can do it like this.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;</span><br><span class="line">if [[ ! $DISPLAY &amp;&amp; $XDG_VTNR -eq 1 ]]; then</span><br><span class="line">    exec startx &amp;&gt;/dev/null</span><br><span class="line">fi</span><br><span class="line">&quot; &gt; ~/.zprofile</span><br></pre></td></tr></table></figure>

<h3 id="connect-remote-linux"><a href="#connect-remote-linux" class="headerlink" title="connect remote linux"></a>connect remote linux</h3><p>in linux, there is no default remote service installed by default, so if we wanna to connect to remote linux with GUI interface, we need install a VNC server in remote linux and then install a VNC client in local machine to connect to remote.</p>
<p><strong>in remote</strong></p>
<p>the easiest way is to install <code>x11vnc</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S x11vnc</span><br></pre></td></tr></table></figure>

<p>then create a connection passwd</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x11vnc -storepasswd</span><br></pre></td></tr></table></figure>

<p>the command above will create a passwd file in <code>~/.vnc/passwd</code> by default.</p>
<p>then start vnc server</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x11vnc -display :0</span><br></pre></td></tr></table></figure>

<p><strong>in local</strong></p>
<p>remmina is a common GUI tool that support lots of protocol</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S remmina</span><br><span class="line">pacman -S libvncserver</span><br></pre></td></tr></table></figure>

<h3 id="auto-suspend"><a href="#auto-suspend" class="headerlink" title="auto suspend"></a>auto suspend</h3><p>in order to save power while we don’t use computer with a specified time. we can use <code>slock</code> and <code>xautolock</code></p>
<p><strong>suspend with shortcut</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">write this <span class="keyword">in</span> xmonad.hs and triger with shortcut</span></span><br><span class="line">((0 , xK_l), spawn &quot;slock &amp; systemctl suspend&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>auto suspend with specified time</strong></p>
<p>run <code>xautolock</code> while system startup and auto sleep with specified time</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">write this <span class="keyword">in</span> xmonad.hs <span class="built_in">which</span> will run <span class="keyword">while</span> login desktop (30 minites)</span></span><br><span class="line">spawnOnce &quot;xautolock -time 30 -locker &#x27;systemctl suspend&#x27; -detectsleep&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or write this <span class="keyword">in</span> .xinitrc</span></span><br><span class="line">xautolock -time 30 -locker &#x27;systemctl suspend&#x27; -detectsleep</span><br></pre></td></tr></table></figure>

<h3 id="cache-browser-data-to-memory"><a href="#cache-browser-data-to-memory" class="headerlink" title="cache browser data to memory"></a>cache browser data to memory</h3><p>install</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install psd</span></span><br><span class="line">pacman -S  profile-sync-daemon</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">first run create configure file</span></span><br><span class="line">~ » psd                                                                                                                                                                                               ~  </span><br><span class="line"> First time running psd so please edit /home/healer/.config/psd/psd.conf to your liking and run again.</span><br></pre></td></tr></table></figure>

<p>configure</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">enable</span></span></span><br><span class="line">systemctl --user enable psd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">configure overlay and browser</span></span><br><span class="line">vim ~/.config/psd/psd.conf</span><br><span class="line"></span><br><span class="line">USE_OVERLAYFS=&quot;yes&quot;</span><br><span class="line">BROWSERS=(firefox)</span><br></pre></td></tr></table></figure>

<h3 id="cache-anything-to-RAM"><a href="#cache-anything-to-RAM" class="headerlink" title="cache anything to RAM"></a>cache anything to RAM</h3><p>the benefit of <a class="link"   target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Anything-sync-daemon" >asd<i class="fas fa-external-link-alt"></i></a> is that it can speed the access of some <strong>folder</strong> (not file) and makes the file to store in physical possible.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S anything-sync-daemon</span><br></pre></td></tr></table></figure>

<p>edit <code>/etc/asd.conf</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">put the folder <span class="built_in">which</span> i want to load to memory</span></span><br><span class="line">WHATTOSYNC=(</span><br><span class="line">&#x27;/home/healer/.oh-my-zsh/his&#x27;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Note:</p>
<p>by default <code>.zsh_history</code> stores in <code>$HOME</code>, but asd can only sync folders. And <a class="link"   target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/265957/zsh-histfile-still-read-from-zsh-history" >there is a way<i class="fas fa-external-link-alt"></i></a> to set history to another folder: define <code>HISTFILE</code> variable before oh-my-zsh in <code>~/.zshrc</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HISTFILE=~/.oh-my-zsh/his/.zsh_history</span><br><span class="line">source $ZSH/oh-my-zsh.sh</span><br></pre></td></tr></table></figure>
</blockquote>
<p>at last enable asd service at boot time and start asd</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable --now asd</span><br></pre></td></tr></table></figure>

<h3 id="screen-rotation"><a href="#screen-rotation" class="headerlink" title="screen rotation"></a>screen rotation</h3><p>use <code>xrandr</code> described in <a class="link"   target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Tablet_PC#Screen_rotation" >wiki page<i class="fas fa-external-link-alt"></i></a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">add a key binding <span class="keyword">in</span> xmonad</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">output name can be find with xrandr</span></span><br><span class="line">xrandr --output HDMI-A-0 --rotate left</span><br><span class="line">xrandr --output HDMI-A-0 --rotate normal</span><br></pre></td></tr></table></figure>

<h3 id="firefox-adds-on"><a href="#firefox-adds-on" class="headerlink" title="firefox adds-on"></a>firefox adds-on</h3><p>some useful adds-on</p>
<p><img src=".images/image-20210817102719051.png" alt="image-20210817102719051"></p>
<h3 id="burn-dvd"><a href="#burn-dvd" class="headerlink" title="burn dvd"></a>burn dvd</h3><p>I have to say that the idea why i want to use dvd is because of one youtuber called DT, he has a video told why he uses dvd still today, and i thought it is a perfect idea.</p>
<p>The main reason i use dvd is that can store long times without information lose, and has a feeling of old life in such a fast society.</p>
<p>there are two things need to be noticed:</p>
<ol>
<li>new blank DVD-R cannot be mounted, it needs to burn data first.</li>
<li>a toolset <a class="link"   target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Optical_disc_drive#Burning" >dvd+rw-tools<i class="fas fa-external-link-alt"></i></a> contains the tool <code>growisofs</code> which can burn data to DVD-R.</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install toolset</span></span><br><span class="line">pacman -S dvd+rw-tools</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">insert new DVD-R to DVD burn machine</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">burn data to new DVD-R</span></span><br><span class="line">growisofs -Z /dev/sr0 -R -J /some/files</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">append data to DVD-R</span></span><br><span class="line">growisofs -M /dev/dvd -R -J /more/files</span><br></pre></td></tr></table></figure>

<p>after burning data to DVD-R we can mount it</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/sr0 /mnt</span><br></pre></td></tr></table></figure>

<h3 id="email-receiving"><a href="#email-receiving" class="headerlink" title="email receiving"></a>email receiving</h3><p><code>mutt</code> is a linux CLI application of email client. although GUI mail applications such as MailSpring, BlueMail are very friendly use, but the size of GUI packages are much bigger than CLI applications.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S mutt</span><br></pre></td></tr></table></figure>

<p>mutt’s default configure can be set in <code>~/.config/mutt/muttrc</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">create <span class="built_in">local</span> mail store loction and mutt configuration file</span></span><br><span class="line">mkdir ~/.local/share/Mail ~/.config/mutt</span><br><span class="line">touch ~/.config/mutt/muttrc</span><br></pre></td></tr></table></figure>

<p><code>muttrc</code> configuration </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">RECEIVING EMAIL SETTING (IMAP)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">user and password</span></span><br><span class="line">set imap_user       = 1025096440@qq.com</span><br><span class="line">set imap_pass       = lcfqrejgdeggbcic</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">address of colud mailbox</span></span><br><span class="line">set folder          = imaps://1025096440@imap.qq.com/</span><br><span class="line">set spoolfile       = +INBOX</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">architure of cloud mailbox checking</span></span><br><span class="line">mailboxes           = +INBOX +SENT</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">receiving of sending file <span class="built_in">local</span> store position</span></span><br><span class="line">set folder          = &quot;$HOME/.local/share/Mail&quot;; set record=&quot;+sent&quot;</span><br><span class="line">set imap_keepalive  = 300</span><br><span class="line">set mail_check      = 5</span><br><span class="line">set sort            = reverse-date</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">SENDING EMAIL SETTING (SMAP)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">user name of sending from</span></span><br><span class="line">set realname        = shutterbug</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">address and password of sending from</span></span><br><span class="line">set from            = $imap_user</span><br><span class="line">set smtp_pass       = $imap_pass </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">cloud SMAP server address</span></span><br><span class="line">set smtp_url        = smtps://1025096440@qq.com@smtp.qq.com</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">use ssl enforce</span></span><br><span class="line">set ssl_force_tls   = yes</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">style and editor define</span></span><br><span class="line">set arrow_cursor</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">set</span> folder_format=<span class="string">&quot;%2C %t %N %8s %d %f&quot;</span></span></span><br><span class="line">set sidebar_short_path  = yes</span><br><span class="line">set sidebar_width       = 22</span><br><span class="line">set sidebar_visible     = yes</span><br><span class="line">set sidebar_format      = &quot;%B%* %N/%S &quot;</span><br><span class="line">set index_format=&quot;%3C %-5Z %&#123;%b %d      &#125; %-25.20L (%?l?%4l&amp;%4c?) %s&quot;</span><br><span class="line">set editor          = vim</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">html render with w3m</span></span><br><span class="line">set mailcap_path    = $HOME/.config/mutt/mailcap</span><br><span class="line">auto_view text/html</span><br><span class="line">alternative_order text/plain text/html</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">key binding</span></span><br><span class="line">bind pager j next-line</span><br><span class="line">bind pager k previous-line</span><br><span class="line">bind attach,index,pager \CD next-page</span><br><span class="line">bind attach,index,pager \CU previous-page</span><br><span class="line">bind pager g top</span><br><span class="line">bind pager G bottom</span><br><span class="line">bind attach,index g first-entry</span><br><span class="line">bind attach,index G last-entry</span><br><span class="line">bind index,pager B sidebar-toggle-visible </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">color scheme</span></span><br><span class="line">color hdrdefault blue black</span><br><span class="line">color quoted blue black</span><br><span class="line">color signature blue black</span><br><span class="line">color attachment red black</span><br><span class="line">color prompt brightmagenta black</span><br><span class="line">color message brightred black</span><br><span class="line">color error brightred black</span><br><span class="line">color indicator red black </span><br><span class="line">color status brightgreen blue</span><br><span class="line">color tree blue black</span><br><span class="line">color normal white black</span><br><span class="line">color markers red black</span><br><span class="line">color search white black</span><br><span class="line">color tilde brightmagenta black</span><br><span class="line">color index blue black ~F</span><br><span class="line">color index red black &quot;~N|~O&quot;</span><br></pre></td></tr></table></figure>

<p>by default mutt cannot render html page, however we can use w3m to resolve it with the configuration file <code>$HOME/.config/mutt/mailcap</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text/html; w3m -I %&#123;charset&#125; -T text/html; copiousoutput;</span><br></pre></td></tr></table></figure>

<p>we can type <code>mutt</code> to launch the email client use <code>space</code> key to open the content of email</p>
<p>sending email is little difference</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">launch text editor to edit message</span></span><br><span class="line">mutt -s &#x27;tile&#x27; user@email.com</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or message from file content</span></span><br><span class="line">mutt -s &quot;Subject&quot; somejoeorjane@someserver.com &lt; /var/log/somelog</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or append some file</span></span><br><span class="line">mutt -s &quot;Subject&quot; somejoeorjane@someserver.com -a somefile &lt; /tmp/sometext.txt</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Note:</p>
<p>change sidebar folder press <code>c</code>, then press <code>tab</code> twice</p>
</blockquote>
<h3 id="external-monitor-brightness"><a href="#external-monitor-brightness" class="headerlink" title="external monitor brightness"></a>external monitor brightness</h3><p>when i use a monitor display, i cannot adjust the brightness with <code>xbacklight</code> tool. today, i find the reason why i cannot adjust it <a class="link"   target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/backlight#setpci" >in this website<i class="fas fa-external-link-alt"></i></a>. simple to say, external monitor needs other tools to change brightness.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">it need a kernel module to be loaded</span></span><br><span class="line">sudo modprobe i2c-dev</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install a tool called ddcutil</span></span><br><span class="line">sudo pacman -S ddcutil</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">then</span> find <span class="built_in">which</span> feature can adjust the brightness</span></span><br><span class="line">sudo ddcutil capabilities |grep -i brightness</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">➜  acpi_video0 sudo ddcutil capabilities |grep -i brightness</span><br><span class="line">   Feature: 10 (Brightness)</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">i find it is 10, <span class="keyword">then</span> i can adjust it</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">10 is the feature number</span></span><br><span class="line">sudo ddcutil setvcp 10 30</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">increase/decrease</span></span><br><span class="line">sudo ddcutil setvcp 10 + 5</span><br><span class="line">sudo ddcutil setvcp 10 - 5</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">and check it</span></span><br><span class="line">sudo ddcutil getvcp 10</span><br></pre></td></tr></table></figure>

<p>finally i need the module to be loaded at boot time, we can add this feature as describe <a class="link"   target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Kernel_module#Automatic_module_loading_with_systemd" >in this website<i class="fas fa-external-link-alt"></i></a>. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo touch /etc/modules-load.d/i2c-dev.conf</span><br><span class="line">sudo echo i2c_dev &gt; /etc/modules-load.d/i2c-dev.conf</span><br></pre></td></tr></table></figure>

<p>change <code>ddcutil</code> permission to let normal user can execute it</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">setuid can make normal user execute some file with the file<span class="string">&#x27;s owner permission</span></span></span><br><span class="line">sudo chmod u+s /usr/bin/ddcutil</span><br></pre></td></tr></table></figure>

<p>then add shortcut to xmonad</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">((mod1Mask, xK_F6), spawn <span class="string">&quot;ddcutil setvcp 10 - 5&quot;</span>)</span><br><span class="line">((mod1Mask, xK_F8), spawn <span class="string">&quot;ddcutil setvcp 10 + 5&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="command-software-usage"><a href="#command-software-usage" class="headerlink" title="command/software usage"></a>command/software usage</h2><p>common command and software usage.</p>
<h3 id="journal"><a href="#journal" class="headerlink" title="journal"></a>journal</h3><p>journal is the logging system of systemd. default log location in <code>/var/log/journal</code>. in default setting the size of log will increate until 10% of total disk.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">we can change the default setting, unit Mib</span></span><br><span class="line">vim /etc/systemd/journald.conf</span><br><span class="line"></span><br><span class="line">SystemMaxFiles=10</span><br></pre></td></tr></table></figure>

<p>we can clean by hand</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">show disk usage</span></span><br><span class="line">journalctl --disk-usage</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">clean</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">vacuum cannot remove active or unarchived file. and rotate can archive active file.</span></span><br><span class="line">journalctl --rotate --vacuum-size=1</span><br><span class="line">journalctl --rotate --vacuum-time=1</span><br></pre></td></tr></table></figure>

<h3 id="format-convert"><a href="#format-convert" class="headerlink" title="format convert"></a>format convert</h3><blockquote>
<p>note:</p>
<p>   utf-8 and gbk are both character encoding, and they are differect, we need to know utf-8 is much better than gbk, for utf-8 support more.</p>
</blockquote>
<p>if software cannot show text normally, we have two method to repair it.</p>
<ol>
<li>change software setting to display normally if software has the ability</li>
<li>change file encoding to which software use with tools</li>
</ol>
<p>for example:</p>
<p>as we know windows file encode with gbk, and it cannot display normally in linux vim editor in default, we can add vim setting to support it</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.vimrc</span><br><span class="line"></span><br><span class="line">set fileencodings=utf-8,gb18030,gbk</span><br></pre></td></tr></table></figure>

<p>another method is change file encoding</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iconv -f gbk -t utf-8 1.txt -o 2.txt</span><br></pre></td></tr></table></figure>

<ul>
<li><code>-f</code> from</li>
<li><code>-t</code> to</li>
<li><code>-o</code> output file</li>
</ul>
<h3 id="qv2ray-amp-v2ray-core"><a href="#qv2ray-amp-v2ray-core" class="headerlink" title="qv2ray &amp; v2ray-core"></a>qv2ray &amp; v2ray-core</h3><blockquote>
<p>Note:</p>
<ol>
<li>buy proxy, i buy though iGG. with iGG i can get scribe url</li>
<li>install software to config scribe url</li>
</ol>
</blockquote>
<p>because yay cannot download software from github, most time will failed to install some software. so need to install a software to proxy.</p>
<p>Qv2ray is a v2ray client gui tool for configing v2ray. and v2ray-core is the core of v2ray.</p>
<ul>
<li><p>download</p>
<p>download <a class="link"   target="_blank" rel="noopener" href="https://github.com/Qv2ray/Qv2ray/releases" >qv2ray<i class="fas fa-external-link-alt"></i></a> , i choose appimage, it can be run directory without install</p>
<p>download <a class="link"   target="_blank" rel="noopener" href="https://github.com/v2fly/v2ray-core/releases" >v2ray-core<i class="fas fa-external-link-alt"></i></a>, a 64bit zip file</p>
</li>
<li><p>configure qv2ray</p>
<p>follow <a class="link"   target="_blank" rel="noopener" href="https://iguge.app/helper/?p=257" >this website<i class="fas fa-external-link-alt"></i></a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">create a app folder</span></span><br><span class="line">mkdir .local/apps/qv2ray</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">move appimage to qv2ray</span></span><br><span class="line">mv Downloads/Qv2ray.v2.6.3.linux-x64.AppImage .local/apps/qv2ray</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">then</span> run this app</span></span><br><span class="line">chmod u+x ./Qv2ray.v2.6.3.linux-x64.AppImage</span><br><span class="line">./Qv2ray.v2.6.3.linux-x64.AppImage</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">create v2ray-core folder</span></span><br><span class="line">mkdir .local/apps/qv2ray/vcore</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">unzip v2ray-core to new folder</span></span><br><span class="line">unzip Download/v2ray-linux-64.zip -d .local/apps/qv2ray/vcore</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">then</span> configure <span class="keyword">in</span> gui app</span></span><br></pre></td></tr></table></figure>

<p>change file location and click “ok”</p>
<p><img src=".images/image-20210505013851544.png" alt="image-20210505013851544"></p>
</li>
<li><p>and follow website to add scribe address, then we can use proxy to visit website</p>
</li>
<li><p>the way to allow yay(git) to proxy follow <a class="link"   target="_blank" rel="noopener" href="https://iguge.app/helper/?p=152" >this website<i class="fas fa-external-link-alt"></i></a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- git</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">http https</span></span><br><span class="line">git config --global http.proxy http://127.0.0.1:8889</span><br><span class="line">git config --global https.proxy https://127.0.0.1:8889</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">socks5</span></span><br><span class="line">git config --global http.proxy socks5://127.0.0.1:1089</span><br><span class="line">git config --global https.proxy socks5://127.0.0.1:1089</span><br></pre></td></tr></table></figure>

<p>– speed github</p>
</li>
</ul>
<h1 id="configure-http-https-proxy"><a href="#configure-http-https-proxy" class="headerlink" title="configure http https proxy"></a>configure http https proxy</h1><p>  git config –global http.<a class="link"   target="_blank" rel="noopener" href="https://github.com.proxy/" >https://github.com.proxy<i class="fas fa-external-link-alt"></i></a> <a class="link"   target="_blank" rel="noopener" href="https://127.0.0.1:8889/" >https://127.0.0.1:8889<i class="fas fa-external-link-alt"></i></a><br>  git config –global https.<a class="link"   target="_blank" rel="noopener" href="https://github.com.proxy/" >https://github.com.proxy<i class="fas fa-external-link-alt"></i></a> <a class="link"   target="_blank" rel="noopener" href="https://127.0.0.1:8889/" >https://127.0.0.1:8889<i class="fas fa-external-link-alt"></i></a></p>
<h1 id="configure-socks5-proxy-this-is-what-yay-used"><a href="#configure-socks5-proxy-this-is-what-yay-used" class="headerlink" title="configure socks5 proxy, this is what yay used"></a>configure socks5 proxy, this is what yay used</h1><p>  git config –global http.<a class="link"   target="_blank" rel="noopener" href="https://github.com.proxy/" >https://github.com.proxy<i class="fas fa-external-link-alt"></i></a> socks5://127.0.0.1:1089<br>  git config –global https.<a class="link"   target="_blank" rel="noopener" href="https://github.com.proxy/" >https://github.com.proxy<i class="fas fa-external-link-alt"></i></a> socks5://127.0.0.1:1089</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">the port we can find in gui configure</span><br><span class="line"></span><br><span class="line">![image-20210505014434826](.images/image-20210505014434826.png)</span><br><span class="line"></span><br><span class="line">- after configure, if i need to use yay, first choose a proxy and enable it, then use yay to download software, speed fast.</span><br><span class="line"></span><br><span class="line">![image-20210505015404595](.images/image-20210505015404595.png)</span><br><span class="line"></span><br><span class="line">- at last create a soft link to appimage</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">cd .local/bin</span><br><span class="line">ln -sf ~/.local/apps/qv2ray/Qv2ray.v2.7.0-pre2.linux-x64.AppImage v2ray</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">usage: such as reconnect last connect</span></span><br><span class="line">v2ray --reconnect</span><br></pre></td></tr></table></figure>

<h3 id="terminal-proxy"><a href="#terminal-proxy" class="headerlink" title="terminal proxy"></a>terminal proxy</h3><p>above v2ray setting can allow git / github /browser proxy, but terminal cannot. below will show how to proxy terminal.</p>
<p>the setting can work correctly depend on above v2ray work fine</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S proxychains-ng </span><br></pre></td></tr></table></figure>

<p>modify configure file</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">add this to file end</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">socks4         127.0.0.1 9050</span></span><br><span class="line">http    127.0.0.1 8889</span><br><span class="line">socks5  127.0.0.1 1089</span><br></pre></td></tr></table></figure>

<p>proxy terminal</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains bash</span><br></pre></td></tr></table></figure>

<p><img src=".images/image-20210505021635397.png" alt="image-20210505021635397"></p>
<p><img src=".images/image-20210505021703497.png" alt="image-20210505021703497"></p>
<h3 id="cronie-notify"><a href="#cronie-notify" class="headerlink" title="cronie notify"></a>cronie notify</h3><p>i use cronie to edit time task</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S cronie</span><br></pre></td></tr></table></figure>

<p>in default, cronie use <code>vi</code> to edit task. we can change it vim</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EDITOR=vim crontab -e</span><br></pre></td></tr></table></figure>

<p>there are some principles we need to follow:</p>
<ol>
<li>message cannot send to dbus directorily</li>
<li>crontab don’t know system variables, we need to announce it</li>
<li>stdout not support pipline</li>
<li>cannot recognize local command such as <code>~/.local/bin</code></li>
</ol>
<p>in order to use notify and sound we need announce variables either in script or crontab command</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># sound variable</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">check variable<span class="string">&#x27;s value</span></span></span><br><span class="line">echo $XDG_RUNTIME_DIR</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">1. write in script</span></span></span><br><span class="line">export XDG_RUNTIME_DIR=/run/user/1000</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">2. or announce in crontab</span></span></span><br><span class="line">env XDG_RUNTIME_DIR=/run/user/1000</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"># nofify</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">check variable&#x27;</span>s value</span></span><br><span class="line">echo $DBUS_SESSION_BUS_ADDRESS</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. write <span class="keyword">in</span> script</span></span><br><span class="line">export DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. or announce <span class="keyword">in</span> crontab</span></span><br><span class="line">env DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus</span><br></pre></td></tr></table></figure>

<p>we can write crontab like this:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * env DBUS_SESSION_BUS_ADDRESS=unix:path=&quot;/run/user/1000/bus&quot; XDG_RUNTIME_DIR=&quot;/run/user/1000&quot; dunstify &quot;`~/.local/bin/filesync`&quot;</span><br></pre></td></tr></table></figure>

<p>however, there is a problem. if we send nothing, the dunst will also show a none notify. we can fix it by writing command in script, and then execute script</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function log()&#123;</span><br><span class="line">    exec 1&gt;&amp;4</span><br><span class="line">    if [ $# -gt 0 ];then</span><br><span class="line">        info=$@</span><br><span class="line">        echo &quot;[$(date &#x27;+%F %H:%M&#x27;)] :: $info&quot;</span><br><span class="line">        # send notify in script</span><br><span class="line">        dunstify &quot;[$(date &#x27;+%F %H:%M&#x27;)] :: $info&quot;</span><br><span class="line">    fi</span><br><span class="line">    exec 1&gt;/dev/null</span><br><span class="line">    unset info</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>then execute script with crontab</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * env DBUS_SESSION_BUS_ADDRESS=unix:path=&quot;/run/user/1000/bus&quot; XDG_RUNTIME_DIR=&quot;/run/user/1000&quot; ~/.local/bin/filesync</span><br></pre></td></tr></table></figure>

<h3 id="oneko"><a href="#oneko" class="headerlink" title="oneko"></a>oneko</h3><p>oneko is a application that displays a cute cat chases cursor.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">AUR install</span></span><br><span class="line">paru -S oneko</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">add to xmonad startup app</span></span><br><span class="line">spawnOnce &quot;oneko &amp;&quot;</span><br></pre></td></tr></table></figure>

<h3 id="downgrade-application"><a href="#downgrade-application" class="headerlink" title="downgrade application"></a>downgrade application</h3><p>sometimes we want to use an old version application, we can use <code>downgrade</code> command to downgrade.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pacman -S downgrade</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">downgrade a software</span></span><br><span class="line">downgrade app_name</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">then</span> choose a number to downgrade</span></span><br></pre></td></tr></table></figure>

<h2 id="使用shoadowsocks上google"><a href="#使用shoadowsocks上google" class="headerlink" title="使用shoadowsocks上google"></a>使用shoadowsocks上google</h2><p>安装shadowsocks代理以及proxychains协议转换</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S proxychains-ng shadowsocks</span><br></pre></td></tr></table></figure>

<p>修改proxychains配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/proxychains.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">socks4         127.0.0.1 9050        <span class="comment">#注释</span></span></span><br><span class="line">socks5  127.0.0.1 1080                #添加</span><br></pre></td></tr></table></figure>

<p>添加本地域名解析</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/hosts</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加</span></span><br><span class="line">104.31.74.55  youneed.win</span><br><span class="line">104.31.74.54  www.youneed.win</span><br></pre></td></tr></table></figure>

<p><em>添加脚本变量路径</em></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim .xinitrc</span><br><span class="line">export PATH=$PATH:~/.local/bin</span><br></pre></td></tr></table></figure>

<p>在<code>~/.local/bin</code>下建立软链接，指向脚本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.local/bin</span><br><span class="line">ln -s ~/Documents/script/shell/shadowshocks.sh sslink</span><br></pre></td></tr></table></figure>

<p>运行脚本启动代理</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">proxychains firefox        #浏览器代理</span><br><span class="line">proxychains bash        #终端代理</span><br></pre></td></tr></table></figure>

<h2 id="安装virtualbox"><a href="#安装virtualbox" class="headerlink" title="安装virtualbox"></a>安装virtualbox</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">由于使用的是linux内核，所以选择virtualbox-host-modules-arch</span> </span><br><span class="line">sudo pacman -S virtualbox virtualbox-host-modules-arch </span><br></pre></td></tr></table></figure>

<p>在启动虚拟机之前，需要加载模块</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modprobe vboxdrv</span><br></pre></td></tr></table></figure>

<p>启动virtualbox的几种方式：</p>
<p>1.GUI图形界面的启动，这也是大部分时候都在使用的方式，即运行virtualbox软件</p>
<p>2.命令启动，即使用命令无界面启动。后来发现这种方式启动和xmonad很搭，因为不会存在热键冲突的问题，那么xmonad中的所有窗口操作的快捷键依然有效。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vboxsdl --startvm &#x27;kali linux&#x27;        #由于系统名字中有空格，所以要使用引号</span><br></pre></td></tr></table></figure>

<p>3.同样是命令启动，但这种大多数时候是作为服务器使用的方式，即没有任何界面，只能通过ssh去连接主机（就像在windows中使用xshell一个意思）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vboxheadless -s &#x27;kali linux&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="解决xorg问题"><a href="#解决xorg问题" class="headerlink" title="解决xorg问题"></a>解决xorg问题</h2><p>自从安装系统之后就发现一个问题，那就是xorg每次启动都要花个20多秒。所以首先是查看日志</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">xorg的日志在家目录下</span></span><br><span class="line">vim .local/share/xorg/Xorg.0.log</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">然后查看EE报错的地方，发现每次都是在启动nouveau驱动的时候卡了20多秒，然后启动失败了</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">原因是我没有安装nouveau驱动，没有安装的原因就是安装之后启动倒是挺迅速的，但是退出xorg之后，或者想要关机的时候就会卡住。</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">我想为什么就不能让它不去检测这个驱动呢？终于google到了答案：就是强制让xorg使用intel显卡，而忽略n卡</span></span><br><span class="line"></span><br><span class="line">cd /etc/X11/xorg.conf.d/</span><br><span class="line">touch nonvidia.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加如下代码：</span></span><br><span class="line">Section &quot;Device&quot;</span><br><span class="line">    Identifier  &quot;Intel Card&quot;</span><br><span class="line">    Driver      &quot;intel&quot;</span><br><span class="line">EndSection</span><br><span class="line"></span><br><span class="line">Section &quot;Device&quot;</span><br><span class="line">    Identifier  &quot;Nvidia Card&quot;</span><br><span class="line">    Driver      &quot;nouveau&quot;</span><br><span class="line">EndSection</span><br><span class="line"></span><br><span class="line">Section &quot;Screen&quot;</span><br><span class="line">    Identifier  &quot;My Screen&quot;</span><br><span class="line">    Device      &quot;Intel Card&quot;</span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure>

<p>然后reboot，startx，果然一下子就打开了图形界面，虽然查看了一下日志，依然有报错，但是它直接跳过之后的等待以及检测了。以上介绍在wiki上也有讲，只是我不知道咋写啊。这也算是基本完成了系统安装以及之后的错误修复了吧！</p>
<h2 id="安装系统之后博客迁移"><a href="#安装系统之后博客迁移" class="headerlink" title="安装系统之后博客迁移"></a>安装系统之后博客迁移</h2><p>安装必要软件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">这些都要安装</span></span><br><span class="line">sudo pacman -S git nodejs npm</span><br><span class="line">sudo npm install -g hexo-cli</span><br><span class="line">npm install --save hexo-deployer-git</span><br><span class="line">npm audit fix</span><br><span class="line">npm audit fix --force</span><br><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>

<p>当然我又安装了这个加密插件，结果我错了</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-blog-encrypt    #然后我哭了</span><br></pre></td></tr></table></figure>

<p>搞了半天老是报错，什么tostring不能为空，我的密码明明有啊，查看了一下js配置文件，发现确实有password.tostring()这个</p>
<p>然后我用数字做密码试了一下不报错，但是我之前加密的文章全部没加密了？我觉得这是一个bug，至少前面应该做一下判断。所以去你的加密，索性不用了，然后一切都好了。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure>

<p>然后在github设置中将sshkey添加进去</p>
<p>当然这后面还有两步，如果没有这两步，推送的时候会提示的</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email &quot;2935549510@qq.com&quot;</span><br><span class="line">git config --global user.name &quot;narcissus&quot;</span><br></pre></td></tr></table></figure>

<p>再编译，推送</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<h2 id="与Android手机连接"><a href="#与Android手机连接" class="headerlink" title="与Android手机连接"></a><a class="link"   target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Media_Transfer_Protocol#Android_File_Transfer" >与Android手机连接<i class="fas fa-external-link-alt"></i></a></h2><p>这里是使用了USB与手机连接</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S android-file-transfer    #安装软件</span><br></pre></td></tr></table></figure>

<p>手机通过USB与电脑连接，同时开启MTP传输。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo aft-mtp-mount /mnt                    #挂载</span><br></pre></td></tr></table></figure>

<p>然后就可以直接进入<code>/mnt</code>目录查看手机中的文件了</p>
<hr>
<h2 id="更新key失败"><a href="#更新key失败" class="headerlink" title="更新key失败"></a>更新key失败</h2><p>加入archlinuxcn源后，下载archlinuxcn-keyring时失败。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除gpg数据库</span></span><br><span class="line">rm -rf /etc/pacman.d/gunpg</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重新获取</span></span><br><span class="line">pacman-key --init</span><br><span class="line">pacman-key --populate</span><br><span class="line">pacman-key --refresh-keys</span><br><span class="line">pacman -Syu</span><br></pre></td></tr></table></figure>

<p>另外一个解决方法是通过调整时间，出问题的根本原因在于时间不一致，但是这次时间看似都正常，因此用第一种方法解决了</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看系统时间</span></span><br><span class="line">date</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看硬件时钟</span></span><br><span class="line">hwclock --show</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改硬件时钟</span></span><br><span class="line">timedatectl set-time &quot;2019-11-24 09:56:00&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重新更新</span></span><br><span class="line">pacman -Syu</span><br></pre></td></tr></table></figure>

<h2 id="discuss"><a href="#discuss" class="headerlink" title="discuss"></a>discuss</h2><p>some problems i meet while installing the system.</p>
<h3 id="cannot-find-the-grub-info-in-bios"><a href="#cannot-find-the-grub-info-in-bios" class="headerlink" title="cannot find the grub info in bios"></a>cannot find the grub info in bios</h3><p>this time i installed system in msi, grub installation and configuration were right, but cannot find the grub in bios. </p>
<p>i know the boot info was stored in NVRAM, so i find wheather it has the boot info with my archlinux.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">efibootmgr -v</span><br></pre></td></tr></table></figure>

<p> there has nothing info of my archlinux, so i added it by myself.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">the efi partition is /dev/sda1 and efi installed <span class="keyword">in</span> /boot/efi with directory /boot/efi/EFI/GRUB/grubx64.efi</span></span><br><span class="line">efibootmgr --create --disk /dev/sda --part 1 --loader /EFI/GRUB/grubx64.efi --label &quot;archlinux bootloader&quot; --verbose</span><br></pre></td></tr></table></figure>

<p>then i checked weather it has the archlinux boot info, and got correct info</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">efibootmgr -v</span><br><span class="line"></span><br><span class="line">Boot0006* archlinux bootloader  PciRoot(0x0)/Pci(0x17,0x0)/Sata(2,65535,0)/HD(1,GPT,fd816945-085d-4dca-aabc-734244e1ff5f,0x800,0x31800)/File(\EFI\BOOT\BOOTX64.EFI)</span><br></pre></td></tr></table></figure>

<p>however when i reboot the system, there has nothing what i added before.</p>
<p>at last i find the problem:</p>
<p><img src=".images/image-20210206170411522.png" alt="image-20210206170411522"></p>
<p>that’s why the info i added disappeard. so while installing the grub, i need add a <code>removable</code> parameter. and then the grub configure will rename to BOOTX and store in another directory where the UEFI firmware can recognize.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">correctly <span class="built_in">command</span></span></span><br><span class="line">grub-install --efi-directory=/boot/efi --bootloader-id=GRUB --removable</span><br></pre></td></tr></table></figure>

<p> now the directory likes this:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/boot/efi</span><br><span class="line">└── EFI</span><br><span class="line">    └── BOOT</span><br><span class="line">        └── BOOTX64.EFI</span><br></pre></td></tr></table></figure>

<p>the grub configure  producted before can be removed or leave it alone since it will not be used.</p>
<h3 id="xterm-or-ranger-cannot-show-icons"><a href="#xterm-or-ranger-cannot-show-icons" class="headerlink" title="xterm or ranger cannot show icons"></a>xterm or ranger cannot show icons</h3><p>sometimes while installing nerd-font and ranger plug-icons we may find terminal cannot show icons, and the problem was leaded by error system font  setting. we need to change whether the configure properly</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~ » cat /etc/locale.conf                                                                                                                                                                              ~  </span><br><span class="line">LANG=en_US.UTF-8</span><br></pre></td></tr></table></figure>

<h3 id="xterm-cannot-show-Chinese"><a href="#xterm-cannot-show-Chinese" class="headerlink" title="xterm cannot show Chinese"></a>xterm cannot show Chinese</h3><p>at first, checking whether we have setted the correct locale</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make sure exist <span class="string">&quot;en_US.UTF-8&quot;</span></span></span><br><span class="line">locale -a</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make sure have <span class="string">&quot;LANG=en_US.UTF-8&quot;</span></span></span><br><span class="line">cat /etc/locale.conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="keyword">if</span> not run this</span></span><br><span class="line">echo &quot;LANG=en_US.UTF-8&quot; &gt; /etc/locale.conf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or use localectl</span></span><br><span class="line">localectl set-locale LANG=en_US.UTF-8</span><br></pre></td></tr></table></figure>

<p>if locale setting makes no effect, we need force xterm use utf8</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">add this to .Xresource</span></span><br><span class="line"></span><br><span class="line">XTerm*locale: false</span><br><span class="line">XTerm*utf8: true</span><br></pre></td></tr></table></figure>

<p>run <code>xrdb .Xresource</code> to make effect of changes </p>
<h3 id="AMD-virtualize-failed"><a href="#AMD-virtualize-failed" class="headerlink" title="AMD virtualize failed"></a>AMD virtualize failed</h3><p>when use virtualbox to launch a virtual machine, there comes a error, it is leaded by disabled cpu virtual in bios which is in default.</p>
<p><strong>ERROR MSG:</strong> <code>AMD-V is disabled in the BIOS (or by the host OS) (VERR_SVM_DISABLED).</code></p>
<p><strong>FIX:</strong> enable <code>svm mode</code></p>
<p><img src=".images/MSI_SnapShot-1621141601481.bmp"></p>
<h3 id="yay-install-failed-with-strip-binary"><a href="#yay-install-failed-with-strip-binary" class="headerlink" title="yay install failed with strip binary"></a>yay install failed with strip binary</h3><p><strong>ERROR:</strong> <code>Cannot find the strip binary required for object file stripping.</code></p>
<p><strong>WHY:</strong> miss some application</p>
<p><strong>FIX:</strong> install <code>base-devel</code></p>
<h3 id="mirror-version-error"><a href="#mirror-version-error" class="headerlink" title="mirror version error"></a>mirror version error</h3><p><strong>ERROR:</strong> <code> error while loading shared libraries: libicui18n.so.69</code></p>
<p><strong>WHY:</strong> version problem</p>
<p><strong>FIX:</strong> uncomment community mirror and run system update: <code>pacman -Syu</code></p>
<h3 id="pycharm-error-in-xmonad"><a href="#pycharm-error-in-xmonad" class="headerlink" title="pycharm error in xmonad"></a>pycharm error in xmonad</h3><p>if in windows environment, it works fine. but in xmonad, there comes a error: <code>WARN - s.impl.EditorColorsManagerImpl - Cannot find scheme: Vibrant Ink from plugin: com.intellij.database</code>.</p>
<p>fixed by exporting a environment variable</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export _JAVA_AWT_WM_NONREPARENTING=1</span><br></pre></td></tr></table></figure>

<p>in order to simply usage, write it with alias</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias pycharm=&#x27;export _JAVA_AWT_WM_NONREPARENTING=1 &amp;&amp; ~/pycharm-2019.3.3/bin/pycharm.sh &amp;&gt;/dev/null &amp;&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="obs-cannot-record-microphone-sound"><a href="#obs-cannot-record-microphone-sound" class="headerlink" title="obs cannot record microphone sound"></a>obs cannot record microphone sound</h3><p>the default setting after installing obs-studio cannot record microphone. In a fact that it’s not the problem of obs, it is the error of system sound setting. The default system setting mutes the sound of microphone, we need install a software called <code>pavucontrol</code> to configure it.</p>
<p><strong>gui tool</strong></p>
<p><img src=".images/image-20210731235537332.png" alt="image-20210731235537332"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S pavucontrol</span><br></pre></td></tr></table></figure>

<p>click the icon to disable muting, then every thing works fine.</p>
<p><img src=".images/image-20210801000011984.png" alt="image-20210801000011984"></p>
<p><img src=".images/obs.gif" alt="obs"></p>
<p><strong>cli tool</strong></p>
<p>another method is install a cli tool, much light than gui tool.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install</span></span><br><span class="line">pacman -S pulsemixer</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">list all audio device</span></span><br><span class="line">pulsemixer --list</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">find the mute one and unmute it</span></span><br><span class="line">pulsemixer --id &lt;source-2&gt; --unmute</span><br></pre></td></tr></table></figure>

<h3 id="invalid-or-corrupted-package-pgp-signature"><a href="#invalid-or-corrupted-package-pgp-signature" class="headerlink" title="invalid or corrupted package(pgp signature)"></a>invalid or corrupted package(pgp signature)</h3><p>after adding china mirror to <code>pacman.conf</code> and running update, package install will meet <a class="link"   target="_blank" rel="noopener" href="https://bbs.archlinux.org/viewtopic.php?id=233480" >this problem<i class="fas fa-external-link-alt"></i></a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">error: jansson: signature from &quot;Eli Schwartz &lt;eschwartz@archlinux.org&gt;&quot; is marginal trust</span><br><span class="line">:: File /var/cache/pacman/pkg/jansson-2.10-3-x86_64.pkg.tar.xz is corrupted (invalid or corrupted package (PGP signature)).</span><br></pre></td></tr></table></figure>

<p>method to resolve the problem</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">eg:</span></span><br><span class="line">pacman-key --list-sigs |rg &#x27;Eli&#x27;</span><br><span class="line">pacman-key --delete 91FFE0700E80619CEB73235CA88E23E377514E00</span><br><span class="line">pacman-key --populate archlinux</span><br></pre></td></tr></table></figure>

        </div>

        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/archlinux/">#archlinux</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2022/04/23/learn-from-shield/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">learn_from_shield</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">shutterbug</a>
        </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#archlinux"><span class="nav-number">1.</span> <span class="nav-text">archlinux</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#base-system-install"><span class="nav-number">1.1.</span> <span class="nav-text">base system install</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#adjust-console-font"><span class="nav-number">1.1.1.</span> <span class="nav-text">adjust console font</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#connect-network"><span class="nav-number">1.1.2.</span> <span class="nav-text">connect network</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#change-mirror-list"><span class="nav-number">1.1.3.</span> <span class="nav-text">change mirror list</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#update-system-clock"><span class="nav-number">1.1.4.</span> <span class="nav-text">update system clock</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#partition-disk"><span class="nav-number">1.1.5.</span> <span class="nav-text">partition disk</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mount-partition-and-install-system"><span class="nav-number">1.1.6.</span> <span class="nav-text">mount partition and install system</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#generate-mount-configure"><span class="nav-number">1.1.7.</span> <span class="nav-text">generate mount configure</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#chroot-new-system"><span class="nav-number">1.1.8.</span> <span class="nav-text">chroot new system</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#timezone"><span class="nav-number">1.1.9.</span> <span class="nav-text">timezone</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#system-language"><span class="nav-number">1.1.10.</span> <span class="nav-text">system language</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#network"><span class="nav-number">1.1.11.</span> <span class="nav-text">network</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#initramfs"><span class="nav-number">1.1.12.</span> <span class="nav-text">initramfs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#install-netwrok-tool"><span class="nav-number">1.1.13.</span> <span class="nav-text">install netwrok tool</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#install-grub"><span class="nav-number">1.1.14.</span> <span class="nav-text">install grub</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#set-root-passwd"><span class="nav-number">1.1.15.</span> <span class="nav-text">set root passwd</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#umount-and-reboot"><span class="nav-number">1.1.16.</span> <span class="nav-text">umount and reboot</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#general-configure"><span class="nav-number">1.2.</span> <span class="nav-text">general configure</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#connect-network-1"><span class="nav-number">1.2.1.</span> <span class="nav-text">connect network</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#install-some-software"><span class="nav-number">1.2.2.</span> <span class="nav-text">install some software</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#add-user"><span class="nav-number">1.2.3.</span> <span class="nav-text">add user</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#install-xorg"><span class="nav-number">1.2.4.</span> <span class="nav-text">install xorg</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#video"><span class="nav-number">1.2.5.</span> <span class="nav-text">video</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#audio"><span class="nav-number">1.2.6.</span> <span class="nav-text">audio</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#personal-configure"><span class="nav-number">1.3.</span> <span class="nav-text">personal configure</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#auto-config"><span class="nav-number">1.3.1.</span> <span class="nav-text">auto config</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#step-by-step"><span class="nav-number">1.3.2.</span> <span class="nav-text">step by step</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#install-AUR-package-installer"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">install AUR package installer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#add-China-repository"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">add China repository</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#default-location-config"><span class="nav-number">1.3.2.3.</span> <span class="nav-text">default location config</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#fcitx5-configure"><span class="nav-number">1.3.2.4.</span> <span class="nav-text">fcitx5 configure</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xmonad-config"><span class="nav-number">1.3.2.5.</span> <span class="nav-text">xmonad config</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#polybar-config"><span class="nav-number">1.3.2.6.</span> <span class="nav-text">polybar config</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#disable-touchpad"><span class="nav-number">1.3.2.7.</span> <span class="nav-text">disable touchpad</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cursor-style"><span class="nav-number">1.3.2.8.</span> <span class="nav-text">cursor style</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#window-effect"><span class="nav-number">1.3.2.9.</span> <span class="nav-text">window effect</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xterm-transparent"><span class="nav-number">1.3.2.10.</span> <span class="nav-text">xterm transparent</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ntfs-file-system-recognize"><span class="nav-number">1.3.2.11.</span> <span class="nav-text">ntfs file system recognize</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#home-directory"><span class="nav-number">1.3.2.12.</span> <span class="nav-text">home directory</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#fat-partition-recognize"><span class="nav-number">1.3.2.13.</span> <span class="nav-text">fat partition recognize</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#other-settings"><span class="nav-number">1.4.</span> <span class="nav-text">other settings</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#grub-theme"><span class="nav-number">1.4.1.</span> <span class="nav-text">grub theme</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#show-boot-message"><span class="nav-number">1.4.2.</span> <span class="nav-text">show boot message</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#coloize-pacman"><span class="nav-number">1.4.3.</span> <span class="nav-text">coloize pacman</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#colorls"><span class="nav-number">1.4.4.</span> <span class="nav-text">colorls</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bluetooth"><span class="nav-number">1.4.5.</span> <span class="nav-text">bluetooth</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#adjust-video-fan-speed"><span class="nav-number">1.4.6.</span> <span class="nav-text">adjust video fan speed</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cursor-theme"><span class="nav-number">1.4.7.</span> <span class="nav-text">cursor theme</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gtk-application-theme-and-icon-theme"><span class="nav-number">1.4.8.</span> <span class="nav-text">gtk application theme and icon theme</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#font-setting"><span class="nav-number">1.4.9.</span> <span class="nav-text">font setting</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#virtual-machine"><span class="nav-number">1.4.10.</span> <span class="nav-text">virtual machine</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#virtualbox"><span class="nav-number">1.4.10.1.</span> <span class="nav-text">virtualbox</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#kvm"><span class="nav-number">1.4.10.2.</span> <span class="nav-text">kvm</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#connect-remote-windows"><span class="nav-number">1.4.11.</span> <span class="nav-text">connect remote windows</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#auto-login"><span class="nav-number">1.4.12.</span> <span class="nav-text">auto login</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#connect-remote-linux"><span class="nav-number">1.4.13.</span> <span class="nav-text">connect remote linux</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#auto-suspend"><span class="nav-number">1.4.14.</span> <span class="nav-text">auto suspend</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cache-browser-data-to-memory"><span class="nav-number">1.4.15.</span> <span class="nav-text">cache browser data to memory</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cache-anything-to-RAM"><span class="nav-number">1.4.16.</span> <span class="nav-text">cache anything to RAM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#screen-rotation"><span class="nav-number">1.4.17.</span> <span class="nav-text">screen rotation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#firefox-adds-on"><span class="nav-number">1.4.18.</span> <span class="nav-text">firefox adds-on</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#burn-dvd"><span class="nav-number">1.4.19.</span> <span class="nav-text">burn dvd</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#email-receiving"><span class="nav-number">1.4.20.</span> <span class="nav-text">email receiving</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#external-monitor-brightness"><span class="nav-number">1.4.21.</span> <span class="nav-text">external monitor brightness</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#command-software-usage"><span class="nav-number">1.5.</span> <span class="nav-text">command&#x2F;software usage</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#journal"><span class="nav-number">1.5.1.</span> <span class="nav-text">journal</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#format-convert"><span class="nav-number">1.5.2.</span> <span class="nav-text">format convert</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#qv2ray-amp-v2ray-core"><span class="nav-number">1.5.3.</span> <span class="nav-text">qv2ray &amp; v2ray-core</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#configure-http-https-proxy"><span class="nav-number">2.</span> <span class="nav-text">configure http https proxy</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#configure-socks5-proxy-this-is-what-yay-used"><span class="nav-number">3.</span> <span class="nav-text">configure socks5 proxy, this is what yay used</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#terminal-proxy"><span class="nav-number">3.0.1.</span> <span class="nav-text">terminal proxy</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cronie-notify"><span class="nav-number">3.0.2.</span> <span class="nav-text">cronie notify</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#oneko"><span class="nav-number">3.0.3.</span> <span class="nav-text">oneko</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#downgrade-application"><span class="nav-number">3.0.4.</span> <span class="nav-text">downgrade application</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8shoadowsocks%E4%B8%8Agoogle"><span class="nav-number">3.1.</span> <span class="nav-text">使用shoadowsocks上google</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85virtualbox"><span class="nav-number">3.2.</span> <span class="nav-text">安装virtualbox</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3xorg%E9%97%AE%E9%A2%98"><span class="nav-number">3.3.</span> <span class="nav-text">解决xorg问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E4%B9%8B%E5%90%8E%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB"><span class="nav-number">3.4.</span> <span class="nav-text">安装系统之后博客迁移</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8EAndroid%E6%89%8B%E6%9C%BA%E8%BF%9E%E6%8E%A5"><span class="nav-number">3.5.</span> <span class="nav-text">与Android手机连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0key%E5%A4%B1%E8%B4%A5"><span class="nav-number">3.6.</span> <span class="nav-text">更新key失败</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#discuss"><span class="nav-number">3.7.</span> <span class="nav-text">discuss</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#cannot-find-the-grub-info-in-bios"><span class="nav-number">3.7.1.</span> <span class="nav-text">cannot find the grub info in bios</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xterm-or-ranger-cannot-show-icons"><span class="nav-number">3.7.2.</span> <span class="nav-text">xterm or ranger cannot show icons</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xterm-cannot-show-Chinese"><span class="nav-number">3.7.3.</span> <span class="nav-text">xterm cannot show Chinese</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AMD-virtualize-failed"><span class="nav-number">3.7.4.</span> <span class="nav-text">AMD virtualize failed</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#yay-install-failed-with-strip-binary"><span class="nav-number">3.7.5.</span> <span class="nav-text">yay install failed with strip binary</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mirror-version-error"><span class="nav-number">3.7.6.</span> <span class="nav-text">mirror version error</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pycharm-error-in-xmonad"><span class="nav-number">3.7.7.</span> <span class="nav-text">pycharm error in xmonad</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#obs-cannot-record-microphone-sound"><span class="nav-number">3.7.8.</span> <span class="nav-text">obs cannot record microphone sound</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#invalid-or-corrupted-package-pgp-signature"><span class="nav-number">3.7.9.</span> <span class="nav-text">invalid or corrupted package(pgp signature)</span></a></li></ol></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/local-search.js"></script>






<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
