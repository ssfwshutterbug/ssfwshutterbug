<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>xmonad | shutterbug sweet diary</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="XMONADWhat is xmonad? It is a window manager which i used for years and it is also my favorite one among tens of WM. Although i have used it so many years, i can not really understand it’s configure l">
<meta property="og:type" content="article">
<meta property="og:title" content="xmonad">
<meta property="og:url" content="https://raw.githubusercontent.com/ssfwshutterbug/ssfwshutterbug.github.io/main/2022/06/19/xmonad/index.html">
<meta property="og:site_name" content="shutterbug sweet diary">
<meta property="og:description" content="XMONADWhat is xmonad? It is a window manager which i used for years and it is also my favorite one among tens of WM. Although i have used it so many years, i can not really understand it’s configure l">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-06-19T12:22:20.000Z">
<meta property="article:modified_time" content="2022-06-19T12:23:11.510Z">
<meta property="article:author" content="shutterbug">
<meta property="article:tag" content="xmonad">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="shutterbug sweet diary" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">shutterbug sweet diary</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://raw.githubusercontent.com/ssfwshutterbug/ssfwshutterbug.github.io/main"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-xmonad" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/06/19/xmonad/" class="article-date">
  <time datetime="2022-06-19T12:22:20.000Z" itemprop="datePublished">2022-06-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      xmonad
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="XMONAD"><a href="#XMONAD" class="headerlink" title="XMONAD"></a>XMONAD</h1><p>What is xmonad? It is a window manager which i used for years and it is also my favorite one among tens of WM. Although i have used it so many years, i can not really understand it’s configure language haskell, so do some of features that i like. Recently, when i see a installation guide in <a target="_blank" rel="noopener" href="https://xmonad.org/INSTALL.html">official web site</a>, i find something new i have never know and also a solution for every time upgrade system will broken xmonad in archlinux.</p>
<p>Main point:</p>
<ul>
<li>we can put xmonad configure file under <code>~/.config/xmonad</code> instead of <code>~/.xmonad</code>.</li>
<li>we should not install xmonad and xmonad-contrib via system package manager(<code>pacman</code>).</li>
<li>we need download origion file of xmonad and xmonad-contrib from github.</li>
<li>we need a tool called <a target="_blank" rel="noopener" href="https://docs.haskellstack.org/en/stable/README/">stack</a> to manage our xmonad.</li>
</ul>
<blockquote>
<p>Note: </p>
<ul>
<li><p>when we use our system package manager pacman to download xmonad, it will also download many dependences, once some of them upgrade, our xmonad should be recompiled, if not it will broken once restart computer since it builds xmonad with dependences though system dynamic link.</p>
</li>
<li><p>when compile xmonad, it needs a tool called ghc. once we use stack, we need create a project, and then it can automatically download ghc, auto download project dependences, auto compile. very useful.</p>
</li>
</ul>
</blockquote>
<h2 id="Install-Stack"><a href="#Install-Stack" class="headerlink" title="Install Stack"></a>Install Stack</h2><p>Open up <a target="_blank" rel="noopener" href="https://docs.haskellstack.org/en/stable/README/">official website</a>, we can find the full introduction. what i <a target="_blank" rel="noopener" href="https://docs.haskellstack.org/en/stable/install_and_upgrade/">recommend</a> is to download the binary file of stack(manual style).</p>
<p><em>uncompress to local path</em></p>
<pre><code class="shell">tar -xzf stack-2.7.5-linux-x86_64.tar.gz -C ~/.local/share/bin
</code></pre>
<p><em><strong>make sure the path already added to system path</strong></em></p>
<p><strong>China-based users</strong></p>
<p>because we live in China, we cannot download need file with stack until we do some configuration.</p>
<p><em>append this in ~/.stack/config.yaml</em></p>
<pre><code class="shell">###ADD THIS IF YOU LIVE IN CHINA
setup-info-locations: 
- &quot;http://mirrors.tuna.tsinghua.edu.cn/stackage/stack-setup.yaml&quot;
urls:
  latest-snapshot: http://mirrors.tuna.tsinghua.edu.cn/stackage/snapshots.json

package-indices:
  - download-prefix: http://mirrors.tuna.tsinghua.edu.cn/hackage/
    hackage-security:
        keyids:
        - 0a5c7ea47cd1b15f01f5f51a33adda7e655bc0f0b0615baa8e271f4c3351e21d
        - 1ea9ba32c526d1cc91ab5e5bd364ec5e9e8cb67179a471872f6e26f0ae773d42
        - 280b10153a522681163658cb49f632cde3f38d768b736ddbc901d99a1a772833
        - 2a96b1889dc221c17296fcc2bb34b908ca9734376f0f361660200935916ef201
        - 2c6c3627bd6c982990239487f1abd02e08a02e6cf16edb105a8012d444d870c3
        - 51f0161b906011b52c6613376b1ae937670da69322113a246a09f807c62f6921
        - 772e9f4c7db33d251d5c6e357199c819e569d130857dc225549b40845ff0890d
        - aa315286e6ad281ad61182235533c41e806e5a787e0b6d1e7eef3f09d137d2e9
        - fe331502606802feac15e514d9b9ea83fee8b6ffef71335479a2e68d84adc6b0
        key-threshold: 3
        ignore-expiry: no
</code></pre>
<p>and that is all we need do for installation</p>
<h2 id="Install-Needed-Dependences"><a href="#Install-Needed-Dependences" class="headerlink" title="Install Needed Dependences"></a>Install Needed Dependences</h2><p>in archlinux, we need download below dependences:</p>
<pre><code class="shell">sudo pacman -S \
&gt; git \
&gt; xorg-server xorg-apps xorg-xinit xorg-xmessage \
&gt; libx11 libxft libxinerama libxrandr libxss \
&gt; pkgconf
</code></pre>
<h2 id="Install-Xmonad"><a href="#Install-Xmonad" class="headerlink" title="Install Xmonad"></a>Install Xmonad</h2><ul>
<li>create xmonad configure directory and change to it.</li>
</ul>
<pre><code class="shell">mkdir ~/.config/xmonad
cd ~/.config/xmonad
</code></pre>
<ul>
<li>copy our configure file to new directory</li>
</ul>
<pre><code class="shell">cp ~/.xmonad/xmonad.hs ~/.config/xmonad
</code></pre>
<ul>
<li>follow <a target="_blank" rel="noopener" href="https://xmonad.org/INSTALL.html">this page</a>, download xmonad via git</li>
</ul>
<pre><code class="shell">git clone https://github.com/xmonad/xmonad
git clone https://github.com/xmonad/xmonad-contrib
</code></pre>
<ul>
<li>create stack project</li>
</ul>
<pre><code class="shell">stack init
</code></pre>
<p><em>with this command, stack will create a yaml file to record our xmonad project</em></p>
<ul>
<li>install everything</li>
</ul>
<pre><code class="shell">stack install
</code></pre>
<p><strong>it will auto download ghc, build all required package, copy <code>xmonad</code> executable file to <code>~/.local/bin</code></strong></p>
<ul>
<li>configure xmonad to be our window manager</li>
</ul>
<pre><code class="shell"># add this to the end of ~/.xinitrc
exec xmonad
</code></pre>
<h2 id="Stack-simple-usage"><a href="#Stack-simple-usage" class="headerlink" title="Stack simple usage"></a>Stack simple usage</h2><p>ghci command</p>
<pre><code class="shell">stack ghci --no-build --no-load
</code></pre>
<p>runhaskell command which used in vscodium</p>
<pre><code class="shell">stack runhaskell
</code></pre>
<p>we can add the two with alias</p>
<pre><code class="shell">nvim ~/.config/zsh/.zshrc

alias ghci=&quot;stack ghci --no-build --no-load&quot;
alias runhaskell=&quot;stack runhaskell&quot;
</code></pre>
<h2 id="Uninstall-system-xmonad"><a href="#Uninstall-system-xmonad" class="headerlink" title="Uninstall system xmonad"></a>Uninstall system xmonad</h2><p>if we use xmonad by pacman in the past, now we can uninstall it.</p>
<p>uninstall xmonad which is installed by system package manger pacman</p>
<pre><code class="shell">sudo pacman -Rns xmonad xmonad-contrib
</code></pre>
<p>uninstall all other haskell package which is installed by system package manager pacman</p>
<pre><code class="shell">pacman -Qq |rg haskell |xargs -I &#123;&#125; sudo pacman -Rnsc --noconfirm &#123;&#125;
</code></pre>
<h2 id="At-last"><a href="#At-last" class="headerlink" title="At last"></a>At last</h2><p>and now we have an inpendent, clean xmonad.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://raw.githubusercontent.com/ssfwshutterbug/ssfwshutterbug.github.io/main/2022/06/19/xmonad/" data-id="cl9ktb7vq002xdta87vbp2gvv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xmonad/" rel="tag">xmonad</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/06/24/create-cursor/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          create-cursor
        
      </div>
    </a>
  
  
    <a href="/2022/06/19/to-be-gentle/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">to-be-gentle</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/learn/">learn</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/think/">think</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/thinking/">thinking</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%BB%E5%8E%86%E5%8F%B2/">读历史</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/anaconda/" rel="tag">anaconda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/anbox/" rel="tag">anbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ansible/" rel="tag">ansible</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/archlinux/" rel="tag">archlinux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/boring/" rel="tag">boring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/container/" rel="tag">container</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cursor-theme/" rel="tag">cursor theme</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ed/" rel="tag">ed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/" rel="tag">go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grub/" rel="tag">grub</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/haskell/" rel="tag">haskell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inject-js-css/" rel="tag">inject js/css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iptables/" rel="tag">iptables</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/" rel="tag">life</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mind/" rel="tag">mind</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/optimized/" rel="tag">optimized</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pentablet/" rel="tag">pentablet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/positive/" rel="tag">positive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reality-is-aweful/" rel="tag">reality is aweful</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/route/" rel="tag">route</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rust/" rel="tag">rust</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/" rel="tag">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shield/" rel="tag">shield</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/" rel="tag">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tcp/" rel="tag">tcp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vbox/" rel="tag">vbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xmonad/" rel="tag">xmonad</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zabbix/" rel="tag">zabbix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zk/" rel="tag">zk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/" rel="tag">zsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%9D%E7%BB%AA/" rel="tag">思绪</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A5%9E%E8%AF%9D/" rel="tag">神话</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%89%AF%E7%9F%A5/" rel="tag">良知</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/anaconda/" style="font-size: 10px;">anaconda</a> <a href="/tags/anbox/" style="font-size: 10px;">anbox</a> <a href="/tags/ansible/" style="font-size: 10px;">ansible</a> <a href="/tags/archlinux/" style="font-size: 10px;">archlinux</a> <a href="/tags/boring/" style="font-size: 10px;">boring</a> <a href="/tags/container/" style="font-size: 10px;">container</a> <a href="/tags/cursor-theme/" style="font-size: 10px;">cursor theme</a> <a href="/tags/ed/" style="font-size: 10px;">ed</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/go/" style="font-size: 10px;">go</a> <a href="/tags/grub/" style="font-size: 10px;">grub</a> <a href="/tags/haskell/" style="font-size: 10px;">haskell</a> <a href="/tags/inject-js-css/" style="font-size: 10px;">inject js/css</a> <a href="/tags/iptables/" style="font-size: 10px;">iptables</a> <a href="/tags/k8s/" style="font-size: 20px;">k8s</a> <a href="/tags/life/" style="font-size: 10px;">life</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/mind/" style="font-size: 10px;">mind</a> <a href="/tags/optimized/" style="font-size: 10px;">optimized</a> <a href="/tags/pentablet/" style="font-size: 10px;">pentablet</a> <a href="/tags/positive/" style="font-size: 10px;">positive</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/reality-is-aweful/" style="font-size: 10px;">reality is aweful</a> <a href="/tags/route/" style="font-size: 10px;">route</a> <a href="/tags/rust/" style="font-size: 10px;">rust</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/shield/" style="font-size: 10px;">shield</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/tcp/" style="font-size: 10px;">tcp</a> <a href="/tags/vbox/" style="font-size: 10px;">vbox</a> <a href="/tags/vscode/" style="font-size: 10px;">vscode</a> <a href="/tags/xmonad/" style="font-size: 20px;">xmonad</a> <a href="/tags/zabbix/" style="font-size: 10px;">zabbix</a> <a href="/tags/zk/" style="font-size: 10px;">zk</a> <a href="/tags/zsh/" style="font-size: 10px;">zsh</a> <a href="/tags/%E6%80%9D%E7%BB%AA/" style="font-size: 15px;">思绪</a> <a href="/tags/%E7%A5%9E%E8%AF%9D/" style="font-size: 10px;">神话</a> <a href="/tags/%E8%89%AF%E7%9F%A5/" style="font-size: 10px;">良知</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/10/23/our-body-may-cheat-ourselves-md/">our-body-may-cheat-ourselves.md</a>
          </li>
        
          <li>
            <a href="/2022/07/04/the-reality/">the-reality</a>
          </li>
        
          <li>
            <a href="/2022/06/25/%E4%BB%8E%E5%AE%B9/">从容</a>
          </li>
        
          <li>
            <a href="/2022/06/25/magic-of-xmonad/">magic-of-xmonad</a>
          </li>
        
          <li>
            <a href="/2022/06/24/xp-pentablet/">xp-pentablet</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 shutterbug<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>